!function(e){"use strict";var t={init:function(){elementor.channels.editor.on("section:activated",t.onAnimatedBoxSectionActivated),window.elementor.on("preview:loaded",(function(){elementor.$preview[0].contentWindow.ElementPackEditor=t,t.onPreviewLoaded()}))},onPreviewLoaded:function(){e("#elementor-preview-iframe")[0].contentWindow.elementorFrontend.hooks.addAction("frontend/element_ready/widget",(function(e){}))}};function o(){e(document).off("click",".ep-location-search-btn"),e(document).off("click",".ep-modal-close"),e(document).off("click",".ep-search-address-button"),e(document).off("click",".ep-select-location-button"),e(document).off("click",".ep-search-result-item"),e(document).on("click",".ep-location-search-btn",(function(t){t.preventDefault(),t.stopPropagation();var o=e(this),n=o.next(".ep-location-search-modal"),i=o.closest(".elementor-repeater-row-controls").find('input[data-setting="marker_lat"]'),a=o.closest(".elementor-repeater-row-controls").find('input[data-setting="marker_lng"]');console.log("Button clicked",o),console.log("Modal found",n.length),console.log("Lat field found",i.length),console.log("Lng field found",a.length),n.data("latField",i),n.data("lngField",a),n.find(".ep-search-results").empty(),n.find(".ep-address-search").val(""),n.find(".ep-select-location-button").hide(),n.fadeIn(200),n.find(".ep-address-search").focus()})),e(document).on("click",".ep-modal-close",(function(){e(this).closest(".ep-location-search-modal").fadeOut(200)})),e(document).on("click",".ep-location-search-modal",(function(t){e(t.target).hasClass("ep-location-search-modal")&&e(this).fadeOut(200)})),e(document).on("click",".ep-search-address-button",(function(){var t=e(this).closest(".ep-location-search-modal"),o=t.find(".ep-address-search").val().trim();o&&n(o,t)})),e(document).on("keypress",".ep-address-search",(function(t){if(13===t.which){t.preventDefault();var o=e(this).closest(".ep-location-search-modal"),i=e(this).val().trim();i&&n(i,o)}})),e(document).on("click",".ep-select-location-button",(function(){var t=e(this).closest(".ep-location-search-modal"),o=t.data("selectedLocation"),n=t.data("latField"),i=t.data("lngField");o&&n.length&&i.length&&(n.val(o.lat).trigger("input"),i.val(o.lng).trigger("input"),t.fadeOut(200))}))}function n(t,o){var n=o.find(".ep-search-results");(n.html("<p>Searching...</p>"),o.find(".ep-select-location-button").hide(),"undefined"!=typeof google&&void 0!==google.maps)?(new google.maps.Geocoder).geocode({address:t},(function(t,i){if(n.empty(),"OK"===i)if(t.length>0){var a=e('<div class="ep-search-results-list" style="max-height:200px; overflow-y:auto; margin-bottom:15px; border:1px solid #eee; border-radius:4px;"></div>');n.append(a);var l="ep-location-preview-map-"+Date.now(),r=e('<div id="'+l+'" style="height:300px; margin-top:15px; border:1px solid #ddd; border-radius:4px;"></div>');n.append(r);var c=new google.maps.Map(document.getElementById(l),{zoom:14,center:t[0].geometry.location});t.forEach((function(t,n){var i={lat:t.geometry.location.lat(),lng:t.geometry.location.lng(),address:t.formatted_address},l=e('<div class="ep-search-result-item" style="padding:10px; border-bottom:1px solid #eee; cursor:pointer;"></div>');l.html("<strong>"+i.address+"</strong><br>Lat: "+i.lat.toFixed(7)+", Lng: "+i.lng.toFixed(7)),l.on("click",(function(){e(".ep-search-result-item").css("background-color",""),e(this).css("background-color","#f0f0f0"),o.data("selectedLocation",i),c.setCenter(new google.maps.LatLng(i.lat,i.lng)),o.find(".ep-select-location-button").show()})),a.append(l);new google.maps.Marker({position:new google.maps.LatLng(i.lat,i.lng),map:c,title:i.address});0===n&&l.trigger("click")}))}else n.html("<p>No results found</p>");else n.html("<p>Geocode was not successful: "+i+"</p>")})):n.html("<p>Google Maps API not loaded. Please check your API key.</p>")}e(window).on("elementor:init",t.init),window.ElementPackEditor=t,elementor.hooks.addFilter("panel/elements/regionViews",(function(e){if(jQuery(document).ready((function(){jQuery("body").append("<style>.bdt-pro-unlock-icon:after{right: auto !important; left: 5px !important;}</style>")})),ElementPackConfigPromotional.pro_installed||ElementPackConfigPromotional.promotional_widgets<=0)return e;var t,o,n=ElementPackConfigPromotional.promotional_widgets,i=e.elements.options.collection,a=e.categories.options.collection,l=e.categories.view,r=e.elements.view,c=[];return _.each(n,(function(e,t){i.add({name:e.name,title:e.title,icon:e.icon,categories:e.categories,editable:!1})})),i.each((function(e){"element-pack-pro"===e.get("categories")[0]&&c.push(e)})),(o=a.findIndex({name:"element-pack"}))&&a.add({name:"element-pack-pro",title:"Element Pack Pro",defaultActive:!1,items:c},{at:o+1}),t={getWedgetOption:function(e){return n.find((function(t){return t.name==e}))},className:function(){var e="elementor-element-wrapper";return this.isEditable()||(e+=" elementor-element--promotion"),e},onMouseDown:function(){this.constructor.__super__.onMouseDown.call(this);var e=this.getWedgetOption(this.model.get("name"));elementor.promotion.showDialog({title:sprintf(wp.i18n.__("%s","elementor"),this.model.get("title")),content:sprintf(wp.i18n.__("Use %s widget and dozens more pro features to extend your toolbox and build sites faster and better.","elementor"),this.model.get("title")),targetElement:this.el,position:{blockStart:"-7"},actionButton:{url:e.action_button.url,text:e.action_button.text,classes:e.action_button.classes||["elementor-button","elementor-button-success"]}})}},e.elements.view=r.extend({childView:r.prototype.childView.extend(t)}),e.categories.view=l.extend({childView:l.prototype.childView.extend({childView:l.prototype.childView.prototype.childView.extend(t)})}),e})),e(document).ready((function(){o()})),"undefined"!=typeof elementor&&elementor.hooks.addAction("panel/open_editor/widget",(function(){setTimeout(o,300)}))}(jQuery);