!function(e,t){"use strict";var a=function(a){var i=this;i.$form=a,i.$attributeFields=a.find(".variations select"),i.variationData=a.data("product_variations"),a.off(".ep-variation-swatches"),a.find(".ep-variation-swatches__wrapper").length&&a.addClass("swatches-support"),i.getChosenAttributes=i.getChosenAttributes.bind(i),a.on("click.ep-variation-swatches",".ep-variation-swatches__item",{epVariationSwatches:i},i.onSelect),a.on("change.ep-variation-swatches",".variations select",{epVariationSwatches:i},i.onValueChange),a.on("keydown.ep-variation-swatches",".ep-variation-swatches__item",{epVariationSwatches:i},i.onKeyPress),a.on("woocommerce_update_variation_values.ep-variation-swatches",{epVariationSwatches:i},i.onUpdateAttributes),ep_variation_swatches_params.show_selected_label&&(a.on("change.ep-variation-swatches",".value select",{epVariationSwatches:i},i.updateLabel),a.on("wc_variation_form.ep-variation-swatches",{epVariationSwatches:i},i.updateAllLabels)),e(t.body).trigger("ep_variation_swatches",i)};a.prototype.onSelect=function(t){t.preventDefault();var a=e(this);if(!a.hasClass("disabled")&&!a.data("disabled")){var i=a.closest(".ep-variation-swatches").find("select"),s=a.hasClass("selected")?"":a.data("value");i.trigger("focusin"),i.val(s),i.trigger("change")}},a.prototype.onValueChange=function(){var t=e(this),a=t.closest(".ep-variation-swatches"),i=t.val();a.length&&(a.find(".ep-variation-swatches__item.selected").removeClass("selected").attr("aria-pressed",!1),i&&a.find(".ep-variation-swatches__item").filter((function(){return this.dataset.value===i})).addClass("selected").attr("aria-pressed",!0))},a.prototype.onKeyPress=function(t){(t.keyCode&&32===t.keyCode||t.key&&" "===t.key||t.keyCode&&13===t.keyCode||t.key&&"enter"===t.key.toLowerCase())&&(t.preventDefault(),e(this).trigger("click.ep-variation-swatches"))},a.prototype.onUpdateAttributes=function(t){var a=t.data.epVariationSwatches,i=a.getChosenAttributes();i.data;i.chosenCount||a.$form.find(".ep-variation-swatches__item").removeClass("selected disabled").data("disabled",!1).attr("tabindex",0),setTimeout((function(){a.$attributeFields.each((function(){var t=e(this);t.siblings(".ep-variation-swatches__wrapper").find(".ep-variation-swatches__item").each((function(){var a=e(this),i=t.find('option[value="'+a.data("value")+'"]');!i.length||i.prop("disabled")?a.addClass("disabled").removeClass("selected").data("disabled",!0).attr("tabindex",-1):a.removeClass("disabled").data("disabled",!1).attr("tabindex",0)}))}))}),10)},a.prototype.updateLabel=function(e){e.data.epVariationSwatches.appendSelectedLabel(this)},a.prototype.updateAllLabels=function(e){var t=e.data.epVariationSwatches;t.$form.find(".value select").each((function(){t.appendSelectedLabel(this)}))},a.prototype.appendSelectedLabel=function(t){var a=e(t).closest(".value").siblings(".label").find("label"),i=a.find(".ep-variation-swatches__selected-label");i.length||(i=e('<span class="ep-variation-swatches__selected-label" />'),a.append(i)),t.value?i.text(t.options[t.selectedIndex].text).show():i.text("").hide()},a.prototype.getChosenAttributes=function(){var t={},a=0,i=0;return this.$attributeFields.each((function(){var s=e(this).data("attribute_name")||e(this).attr("name"),n=e(this).val()||"";n.length>0&&i++,a++,t[s]=n})),{count:a,chosenCount:i,data:t}},e.fn.ep_variation_swatches=function(){return new a(this),this},e((function(){e(".variations_form:not(.swatches-support)").each((function(){e(this).ep_variation_swatches()}))}))}(jQuery,document);