import{dx as i,_ as o}from"./main-red-poems-invite.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,a){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,a),a)}};const c=async e=>i({headers:{Authorization:["Bearer ",{encryption:"hmac_decrypt",value:e}]},method:"GET",url:"https://rest.gohighlevel.com/v1/custom-fields/"}),r=async e=>i({headers:{Authorization:["Bearer ",{encryption:"hmac_decrypt",value:e}]},method:"GET",url:"https://rest.gohighlevel.com/v1/tags/"}),u=async e=>i({headers:{Authorization:["Bearer ",{encryption:"hmac_decrypt",value:e}]},method:"GET",queryParams:{limit:100},url:"https://rest.gohighlevel.com/v1/contacts/"});globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,a){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,a),a)}};const d=e=>{const a=[{label:o("Email"),value:"email"},{label:o("First Name"),value:"firstName"},{label:o("Last Name"),value:"lastName"},{label:o("Full Name"),value:"name"},{label:o("Phone"),value:"phone"},{label:o("Date of Birth"),value:"dateOfBirth"},{label:o("Address 1"),value:"address1"},{label:o("City"),value:"city"},{label:o("State"),value:"state"},{label:o("Country"),value:"country"},{label:o("postalCode"),value:"postalCode"},{label:o("Company Name"),value:"companyName"},{label:o("Website"),value:"website"},{label:o("DND (Do Not Disturb)"),value:"dnd"},{label:o("Source"),value:"source"}];return!("customFields"in e)||!Array.isArray(e.customFields)||e.customFields.forEach(s=>{a.push({label:s.name,value:s.id})}),a},m=async e=>{e.setComponent("field-map",t=>{t.loading=!0,e.util.isRepeaterFieldComponent(t)&&(t.labelActionLoading=!0)});const a=await e.getConnection();if(!a){e.setComponent("field-map",t=>{t.loading=!1,e.util.isRepeaterFieldComponent(t)&&(t.labelActionLoading=!1)});return}const{data:s}=await c(a.auth_details.value);e.setComponent("field-map",t=>{if(!e.util.isRepeaterFieldComponent(t))return;const l=t.fieldsMetaData[0];l.options=d(s),t.loading=!1,e.util.isRepeaterFieldComponent(t)&&(t.labelActionLoading=!1)})},g=async e=>{e.setComponent("tags",t=>{t.loading=!0});const a=await e.getConnection();if(!a){e.setComponent("tags",t=>{t.loading=!1});return}const{data:s}=await r(a.auth_details.value);if(!("tags"in s)||!Array.isArray(s.tags)){e.setComponent("tags",t=>{e.util.isSelectComponent(t)&&(t.loading=!1,t.status="error",t.invalidMessage=o("Failed to fetch tags"))});return}e.setComponent("tags",t=>{var l;e.util.isSelectComponent(t)&&(t.options=((l=s==null?void 0:s.tags)==null?void 0:l.map(n=>({label:n.name,value:n.name})))||[],t.loading=!1,t.status=void 0)})},f=async e=>{e.setComponent("contact-id",t=>{t.loading=!0});const a=await e.getConnection();if(!a){e.setComponent("contact-id",t=>{t.loading=!1});return}const{data:s}=await u(a.auth_details.value);if(!("contacts"in s)||!Array.isArray(s.contacts)){e.setComponent("contact-id",t=>{e.util.isSelectComponent(t)&&(t.loading=!1,t.status="error",t.invalidMessage=o("Failed to fetch contacts"))});return}e.setComponent("contact-id",t=>{var l;e.util.isSelectComponent(t)&&(t.options=((l=s==null?void 0:s.contacts)==null?void 0:l.map(n=>({label:n.contactName,value:n.id})))||[],t.loading=!1,t.status=void 0)})};export{m as a,f as b,g as f};
