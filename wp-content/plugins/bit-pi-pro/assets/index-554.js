import{r as t,aj as te,ak as oe,ai as re,af as ne,bP as se,ad as W,ap as ae,ar as X,X as G,a0 as ie,a4 as le,bd as ce}from"./main-red-poems-invite.js";import{r as de}from"./index-384.js";import{a as ge}from"./usebreak-848.js";import{P as ue}from"./index-836.js";const _=t.createContext({}),me=e=>{const{antCls:n,componentCls:s,iconCls:o,avatarBg:a,avatarColor:z,containerSize:S,containerSizeLG:h,containerSizeSM:v,textFontSize:m,textFontSizeLG:C,textFontSizeSM:N,borderRadius:p,borderRadiusLG:g,borderRadiusSM:O,lineWidth:R,lineType:k}=e,E=(r,u,j)=>({width:r,height:r,borderRadius:"50%",[`&${s}-square`]:{borderRadius:j},[`&${s}-icon`]:{fontSize:u,[`> ${o}`]:{margin:0}}});return{[s]:Object.assign(Object.assign(Object.assign(Object.assign({},re(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:z,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:a,border:`${ne(R)} ${k} transparent`,"&-image":{background:"transparent"},[`${n}-image-img`]:{display:"block"}}),E(S,m,p)),{"&-lg":Object.assign({},E(h,C,g)),"&-sm":Object.assign({},E(v,N,O)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},pe=e=>{const{componentCls:n,groupBorderColor:s,groupOverlapping:o,groupSpace:a}=e;return{[`${n}-group`]:{display:"inline-flex",[n]:{borderColor:s},"> *:not(:first-child)":{marginInlineStart:o}},[`${n}-group-popover`]:{[`${n} + ${n}`]:{marginInlineStart:a}}}},ve=e=>{const{controlHeight:n,controlHeightLG:s,controlHeightSM:o,fontSize:a,fontSizeLG:z,fontSizeXL:S,fontSizeHeading3:h,marginXS:v,marginXXS:m,colorBorderBg:C}=e;return{containerSize:n,containerSizeLG:s,containerSizeSM:o,textFontSize:Math.round((z+S)/2),textFontSizeLG:h,textFontSizeSM:a,groupSpace:m,groupOverlapping:-v,groupBorderColor:C}},q=te("Avatar",e=>{const{colorTextLightSolid:n,colorTextPlaceholder:s}=e,o=oe(e,{avatarBg:s,avatarColor:n});return[me(o),pe(o)]},ve);var fe=function(e,n){var s={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(s[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)n.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(s[o[a]]=e[o[a]]);return s};const Se=(e,n)=>{const[s,o]=t.useState(1),[a,z]=t.useState(!1),[S,h]=t.useState(!0),v=t.useRef(null),m=t.useRef(null),C=se(n,v),{getPrefixCls:N,avatar:p}=t.useContext(W),g=t.useContext(_),O=()=>{if(!m.current||!v.current)return;const i=m.current.offsetWidth,l=v.current.offsetWidth;if(i!==0&&l!==0){const{gap:f=4}=e;f*2<l&&o(l-f*2<i?(l-f*2)/i:1)}};t.useEffect(()=>{z(!0)},[]),t.useEffect(()=>{h(!0),o(1)},[e.src]),t.useEffect(O,[e.gap]);const R=()=>{const{onError:i}=e;(i==null?void 0:i())!==!1&&h(!1)},{prefixCls:k,shape:E,size:r,src:u,srcSet:j,icon:b,className:I,rootClassName:L,alt:B,draggable:A,children:x,crossOrigin:$}=e,y=fe(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),c=ae(i=>{var l,f;return(f=(l=r??(g==null?void 0:g.size))!==null&&l!==void 0?l:i)!==null&&f!==void 0?f:"default"}),w=Object.keys(typeof c=="object"?c||{}:{}).some(i=>["xs","sm","md","lg","xl","xxl"].includes(i)),M=ge(w),F=t.useMemo(()=>{if(typeof c!="object")return{};const i=de.find(f=>M[f]),l=c[i];return l?{width:l,height:l,fontSize:l&&(b||x)?l/2:18}:{}},[M,c]),d=N("avatar",k),T=X(d),[J,K,Q]=q(d,T),U=G({[`${d}-lg`]:c==="large",[`${d}-sm`]:c==="small"}),H=t.isValidElement(u),Y=E||(g==null?void 0:g.shape)||"circle",Z=G(d,U,p==null?void 0:p.className,`${d}-${Y}`,{[`${d}-image`]:H||u&&S,[`${d}-icon`]:!!b},Q,T,I,L,K),ee=typeof c=="number"?{width:c,height:c,fontSize:b?c/2:18}:{};let P;if(typeof u=="string"&&S)P=t.createElement("img",{src:u,draggable:A,srcSet:j,onError:R,alt:B,crossOrigin:$});else if(H)P=u;else if(b)P=b;else if(a||s!==1){const i=`scale(${s})`,l={msTransform:i,WebkitTransform:i,transform:i};P=t.createElement(ie,{onResize:O},t.createElement("span",{className:`${d}-string`,ref:m,style:Object.assign({},l)},x))}else P=t.createElement("span",{className:`${d}-string`,style:{opacity:0},ref:m},x);return delete y.onError,delete y.gap,J(t.createElement("span",Object.assign({},y,{style:Object.assign(Object.assign(Object.assign(Object.assign({},ee),F),p==null?void 0:p.style),y.style),className:Z,ref:C}),P))},D=t.forwardRef(Se),V=e=>{const{size:n,shape:s}=t.useContext(_),o=t.useMemo(()=>({size:e.size||n,shape:e.shape||s}),[e.size,e.shape,n,s]);return t.createElement(_.Provider,{value:o},e.children)},he=e=>{var n,s,o,a;const{getPrefixCls:z,direction:S}=t.useContext(W),{prefixCls:h,className:v,rootClassName:m,style:C,maxCount:N,maxStyle:p,size:g,shape:O,maxPopoverPlacement:R,maxPopoverTrigger:k,children:E,max:r}=e,u=z("avatar",h),j=`${u}-group`,b=X(u),[I,L,B]=q(u,b),A=G(j,{[`${j}-rtl`]:S==="rtl"},B,b,v,m,L),x=le(E).map((c,w)=>ce(c,{key:`avatar-key-${w}`})),$=(r==null?void 0:r.count)||N,y=x.length;if($&&$<y){const c=x.slice(0,$),w=x.slice($,y),M=(r==null?void 0:r.style)||p,F=((n=r==null?void 0:r.popover)===null||n===void 0?void 0:n.trigger)||k||"hover",d=((s=r==null?void 0:r.popover)===null||s===void 0?void 0:s.placement)||R||"top",T=Object.assign(Object.assign({content:w},r==null?void 0:r.popover),{classNames:{root:G(`${j}-popover`,(a=(o=r==null?void 0:r.popover)===null||o===void 0?void 0:o.classNames)===null||a===void 0?void 0:a.root)},placement:d,trigger:F});return c.push(t.createElement(ue,Object.assign({key:"avatar-popover-key",destroyTooltipOnHide:!0},T),t.createElement(D,{style:M},`+${y-$}`))),I(t.createElement(V,{shape:O,size:g},t.createElement("div",{className:A,style:C},c)))}return I(t.createElement(V,{shape:O,size:g},t.createElement("div",{className:A,style:C},x)))},Ce=D;Ce.Group=he;export{Ce as A};
