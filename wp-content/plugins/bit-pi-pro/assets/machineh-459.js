import{dx as c}from"./main-red-poems-invite.js";import{n as r,a as u}from"./openaico-17.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,n){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,n),n)}};const d=async t=>c({headers:{Authorization:["Bearer ",{encryption:"hmac_decrypt",value:t}]},method:"GET",url:"https://api.openai.com/v1/models"}),h=async t=>c({headers:{Authorization:["Bearer ",{encryption:"hmac_decrypt",value:t}]},method:"GET",url:"https://api.openai.com/v1/batches"});globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,n){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,n),n)}};const f=async t=>{t.setComponent("model",o=>{o.loading=!0}),t.setComponent("model-id",o=>{o.loading=!0}),t.setComponent("structured-model",o=>{o.loading=!0});const n=await t.getConnection();if(n)try{const{data:o,status:a}=await d(n.auth_details.value);if(a!=="success")throw new Error("Invalid response format");const s=o.data.map(e=>({label:`${e.id}`,value:e.id})),i=s==null?void 0:s.filter(e=>!r.includes(e.value)),l=s==null?void 0:s.filter(e=>!u.includes(e.value));t.setComponent("model",e=>{t.util.isSelectComponent(e)&&(e.options=s,e.loading=!1)}),t.setComponent("model-id",e=>{t.util.isSelectComponent(e)&&(e.options=i,e.loading=!1)}),t.setComponent("structured-model",e=>{t.util.isSelectComponent(e)&&(e.options=l,e.loading=!1)})}catch(o){t.setComponent("model",a=>{t.util.isSelectComponent(a)&&(a.loading=!1,a.status="error",a.invalidMessage=o.message)})}},g=async t=>{t.setComponent("batch-id",o=>{o.loading=!0});const n=await t.getConnection();if(n)try{const{data:o,status:a}=await h(n.auth_details.value);if(a!=="success")throw new Error("Invalid response format");t.setComponent("batch-id",s=>{t.util.isSelectComponent(s)&&(s.options=o.data.map(i=>({label:`${i.id}`,value:i.id})),s.loading=!1)})}catch(o){t.setComponent("batch-id",a=>{t.util.isSelectComponent(a)&&(a.loading=!1,a.status="error",a.invalidMessage=o.message)})}};export{f as a,g as f};
