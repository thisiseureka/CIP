import{a3 as s,a4 as m}from"./_applist-952.js";import{_ as o}from"./main-red-poems-invite.js";import{s as c}from"./machine.-578.js";import{h as r,a as n,c as E}from"./brevocom-225.js";import{f as l}from"./machineh-362.js";import"./lodash-840.js";import"./mutative-12.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const u=s(({helpers:t})=>({states:{components:[E(t),{componentName:t.componentName.select,fieldType:"config",id:"list-id",label:o("Contact list"),onChange:"SELECT_LIST",onRefetch:"REFETCH_CONTACT_LIST",optionFilterProp:"label",options:[],placeholder:o("Select a list"),render:"IF_CONNECTION_SELECTED",showSearch:!0,value:void 0},{addItemButtonLabel:"Add Email",componentName:t.componentName.repeaterField,fieldsMetaData:[{componentName:t.componentName.input,label:o("Email"),name:"email",required:!0,value:void 0,wrapperClassName:"w-100"}],helperText:o("Emails to add to a list. You can pass a maximum of 150 emails for addition in one request."),id:"email-list",inputGroupProps:{label:o("Email #{COUNT}")},label:o("Emails"),loading:!1,onChange:"ON_EMAIL_FIELD_CHANGE",render:"IF_CONNECTION_SELECTED",value:[]},{componentName:t.componentName.select,fieldType:"config",helperText:o("Choose either yes or no here. Yes, to remove all existing contacts from a list."),id:"remove-all",label:o("Remove All?"),onChange:"SET_REMOVE_ALL",options:[{label:o("Yes"),value:"true"},{label:o("No"),value:"false"}],path:"all",placeholder:o("Select to Remove All"),render:"IF_CONNECTION_SELECTED",required:!0,value:"false"}]},actions:{SET_CONNECTION:async({$:e,e:a})=>{e.setThisComponent(i=>{i.value=a}),e.setDb(i=>{i.connectionId=a}),await l(e)},IF_CONNECTION_SELECTED:({$:e})=>{var a;return m((a=e.getComponent("connection-id"))==null?void 0:a.value)},SELECT_LIST:async({$:e,e:a})=>{e.setThisComponent(i=>{i.value=a}),e.setDb(i=>{i.listId=a})},REFETCH_CONTACT_LIST:async({$:e})=>{await l(e)},SET_EMAIL:n("email"),SET_REMOVE_ALL:n("removeAll"),ON_EMAIL_FIELD_CHANGE:n("emails"),CONNECTION_ADD_CHANGE:r,ON_MACHINE_LOAD:async({$:e})=>{var a;c(e,[{db:"connectionId",id:"connection-id"},{db:"emails",id:"email-id"},{db:"listId",id:"list-id"},{db:"removeAll",id:"remove-all"}]),(a=e.db)!=null&&a.connectionId&&await l(e)}}}));export{u as default};
