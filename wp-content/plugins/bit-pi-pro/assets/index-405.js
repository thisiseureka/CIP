import{u as G,q as S,g as I,r as k,N as R,j as e,a as n,cI as K,_ as l,cJ as z,aQ as F,ae as B,cK as D,y as P}from"./main-red-poems-invite.js";import{u as O}from"./usedebou-214.js";import{I as E}from"./index-383.js";import{R as u,e as g,P as p,T as Q}from"./index-384.js";import{a as U}from"./index.es-493.js";import{C as o}from"./col-740.js";import{S as L}from"./index-747.js";import{C as J,T as H}from"./index-866.js";import"./lodash-840.js";import"./searchou-927.js";import"./mutative-12.js";import"./skeleton-352.js";import"./index-35.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,a){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,a),a)}};function V(){return G({queryFn:()=>S("global-settings",void 0,void 0,"GET"),queryKey:["global-settings"],select:t=>t.data})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,a){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,a),a)}};function W(){return I({mutationFn:t=>S("global-settings/update",t),mutationKey:["update-global-settings"]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,a){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,a),a)}};function X(){var C,_,T,w,N,j,x,A,M;const{data:t,isLoading:a}=V(),{error:s,isPending:f,mutateAsync:y}=W(),[i,m]=U(t),{messageApi:r}=k.useContext(R),q=O(async c=>{await y(c),r==null||r.success(l("Settings updated successfully"))},500),b=async(c,h)=>{m(d=>{d&&(d[c]=h)}),await y({[c]:h}),r==null||r.success(l("Settings updated successfully"))},v=(c,h)=>{m(d=>{d&&(d[c]=h)}),q({[c]:h})};return k.useEffect(()=>{t&&m(t)},[t,m]),e(u,{children:e(o,{lg:{span:16},children:n(J,{className:"bg-transparent",children:[n(u,{gutter:20,justify:"space-between",children:[e(o,{span:16,children:n("div",{className:"flex items-start gap-3",children:[e(K,{className:"mt-0.5 shrink-0 text-slate-500",size:20}),n("div",{children:[e(g,{level:5,style:{marginBottom:0},children:l("Notification of Failed Tasks")}),e(p,{type:"secondary",children:l("To receive notification of failed task, this email will be used.")})]})]})}),e(o,{span:8,children:e(L,{checked:i==null?void 0:i.notify_user,disabled:a||f,loading:a,onChange:c=>b("notify_user",c)})})]}),(i==null?void 0:i.notify_user)&&n(u,{className:"mt-2",gutter:20,justify:"space-between",children:[e(o,{span:16,children:n("div",{className:"flex items-start gap-3",children:[e("span",{className:"w-6"}),n("div",{children:[e(g,{level:5,style:{marginBottom:0},children:l("Notification Email")}),e(p,{type:"secondary",children:l("To receive notification of failed task, this email will be used.")})]})]})}),e(o,{span:8,children:e(E,{disabled:a,invalidMessage:(_=(C=s==null?void 0:s.data)==null?void 0:C.notification_email)==null?void 0:_[0],onChange:c=>v("notification_email",c.target.value),status:((T=s==null?void 0:s.data)==null?void 0:T.notification_email)&&"error",type:"email",value:i==null?void 0:i.notification_email})})]}),n(u,{className:"mt-2",gutter:20,justify:"space-between",children:[e(o,{span:16,children:n("div",{className:"flex items-start gap-3",children:[e(z,{className:"mt-0.5 shrink-0 text-slate-500",size:20}),n("div",{children:[e(g,{level:5,style:{marginBottom:0},children:l("Preserve Flow Logs")}),e(p,{type:"secondary",children:l("Enter the number of days to retain task logs. For example, entering 30 will remove task history older than 30 days.")})]})]})}),e(o,{span:8,children:e(E,{addonAfter:l("days"),disabled:a,invalidMessage:(N=(w=s==null?void 0:s.data)==null?void 0:w.preserve_logs)==null?void 0:N[0],min:0,onChange:c=>v("preserve_logs",c.target.valueAsNumber),status:((j=s==null?void 0:s.data)==null?void 0:j.preserve_logs)&&"error",type:"number",value:i==null?void 0:i.preserve_logs})})]}),n(u,{className:F("mt-2",!1),gutter:20,justify:"space-between",children:[e(B,{title:!1,children:e(o,{span:16,children:n("div",{className:"flex items-start gap-3",children:[e(D,{className:"mt-0.5 shrink-0 text-slate-500",size:20}),n("div",{children:[n("div",{className:"flex gap-2",children:[e(g,{className:F("mb-0",!1),level:5,children:l("Cloud based cron runner")}),!1]}),e(p,{type:"secondary",children:l("Enable this option to trigger cron jobs from the cloud, ensuring they run more accurately.")})]})]})})}),n(o,{span:8,children:[e(L,{disabled:!P.IS_PRO||a||f,loading:P.IS_PRO&&a,onChange:c=>b("use_cloud_cron",c),value:i==null?void 0:i.use_cloud_cron}),((x=s==null?void 0:s.data)==null?void 0:x.use_cloud_cron)&&e(Q.Text,{className:"inline-block",type:"danger",children:(M=(A=s==null?void 0:s.data)==null?void 0:A.use_cloud_cron)==null?void 0:M[0]})]})]})]})})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,a){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,a),a)}};const Y=[{children:e(X,{}),key:"1",label:l("Flow Settings")}];function de(){return e("div",{className:"p-6",children:e(H,{defaultActiveKey:"1",items:Y,tabPosition:"top"})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,a){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,a),a)}};export{de as default};
