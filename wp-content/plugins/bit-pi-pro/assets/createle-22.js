import{a3 as s}from"./_applist-952.js";import{_ as a}from"./main-red-poems-invite.js";import{s as r}from"./machine.-578.js";import"./lodash-840.js";import"./mutative-12.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(o,n){return this.cache.has(o)?this.cache.get(o):(this.cache.set(o,n),n)}};const h=s(({helpers:o})=>({states:{components:[{addConnectionHelpingText:a("You can get your API key from your OneHash My Settings > Settings > API Access"),componentName:o.componentName.connection,connectionsTypes:[{encryptKeys:["value"],label:a("API Key"),type:"api_key",verifyConnection:{headers:{Authorization:"","Content-Type":"application/json"},method:"GET",responseKeyMatch:["data"],url:""}}],extraComponents:[{componentName:o.componentName.input,id:"domain",label:a("Domain"),onChange:"SET_DOMAIN",placeholder:a("Enter Domain"),render:!0,required:!0,value:void 0,wrapperClassName:"mb-2"}],extraData:{},fieldType:"config",id:"connection-id",label:a("Select Connection"),onConnectionAddChange:"CONNECTION_ADD_CHANGE",onConnectionChange:"SET_CONNECTION",render:!0,value:void 0}]},actions:{ON_MACHINE_LOAD:({$:n})=>{r(n,[{db:"connectionId",id:"connection-id"}])},CONNECTION_ADD_CHANGE:({$:n,e:t})=>{n.setThisComponent(e=>{var i,c;n.util.isConnectionComponent(e)&&(c=(i=e.connectionsTypes[0])==null?void 0:i.verifyConnection)!=null&&c.headers&&(e.connectionsTypes[0].verifyConnection.headers.Authorization=`token ${t.key}:${t.value}`)})},SET_DOMAIN:({$:n,e:t})=>{n.setThisComponent(e=>{n.util.isInputComponent(e)&&(e.value=t.target.value,e.status=void 0)}),n.setComponent("connection-id",e=>{var i;n.util.isConnectionComponent(e)&&((i=e.connectionsTypes[0])!=null&&i.verifyConnection&&(e.connectionsTypes[0].verifyConnection.url=`https://${t.target.value}.onehash.is/api/resource/Lead`),e.extraData||(e.extraData={}),e.extraData.domain=t.target.value)})}}}));export{h as default};
