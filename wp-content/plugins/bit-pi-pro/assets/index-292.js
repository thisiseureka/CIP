var Cu=Object.defineProperty;var Su=(n,e,t)=>e in n?Cu(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var X=(n,e,t)=>Su(n,typeof e!="symbol"?e+"":e,t);import{r as C,I as Eu,b as Vt,K as Fe,J as F,X as Ee,Y as Oe,Z as dt,P as rn,bC as Cl,bD as Sl,ab as Or,bE as El,bF as Bs,bG as xu,bH as xl,bI as wu,bJ as qt,bK as wl,bL as Nl,bM as zi,M as Hs,bN as Nu,G as bn,$ as Ws,W as Al,bO as xi,bP as Tl,am as Vi,aj as Ca,ak as Sa,bQ as Ol,ai as qs,af as be,bl as Au,ad as Ea,ar as _l,bv as Ll,bR as Il,ap as Rl,bS as xa,bh as Gi,bT as Tu,bU as wa,bV as xs,bW as wi,ac as lt,O as Ou,a3 as wt,Q as _u,ae as Lu,bX as $l,bY as nn,bZ as Ms,b_ as Iu,bz as ql,a9 as Ru,au as Dn,g as jn,q as En,N as xn,a as fe,F as os,j as L,B as ze,_ as B,L as Ml,b9 as $u,y as $n,S as vn,i as Xs,bw as kl,u as qu,b$ as Mu,c0 as Dl,n as jl,aS as ku,x as mn,c1 as Ln,aN as Pl,t as Bl,bx as Na,aR as Hl,aO as Du}from"./main-red-poems-invite.js";import{S as ju,I as Pu,e as Bu,r as Aa,h as Hu,i as Fu,m as Uu,j as zu,R as Ni}from"./import-208.js";import{c as wn}from"./mutative-12.js";import{c as Vu}from"./react-451.js";import{I as Mt}from"./index-383.js";import{P as Zs}from"./pro-feat-184.js";import{I as Fl,a as Ys}from"./index.es-493.js";import{M as Qs,g as Gu}from"./exporthe-973.js";import{F as on,C as Ku,D as Ta}from"./index-573.js";import{A as Oa}from"./index-554.js";import{B as Wu,t as Xu,h as Zu,g as Yu,j as Ul,n as Qu,o as Ju,p as eh,q as th,u as nh,v as rh,w as sh,x as ih,y as Ki,z as ah,T as Kt}from"./index-384.js";import{R as oh,S as lh,g as ch,E as zl}from"./index-630.js";import{P as uh}from"./index-836.js";import{D as hh,P as Vl,S as dh}from"./index-924.js";import{S as Fs}from"./index-747.js";import{T as Gl}from"./index-567.js";import{R as _a,C as fh}from"./index-887.js";import{u as gh}from"./useconne-36.js";import{S as Us}from"./index-469.js";import{u as ph}from"./utilscss-272.js";import"./_applist-952.js";import"./lodash-840.js";import"./index-866.js";import"./skeleton-352.js";import"./index-35.js";import"./usebreak-848.js";import"./searchou-927.js";import"./context-230.js";import"./oauthhel-944.js";var mh={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},bh=function(e,t){return C.createElement(Eu,Vt({},e,{ref:t,icon:mh}))},vh=C.forwardRef(bh);function yh(n){var e="touches"in n?n.touches[0]:n,t=document.documentElement.scrollLeft||document.body.scrollLeft||window.pageXOffset,r=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset;return{pageX:e.pageX-t,pageY:e.pageY-r}}function Kl(n){var e=n.targetRef,t=n.containerRef,r=n.direction,s=n.onDragChange,i=n.onDragChangeComplete,a=n.calculate,o=n.color,c=n.disabledDrag,u=C.useState({x:0,y:0}),h=Fe(u,2),p=h[0],d=h[1],f=C.useRef(null),m=C.useRef(null);C.useEffect(function(){d(a())},[o]),C.useEffect(function(){return function(){document.removeEventListener("mousemove",f.current),document.removeEventListener("mouseup",m.current),document.removeEventListener("touchmove",f.current),document.removeEventListener("touchend",m.current),f.current=null,m.current=null}},[]);var b=function(T){var _=yh(T),P=_.pageX,R=_.pageY,K=t.current.getBoundingClientRect(),U=K.x,z=K.y,v=K.width,O=K.height,w=e.current.getBoundingClientRect(),A=w.width,$=w.height,I=A/2,M=$/2,j=Math.max(0,Math.min(P-U,v))-I,D=Math.max(0,Math.min(R-z,O))-M,H={x:j,y:r==="x"?p.y:D};if(A===0&&$===0||A!==$)return!1;s==null||s(H)},y=function(T){T.preventDefault(),b(T)},E=function(T){T.preventDefault(),document.removeEventListener("mousemove",f.current),document.removeEventListener("mouseup",m.current),document.removeEventListener("touchmove",f.current),document.removeEventListener("touchend",m.current),f.current=null,m.current=null,i==null||i()},S=function(T){document.removeEventListener("mousemove",f.current),document.removeEventListener("mouseup",m.current),!c&&(b(T),document.addEventListener("mousemove",y),document.addEventListener("mouseup",E),document.addEventListener("touchmove",y),document.addEventListener("touchend",E),f.current=y,m.current=E)};return[p,S]}var Wl=function(e){var t=e.size,r=t===void 0?"default":t,s=e.color,i=e.prefixCls;return F.createElement("div",{className:Ee("".concat(i,"-handler"),Oe({},"".concat(i,"-handler-sm"),r==="small")),style:{backgroundColor:s}})},Xl=function(e){var t=e.children,r=e.style,s=e.prefixCls;return F.createElement("div",{className:"".concat(s,"-palette"),style:dt({position:"relative"},r)},t)},Zl=C.forwardRef(function(n,e){var t=n.children,r=n.x,s=n.y;return F.createElement("div",{ref:e,style:{position:"absolute",left:"".concat(r,"%"),top:"".concat(s,"%"),zIndex:1,transform:"translate(-50%, -50%)"}},t)}),Ch=function(e){var t=e.color,r=e.onChange,s=e.prefixCls,i=e.onChangeComplete,a=e.disabled,o=C.useRef(),c=C.useRef(),u=C.useRef(t),h=rn(function(b){var y=Cl({offset:b,targetRef:c,containerRef:o,color:t});u.current=y,r(y)}),p=Kl({color:t,containerRef:o,targetRef:c,calculate:function(){return Sl(t)},onDragChange:h,onDragChangeComplete:function(){return i==null?void 0:i(u.current)},disabledDrag:a}),d=Fe(p,2),f=d[0],m=d[1];return F.createElement("div",{ref:o,className:"".concat(s,"-select"),onMouseDown:m,onTouchStart:m},F.createElement(Xl,{prefixCls:s},F.createElement(Zl,{x:f.x,y:f.y,ref:c},F.createElement(Wl,{color:t.toRgbString(),prefixCls:s})),F.createElement("div",{className:"".concat(s,"-saturation"),style:{backgroundColor:"hsl(".concat(t.toHsb().h,",100%, 50%)"),backgroundImage:"linear-gradient(0deg, #000, transparent),linear-gradient(90deg, #fff, hsla(0, 0%, 100%, 0))"}})))},Sh=function(e,t){var r=Or(e,{value:t}),s=Fe(r,2),i=s[0],a=s[1],o=C.useMemo(function(){return El(i)},[i]);return[o,a]},Eh=function(e){var t=e.colors,r=e.children,s=e.direction,i=s===void 0?"to right":s,a=e.type,o=e.prefixCls,c=C.useMemo(function(){return t.map(function(u,h){var p=El(u);return a==="alpha"&&h===t.length-1&&(p=new Bs(p.setA(1))),p.toRgbString()}).join(",")},[t,a]);return F.createElement("div",{className:"".concat(o,"-gradient"),style:{position:"absolute",inset:0,background:"linear-gradient(".concat(i,", ").concat(c,")")}},r)},xh=function(e){var t=e.prefixCls,r=e.colors,s=e.disabled,i=e.onChange,a=e.onChangeComplete,o=e.color,c=e.type,u=C.useRef(),h=C.useRef(),p=C.useRef(o),d=function(_){return c==="hue"?_.getHue():_.a*100},f=rn(function(T){var _=Cl({offset:T,targetRef:h,containerRef:u,color:o,type:c});p.current=_,i(d(_))}),m=Kl({color:o,targetRef:h,containerRef:u,calculate:function(){return Sl(o,c)},onDragChange:f,onDragChangeComplete:function(){a(d(p.current))},direction:"x",disabledDrag:s}),b=Fe(m,2),y=b[0],E=b[1],S=F.useMemo(function(){if(c==="hue"){var T=o.toHsb();T.s=1,T.b=1,T.a=1;var _=new Bs(T);return _}return o},[o,c]),N=F.useMemo(function(){return r.map(function(T){return"".concat(T.color," ").concat(T.percent,"%")})},[r]);return F.createElement("div",{ref:u,className:Ee("".concat(t,"-slider"),"".concat(t,"-slider-").concat(c)),onMouseDown:E,onTouchStart:E},F.createElement(Xl,{prefixCls:t},F.createElement(Zl,{x:y.x,y:y.y,ref:h},F.createElement(Wl,{size:"small",color:S.toHexString(),prefixCls:t})),F.createElement(Eh,{colors:N,type:c,prefixCls:t})))};function wh(n){return C.useMemo(function(){var e=n||{},t=e.slider;return[t||xh]},[n])}var Nh=[{color:"rgb(255, 0, 0)",percent:0},{color:"rgb(255, 255, 0)",percent:17},{color:"rgb(0, 255, 0)",percent:33},{color:"rgb(0, 255, 255)",percent:50},{color:"rgb(0, 0, 255)",percent:67},{color:"rgb(255, 0, 255)",percent:83},{color:"rgb(255, 0, 0)",percent:100}],Ah=C.forwardRef(function(n,e){var t=n.value,r=n.defaultValue,s=n.prefixCls,i=s===void 0?xu:s,a=n.onChange,o=n.onChangeComplete,c=n.className,u=n.style,h=n.panelRender,p=n.disabledAlpha,d=p===void 0?!1:p,f=n.disabled,m=f===void 0?!1:f,b=n.components,y=wh(b),E=Fe(y,1),S=E[0],N=Sh(r||wu,t),T=Fe(N,2),_=T[0],P=T[1],R=C.useMemo(function(){return _.setA(1).toRgbString()},[_]),K=function(D,H){t||P(D),a==null||a(D,H)},U=function(D){return new Bs(_.setHue(D))},z=function(D){return new Bs(_.setA(D/100))},v=function(D){K(U(D),{type:"hue",value:D})},O=function(D){K(z(D),{type:"alpha",value:D})},w=function(D){o&&o(U(D))},A=function(D){o&&o(z(D))},$=Ee("".concat(i,"-panel"),c,Oe({},"".concat(i,"-panel-disabled"),m)),I={prefixCls:i,disabled:m,color:_},M=F.createElement(F.Fragment,null,F.createElement(Ch,Vt({onChange:K},I,{onChangeComplete:o})),F.createElement("div",{className:"".concat(i,"-slider-container")},F.createElement("div",{className:Ee("".concat(i,"-slider-group"),Oe({},"".concat(i,"-slider-group-disabled-alpha"),d))},F.createElement(S,Vt({},I,{type:"hue",colors:Nh,min:0,max:359,value:_.getHue(),onChange:v,onChangeComplete:w})),!d&&F.createElement(S,Vt({},I,{type:"alpha",colors:[{percent:0,color:"rgba(255, 0, 4, 0)"},{percent:100,color:R}],min:0,max:100,value:_.a*100,onChange:O,onChangeComplete:A}))),F.createElement(xl,{color:_.toRgbString(),prefixCls:i})));return F.createElement("div",{className:$,style:u,ref:e},typeof h=="function"?h(M):M)});const Yl=F.createContext({}),Ql=F.createContext({}),Jl=n=>{let{prefixCls:e,value:t,onChange:r}=n;const s=()=>{if(r&&t&&!t.cleared){const i=t.toHsb();i.a=0;const a=qt(i);a.cleared=!0,r(a)}};return F.createElement("div",{className:`${e}-clear`,onClick:s})};var qn;(function(n){n.hex="hex",n.rgb="rgb",n.hsb="hsb"})(qn||(qn={}));function Wi(){return typeof BigInt=="function"}function ec(n){return!n&&n!==0&&!Number.isNaN(n)||!String(n).trim()}function Yn(n){var e=n.trim(),t=e.startsWith("-");t&&(e=e.slice(1)),e=e.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),e.startsWith(".")&&(e="0".concat(e));var r=e||"0",s=r.split("."),i=s[0]||"0",a=s[1]||"0";i==="0"&&a==="0"&&(t=!1);var o=t?"-":"";return{negative:t,negativeStr:o,trimStr:r,integerStr:i,decimalStr:a,fullStr:"".concat(o).concat(r)}}function La(n){var e=String(n);return!Number.isNaN(Number(e))&&e.includes("e")}function Zn(n){var e=String(n);if(La(n)){var t=Number(e.slice(e.indexOf("e-")+2)),r=e.match(/\.(\d+)/);return r!=null&&r[1]&&(t+=r[1].length),t}return e.includes(".")&&Ia(e)?e.length-e.indexOf(".")-1:0}function Js(n){var e=String(n);if(La(n)){if(n>Number.MAX_SAFE_INTEGER)return String(Wi()?BigInt(n).toString():Number.MAX_SAFE_INTEGER);if(n<Number.MIN_SAFE_INTEGER)return String(Wi()?BigInt(n).toString():Number.MIN_SAFE_INTEGER);e=n.toFixed(Zn(e))}return Yn(e).fullStr}function Ia(n){return typeof n=="number"?!Number.isNaN(n):n?/^\s*-?\d+(\.\d+)?\s*$/.test(n)||/^\s*-?\d+\.\s*$/.test(n)||/^\s*-?\.\d+\s*$/.test(n):!1}var Th=function(){function n(e){if(Nl(this,n),Oe(this,"origin",""),Oe(this,"negative",void 0),Oe(this,"integer",void 0),Oe(this,"decimal",void 0),Oe(this,"decimalLen",void 0),Oe(this,"empty",void 0),Oe(this,"nan",void 0),ec(e)){this.empty=!0;return}if(this.origin=String(e),e==="-"||Number.isNaN(e)){this.nan=!0;return}var t=e;if(La(t)&&(t=Number(t)),t=typeof t=="string"?t:Js(t),Ia(t)){var r=Yn(t);this.negative=r.negative;var s=r.trimStr.split(".");this.integer=BigInt(s[0]);var i=s[1]||"0";this.decimal=BigInt(i),this.decimalLen=i.length}else this.nan=!0}return wl(n,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(t){var r="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(t,"0"));return BigInt(r)}},{key:"negate",value:function(){var t=new n(this.toString());return t.negative=!t.negative,t}},{key:"cal",value:function(t,r,s){var i=Math.max(this.getDecimalStr().length,t.getDecimalStr().length),a=this.alignDecimal(i),o=t.alignDecimal(i),c=r(a,o).toString(),u=s(i),h=Yn(c),p=h.negativeStr,d=h.trimStr,f="".concat(p).concat(d.padStart(u+1,"0"));return new n("".concat(f.slice(0,-u),".").concat(f.slice(-u)))}},{key:"add",value:function(t){if(this.isInvalidate())return new n(t);var r=new n(t);return r.isInvalidate()?this:this.cal(r,function(s,i){return s+i},function(s){return s})}},{key:"multi",value:function(t){var r=new n(t);return this.isInvalidate()||r.isInvalidate()?new n(NaN):this.cal(r,function(s,i){return s*i},function(s){return s*2})}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(t){return this.toString()===(t==null?void 0:t.toString())}},{key:"lessEquals",value:function(t){return this.add(t.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t?this.isInvalidate()?"":Yn("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),n}(),Oh=function(){function n(e){if(Nl(this,n),Oe(this,"origin",""),Oe(this,"number",void 0),Oe(this,"empty",void 0),ec(e)){this.empty=!0;return}this.origin=String(e),this.number=Number(e)}return wl(n,[{key:"negate",value:function(){return new n(-this.toNumber())}},{key:"add",value:function(t){if(this.isInvalidate())return new n(t);var r=Number(t);if(Number.isNaN(r))return this;var s=this.number+r;if(s>Number.MAX_SAFE_INTEGER)return new n(Number.MAX_SAFE_INTEGER);if(s<Number.MIN_SAFE_INTEGER)return new n(Number.MIN_SAFE_INTEGER);var i=Math.max(Zn(this.number),Zn(r));return new n(s.toFixed(i))}},{key:"multi",value:function(t){var r=Number(t);if(this.isInvalidate()||Number.isNaN(r))return new n(NaN);var s=this.number*r;if(s>Number.MAX_SAFE_INTEGER)return new n(Number.MAX_SAFE_INTEGER);if(s<Number.MIN_SAFE_INTEGER)return new n(Number.MIN_SAFE_INTEGER);var i=Math.max(Zn(this.number),Zn(r));return new n(s.toFixed(i))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(t){return this.toNumber()===(t==null?void 0:t.toNumber())}},{key:"lessEquals",value:function(t){return this.add(t.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t?this.isInvalidate()?"":Js(this.number):this.origin}}]),n}();function Ht(n){return Wi()?new Th(n):new Oh(n)}function ks(n,e,t){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(n==="")return"";var s=Yn(n),i=s.negativeStr,a=s.integerStr,o=s.decimalStr,c="".concat(e).concat(o),u="".concat(i).concat(a);if(t>=0){var h=Number(o[t]);if(h>=5&&!r){var p=Ht(n).add("".concat(i,"0.").concat("0".repeat(t)).concat(10-h));return ks(p.toString(),e,t,r)}return t===0?u:"".concat(u).concat(e).concat(o.padEnd(t,"0").slice(0,t))}return c===".0"?u:"".concat(u).concat(c)}function _h(n,e){return typeof Proxy<"u"&&n?new Proxy(n,{get:function(r,s){if(e[s])return e[s];var i=r[s];return typeof i=="function"?i.bind(r):i}}):n}function Lh(n,e){var t=C.useRef(null);function r(){try{var i=n.selectionStart,a=n.selectionEnd,o=n.value,c=o.substring(0,i),u=o.substring(a);t.current={start:i,end:a,value:o,beforeTxt:c,afterTxt:u}}catch{}}function s(){if(n&&t.current&&e)try{var i=n.value,a=t.current,o=a.beforeTxt,c=a.afterTxt,u=a.start,h=i.length;if(i.startsWith(o))h=o.length;else if(i.endsWith(c))h=i.length-t.current.afterTxt.length;else{var p=o[u-1],d=i.indexOf(p,u-1);d!==-1&&(h=d+1)}n.setSelectionRange(h,h)}catch(f){zi(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(f.message))}}return[r,s]}var Ih=function(){var e=C.useState(!1),t=Fe(e,2),r=t[0],s=t[1];return Hs(function(){s(Nu())},[]),r},Rh=200,$h=600;function qh(n){var e=n.prefixCls,t=n.upNode,r=n.downNode,s=n.upDisabled,i=n.downDisabled,a=n.onStep,o=C.useRef(),c=C.useRef([]),u=C.useRef();u.current=a;var h=function(){clearTimeout(o.current)},p=function(N,T){N.preventDefault(),h(),u.current(T);function _(){u.current(T),o.current=setTimeout(_,Rh)}o.current=setTimeout(_,$h)};C.useEffect(function(){return function(){h(),c.current.forEach(function(S){return bn.cancel(S)})}},[]);var d=Ih();if(d)return null;var f="".concat(e,"-handler"),m=Ee(f,"".concat(f,"-up"),Oe({},"".concat(f,"-up-disabled"),s)),b=Ee(f,"".concat(f,"-down"),Oe({},"".concat(f,"-down-disabled"),i)),y=function(){return c.current.push(bn(h))},E={unselectable:"on",role:"button",onMouseUp:y,onMouseLeave:y};return C.createElement("div",{className:"".concat(f,"-wrap")},C.createElement("span",Vt({},E,{onMouseDown:function(N){p(N,!0)},"aria-label":"Increase Value","aria-disabled":s,className:m}),t||C.createElement("span",{unselectable:"on",className:"".concat(e,"-handler-up-inner")})),C.createElement("span",Vt({},E,{onMouseDown:function(N){p(N,!1)},"aria-label":"Decrease Value","aria-disabled":i,className:b}),r||C.createElement("span",{unselectable:"on",className:"".concat(e,"-handler-down-inner")})))}function eo(n){var e=typeof n=="number"?Js(n):Yn(n).fullStr,t=e.includes(".");return t?Yn(e.replace(/(\d)\.(\d)/g,"$1$2.")).fullStr:n+"0"}const Mh=function(){var n=C.useRef(0),e=function(){bn.cancel(n.current)};return C.useEffect(function(){return e},[]),function(t){e(),n.current=bn(function(){t()})}};var kh=["prefixCls","className","style","min","max","step","defaultValue","value","disabled","readOnly","upHandler","downHandler","keyboard","changeOnWheel","controls","classNames","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep","changeOnBlur","domRef"],Dh=["disabled","style","prefixCls","value","prefix","suffix","addonBefore","addonAfter","className","classNames"],to=function(e,t){return e||t.isEmpty()?t.toString():t.toNumber()},no=function(e){var t=Ht(e);return t.isInvalidate()?null:t},jh=C.forwardRef(function(n,e){var t=n.prefixCls,r=n.className,s=n.style,i=n.min,a=n.max,o=n.step,c=o===void 0?1:o,u=n.defaultValue,h=n.value,p=n.disabled,d=n.readOnly,f=n.upHandler,m=n.downHandler,b=n.keyboard,y=n.changeOnWheel,E=y===void 0?!1:y,S=n.controls,N=S===void 0?!0:S;n.classNames;var T=n.stringMode,_=n.parser,P=n.formatter,R=n.precision,K=n.decimalSeparator,U=n.onChange,z=n.onInput,v=n.onPressEnter,O=n.onStep,w=n.changeOnBlur,A=w===void 0?!0:w,$=n.domRef,I=Ws(n,kh),M="".concat(t,"-input"),j=C.useRef(null),D=C.useState(!1),H=Fe(D,2),te=H[0],Y=H[1],ne=C.useRef(!1),ae=C.useRef(!1),V=C.useRef(!1),W=C.useState(function(){return Ht(h??u)}),ee=Fe(W,2),G=ee[0],se=ee[1];function oe(Z){h===void 0&&se(Z)}var le=C.useCallback(function(Z,J){if(!J)return R>=0?R:Math.max(Zn(Z),Zn(c))},[R,c]),he=C.useCallback(function(Z){var J=String(Z);if(_)return _(J);var pe=J;return K&&(pe=pe.replace(K,".")),pe.replace(/[^\w.-]+/g,"")},[_,K]),ge=C.useRef(""),ve=C.useCallback(function(Z,J){if(P)return P(Z,{userTyping:J,input:String(ge.current)});var pe=typeof Z=="number"?Js(Z):Z;if(!J){var de=le(pe,J);if(Ia(pe)&&(K||de>=0)){var at=K||".";pe=ks(pe,at,de)}}return pe},[P,le,K]),ye=C.useState(function(){var Z=u??h;return G.isInvalidate()&&["string","number"].includes(Al(Z))?Number.isNaN(Z)?"":Z:ve(G.toString(),!1)}),Ue=Fe(ye,2),Pe=Ue[0],Ze=Ue[1];ge.current=Pe;function qe(Z,J){Ze(ve(Z.isInvalidate()?Z.toString(!1):Z.toString(!J),J))}var Le=C.useMemo(function(){return no(a)},[a,R]),Ve=C.useMemo(function(){return no(i)},[i,R]),it=C.useMemo(function(){return!Le||!G||G.isInvalidate()?!1:Le.lessEquals(G)},[Le,G]),Ke=C.useMemo(function(){return!Ve||!G||G.isInvalidate()?!1:G.lessEquals(Ve)},[Ve,G]),Re=Lh(j.current,te),Ge=Fe(Re,2),ct=Ge[0],We=Ge[1],Xe=function(J){return Le&&!J.lessEquals(Le)?Le:Ve&&!Ve.lessEquals(J)?Ve:null},Me=function(J){return!Xe(J)},Ie=function(J,pe){var de=J,at=Me(de)||de.isEmpty();if(!de.isEmpty()&&!pe&&(de=Xe(de)||de,at=!0),!d&&!p&&at){var Nt=de.toString(),ot=le(Nt,pe);return ot>=0&&(de=Ht(ks(Nt,".",ot)),Me(de)||(de=Ht(ks(Nt,".",ot,!0)))),de.equals(G)||(oe(de),U==null||U(de.isEmpty()?null:to(T,de)),h===void 0&&qe(de,pe)),de}return G},we=Mh(),et=function Z(J){if(ct(),ge.current=J,Ze(J),!ae.current){var pe=he(J),de=Ht(pe);de.isNaN()||Ie(de,!0)}z==null||z(J),we(function(){var at=J;_||(at=J.replace(/ã€‚/g,".")),at!==J&&Z(at)})},gt=function(){ae.current=!0},Et=function(){ae.current=!1,et(j.current.value)},tt=function(J){et(J.target.value)},Ne=function(J){var pe;if(!(J&&it||!J&&Ke)){ne.current=!1;var de=Ht(V.current?eo(c):c);J||(de=de.negate());var at=(G||Ht(0)).add(de.toString()),Nt=Ie(at,!1);O==null||O(to(T,Nt),{offset:V.current?eo(c):c,type:J?"up":"down"}),(pe=j.current)===null||pe===void 0||pe.focus()}},ke=function(J){var pe=Ht(he(Pe)),de;pe.isNaN()?de=Ie(G,J):de=Ie(pe,J),h!==void 0?qe(G,!1):de.isNaN()||qe(de,!1)},Ye=function(){ne.current=!0},Ae=function(J){var pe=J.key,de=J.shiftKey;ne.current=!0,V.current=de,pe==="Enter"&&(ae.current||(ne.current=!1),ke(!1),v==null||v(J)),b!==!1&&!ae.current&&["Up","ArrowUp","Down","ArrowDown"].includes(pe)&&(Ne(pe==="Up"||pe==="ArrowUp"),J.preventDefault())},$e=function(){ne.current=!1,V.current=!1};C.useEffect(function(){if(E&&te){var Z=function(de){Ne(de.deltaY<0),de.preventDefault()},J=j.current;if(J)return J.addEventListener("wheel",Z,{passive:!1}),function(){return J.removeEventListener("wheel",Z)}}});var kt=function(){A&&ke(!1),Y(!1),ne.current=!1};return xi(function(){G.isInvalidate()||qe(G,!1)},[R,P]),xi(function(){var Z=Ht(h);se(Z);var J=Ht(he(Pe));(!Z.equals(J)||!ne.current||P)&&qe(Z,ne.current)},[h]),xi(function(){P&&We()},[Pe]),C.createElement("div",{ref:$,className:Ee(t,r,Oe(Oe(Oe(Oe(Oe({},"".concat(t,"-focused"),te),"".concat(t,"-disabled"),p),"".concat(t,"-readonly"),d),"".concat(t,"-not-a-number"),G.isNaN()),"".concat(t,"-out-of-range"),!G.isInvalidate()&&!Me(G))),style:s,onFocus:function(){Y(!0)},onBlur:kt,onKeyDown:Ae,onKeyUp:$e,onCompositionStart:gt,onCompositionEnd:Et,onBeforeInput:Ye},N&&C.createElement(qh,{prefixCls:t,upNode:f,downNode:m,upDisabled:it,downDisabled:Ke,onStep:Ne}),C.createElement("div",{className:"".concat(M,"-wrap")},C.createElement("input",Vt({autoComplete:"off",role:"spinbutton","aria-valuemin":i,"aria-valuemax":a,"aria-valuenow":G.isInvalidate()?null:G.toString(),step:c},I,{ref:Tl(j,e),className:M,value:Pe,onChange:tt,disabled:p,readOnly:d}))))}),Ph=C.forwardRef(function(n,e){var t=n.disabled,r=n.style,s=n.prefixCls,i=s===void 0?"rc-input-number":s,a=n.value,o=n.prefix,c=n.suffix,u=n.addonBefore,h=n.addonAfter,p=n.className,d=n.classNames,f=Ws(n,Dh),m=C.useRef(null),b=C.useRef(null),y=C.useRef(null),E=function(N){y.current&&Xu(y.current,N)};return C.useImperativeHandle(e,function(){return _h(y.current,{focus:E,nativeElement:m.current.nativeElement||b.current})}),C.createElement(Wu,{className:p,triggerFocus:E,prefixCls:i,value:a,disabled:t,style:r,prefix:o,suffix:c,addonAfter:h,addonBefore:u,classNames:d,components:{affixWrapper:"div",groupWrapper:"div",wrapper:"div",groupAddon:"div"},ref:m},C.createElement(jh,Vt({prefixCls:i,disabled:t,ref:y,domRef:b,className:d==null?void 0:d.input},f)))});const Bh=n=>{var e;const t=(e=n.handleVisible)!==null&&e!==void 0?e:"auto",r=n.controlHeightSM-n.lineWidth*2;return Object.assign(Object.assign({},Zu(n)),{controlWidth:90,handleWidth:r,handleFontSize:n.fontSize/2,handleVisible:t,handleActiveBg:n.colorFillAlter,handleBg:n.colorBgContainer,filledHandleBg:new Vi(n.colorFillSecondary).onBackground(n.colorBgContainer).toHexString(),handleHoverColor:n.colorPrimary,handleBorderColor:n.colorBorder,handleOpacity:t===!0?1:0,handleVisibleWidth:t===!0?r:0})},ro=(n,e)=>{let{componentCls:t,borderRadiusSM:r,borderRadiusLG:s}=n;const i=e==="lg"?s:r;return{[`&-${e}`]:{[`${t}-handler-wrap`]:{borderStartEndRadius:i,borderEndEndRadius:i},[`${t}-handler-up`]:{borderStartEndRadius:i},[`${t}-handler-down`]:{borderEndEndRadius:i}}}},Hh=n=>{const{componentCls:e,lineWidth:t,lineType:r,borderRadius:s,inputFontSizeSM:i,inputFontSizeLG:a,controlHeightLG:o,controlHeightSM:c,colorError:u,paddingInlineSM:h,paddingBlockSM:p,paddingBlockLG:d,paddingInlineLG:f,colorTextDescription:m,motionDurationMid:b,handleHoverColor:y,handleOpacity:E,paddingInline:S,paddingBlock:N,handleBg:T,handleActiveBg:_,colorTextDisabled:P,borderRadiusSM:R,borderRadiusLG:K,controlWidth:U,handleBorderColor:z,filledHandleBg:v,lineHeightLG:O,calc:w}=n;return[{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},qs(n)),Ul(n)),{display:"inline-block",width:U,margin:0,padding:0,borderRadius:s}),Qu(n,{[`${e}-handler-wrap`]:{background:T,[`${e}-handler-down`]:{borderBlockStart:`${be(t)} ${r} ${z}`}}})),Ju(n,{[`${e}-handler-wrap`]:{background:v,[`${e}-handler-down`]:{borderBlockStart:`${be(t)} ${r} ${z}`}},"&:focus-within":{[`${e}-handler-wrap`]:{background:T}}})),eh(n)),{"&-rtl":{direction:"rtl",[`${e}-input`]:{direction:"rtl"}},"&-lg":{padding:0,fontSize:a,lineHeight:O,borderRadius:K,[`input${e}-input`]:{height:w(o).sub(w(t).mul(2)).equal(),padding:`${be(d)} ${be(f)}`}},"&-sm":{padding:0,fontSize:i,borderRadius:R,[`input${e}-input`]:{height:w(c).sub(w(t).mul(2)).equal(),padding:`${be(p)} ${be(h)}`}},"&-out-of-range":{[`${e}-input-wrap`]:{input:{color:u}}},"&-group":Object.assign(Object.assign(Object.assign({},qs(n)),nh(n)),{"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",textAlign:"start",verticalAlign:"top",[`${e}-affix-wrapper`]:{width:"100%"},"&-lg":{[`${e}-group-addon`]:{borderRadius:K,fontSize:n.fontSizeLG}},"&-sm":{[`${e}-group-addon`]:{borderRadius:R}}},rh(n)),sh(n)),{[`&:not(${e}-compact-first-item):not(${e}-compact-last-item)${e}-compact-item`]:{[`${e}, ${e}-group-addon`]:{borderRadius:0}},[`&:not(${e}-compact-last-item)${e}-compact-first-item`]:{[`${e}, ${e}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${e}-compact-first-item)${e}-compact-last-item`]:{[`${e}, ${e}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})}),[`&-disabled ${e}-input`]:{cursor:"not-allowed"},[e]:{"&-input":Object.assign(Object.assign(Object.assign(Object.assign({},qs(n)),{width:"100%",padding:`${be(N)} ${be(S)}`,textAlign:"start",backgroundColor:"transparent",border:0,borderRadius:s,outline:0,transition:`all ${b} linear`,appearance:"textfield",fontSize:"inherit"}),th(n.colorTextPlaceholder)),{'&[type="number"]::-webkit-inner-spin-button, &[type="number"]::-webkit-outer-spin-button':{margin:0,webkitAppearance:"none",appearance:"none"}})},[`&:hover ${e}-handler-wrap, &-focused ${e}-handler-wrap`]:{width:n.handleWidth,opacity:1}})},{[e]:Object.assign(Object.assign(Object.assign({[`${e}-handler-wrap`]:{position:"absolute",insetBlockStart:0,insetInlineEnd:0,width:n.handleVisibleWidth,opacity:E,height:"100%",borderStartStartRadius:0,borderStartEndRadius:s,borderEndEndRadius:s,borderEndStartRadius:0,display:"flex",flexDirection:"column",alignItems:"stretch",transition:`all ${b}`,overflow:"hidden",[`${e}-handler`]:{display:"flex",alignItems:"center",justifyContent:"center",flex:"auto",height:"40%",[`
              ${e}-handler-up-inner,
              ${e}-handler-down-inner
            `]:{marginInlineEnd:0,fontSize:n.handleFontSize}}},[`${e}-handler`]:{height:"50%",overflow:"hidden",color:m,fontWeight:"bold",lineHeight:0,textAlign:"center",cursor:"pointer",borderInlineStart:`${be(t)} ${r} ${z}`,transition:`all ${b} linear`,"&:active":{background:_},"&:hover":{height:"60%",[`
              ${e}-handler-up-inner,
              ${e}-handler-down-inner
            `]:{color:y}},"&-up-inner, &-down-inner":Object.assign(Object.assign({},Au()),{color:m,transition:`all ${b} linear`,userSelect:"none"})},[`${e}-handler-up`]:{borderStartEndRadius:s},[`${e}-handler-down`]:{borderEndEndRadius:s}},ro(n,"lg")),ro(n,"sm")),{"&-disabled, &-readonly":{[`${e}-handler-wrap`]:{display:"none"},[`${e}-input`]:{color:"inherit"}},[`
          ${e}-handler-up-disabled,
          ${e}-handler-down-disabled
        `]:{cursor:"not-allowed"},[`
          ${e}-handler-up-disabled:hover &-handler-up-inner,
          ${e}-handler-down-disabled:hover &-handler-down-inner
        `]:{color:P}})}]},Fh=n=>{const{componentCls:e,paddingBlock:t,paddingInline:r,inputAffixPadding:s,controlWidth:i,borderRadiusLG:a,borderRadiusSM:o,paddingInlineLG:c,paddingInlineSM:u,paddingBlockLG:h,paddingBlockSM:p,motionDurationMid:d}=n;return{[`${e}-affix-wrapper`]:Object.assign(Object.assign({[`input${e}-input`]:{padding:`${be(t)} 0`}},Ul(n)),{position:"relative",display:"inline-flex",alignItems:"center",width:i,padding:0,paddingInlineStart:r,"&-lg":{borderRadius:a,paddingInlineStart:c,[`input${e}-input`]:{padding:`${be(h)} 0`}},"&-sm":{borderRadius:o,paddingInlineStart:u,[`input${e}-input`]:{padding:`${be(p)} 0`}},[`&:not(${e}-disabled):hover`]:{zIndex:1},"&-focused, &:focus":{zIndex:1},[`&-disabled > ${e}-disabled`]:{background:"transparent"},[`> div${e}`]:{width:"100%",border:"none",outline:"none",[`&${e}-focused`]:{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${e}-handler-wrap`]:{zIndex:2},[e]:{position:"static",color:"inherit","&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center",pointerEvents:"none"},"&-prefix":{marginInlineEnd:s},"&-suffix":{insetBlockStart:0,insetInlineEnd:0,height:"100%",marginInlineEnd:r,marginInlineStart:s,transition:`margin ${d}`}},[`&:hover ${e}-handler-wrap, &-focused ${e}-handler-wrap`]:{width:n.handleWidth,opacity:1},[`&:not(${e}-affix-wrapper-without-controls):hover ${e}-suffix`]:{marginInlineEnd:n.calc(n.handleWidth).add(r).equal()}})}},Uh=Ca("InputNumber",n=>{const e=Sa(n,Yu(n));return[Hh(e),Fh(e),Ol(e)]},Bh,{unitless:{handleOpacity:!0}});var zh=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const tc=C.forwardRef((n,e)=>{const{getPrefixCls:t,direction:r}=C.useContext(Ea),s=C.useRef(null);C.useImperativeHandle(e,()=>s.current);const{className:i,rootClassName:a,size:o,disabled:c,prefixCls:u,addonBefore:h,addonAfter:p,prefix:d,suffix:f,bordered:m,readOnly:b,status:y,controls:E,variant:S}=n,N=zh(n,["className","rootClassName","size","disabled","prefixCls","addonBefore","addonAfter","prefix","suffix","bordered","readOnly","status","controls","variant"]),T=t("input-number",u),_=_l(T),[P,R,K]=Uh(T,_),{compactSize:U,compactItemClassnames:z}=Ll(T,r);let v=C.createElement(vh,{className:`${T}-handler-up-inner`}),O=C.createElement(oh,{className:`${T}-handler-down-inner`});const w=typeof E=="boolean"?E:void 0;typeof E=="object"&&(v=typeof E.upIcon>"u"?v:C.createElement("span",{className:`${T}-handler-up-inner`},E.upIcon),O=typeof E.downIcon>"u"?O:C.createElement("span",{className:`${T}-handler-down-inner`},E.downIcon));const{hasFeedback:A,status:$,isFormItemInput:I,feedbackIcon:M}=C.useContext(Il),j=ah($,y),D=Rl(G=>{var se;return(se=o??U)!==null&&se!==void 0?se:G}),H=C.useContext(xa),te=c??H,[Y,ne]=ih("inputNumber",S,m),ae=A&&C.createElement(C.Fragment,null,M),V=Ee({[`${T}-lg`]:D==="large",[`${T}-sm`]:D==="small",[`${T}-rtl`]:r==="rtl",[`${T}-in-form-item`]:I},R),W=`${T}-group`,ee=C.createElement(Ph,Object.assign({ref:s,disabled:te,className:Ee(K,_,i,a,z),upHandler:v,downHandler:O,prefixCls:T,readOnly:b,controls:w,prefix:d,suffix:ae||f,addonBefore:h&&C.createElement(Gi,{form:!0,space:!0},h),addonAfter:p&&C.createElement(Gi,{form:!0,space:!0},p),classNames:{input:V,variant:Ee({[`${T}-${Y}`]:ne},Ki(T,j,A)),affixWrapper:Ee({[`${T}-affix-wrapper-sm`]:D==="small",[`${T}-affix-wrapper-lg`]:D==="large",[`${T}-affix-wrapper-rtl`]:r==="rtl",[`${T}-affix-wrapper-without-controls`]:E===!1},R),wrapper:Ee({[`${W}-rtl`]:r==="rtl"},R),groupWrapper:Ee({[`${T}-group-wrapper-sm`]:D==="small",[`${T}-group-wrapper-lg`]:D==="large",[`${T}-group-wrapper-rtl`]:r==="rtl",[`${T}-group-wrapper-${Y}`]:ne},Ki(`${T}-group-wrapper`,j,A),R)}},N));return P(ee)}),nc=tc,Vh=n=>C.createElement(Tu,{theme:{components:{InputNumber:{handleVisible:!0}}}},C.createElement(tc,Object.assign({},n)));nc._InternalPanelDoNotUseOrYouWillBeFired=Vh;const Qn=n=>{let{prefixCls:e,min:t=0,max:r=100,value:s,onChange:i,className:a,formatter:o}=n;const c=`${e}-steppers`,[u,h]=C.useState(s);return C.useEffect(()=>{Number.isNaN(s)||h(s)},[s]),F.createElement(nc,{className:Ee(c,a),min:t,max:r,value:u,formatter:o,size:"small",onChange:p=>{s||h(p||0),i==null||i(p)}})},Gh=n=>{let{prefixCls:e,value:t,onChange:r}=n;const s=`${e}-alpha-input`,[i,a]=C.useState(qt(t||"#000"));C.useEffect(()=>{t&&a(t)},[t]);const o=c=>{const u=i.toHsb();u.a=(c||0)/100;const h=qt(u);t||a(h),r==null||r(h)};return F.createElement(Qn,{value:wa(i),prefixCls:e,formatter:c=>`${c}%`,className:s,onChange:o})},Kh=/(^#[\da-f]{6}$)|(^#[\da-f]{8}$)/i,Wh=n=>Kh.test(`#${n}`),Xh=n=>{let{prefixCls:e,value:t,onChange:r}=n;const s=`${e}-hex-input`,[i,a]=C.useState(()=>t?xs(t.toHexString()):void 0);C.useEffect(()=>{t&&a(xs(t.toHexString()))},[t]);const o=c=>{const u=c.target.value;a(xs(u)),Wh(xs(u,!0))&&(r==null||r(qt(u)))};return F.createElement(Fl,{className:s,value:i,prefix:"#",onChange:o,size:"small"})},Zh=n=>{let{prefixCls:e,value:t,onChange:r}=n;const s=`${e}-hsb-input`,[i,a]=C.useState(qt(t||"#000"));C.useEffect(()=>{t&&a(t)},[t]);const o=(c,u)=>{const h=i.toHsb();h[u]=u==="h"?c:(c||0)/100;const p=qt(h);t||a(p),r==null||r(p)};return F.createElement("div",{className:s},F.createElement(Qn,{max:360,min:0,value:Number(i.toHsb().h),prefixCls:e,className:s,formatter:c=>wi(c||0).toString(),onChange:c=>o(Number(c),"h")}),F.createElement(Qn,{max:100,min:0,value:Number(i.toHsb().s)*100,prefixCls:e,className:s,formatter:c=>`${wi(c||0)}%`,onChange:c=>o(Number(c),"s")}),F.createElement(Qn,{max:100,min:0,value:Number(i.toHsb().b)*100,prefixCls:e,className:s,formatter:c=>`${wi(c||0)}%`,onChange:c=>o(Number(c),"b")}))},Yh=n=>{let{prefixCls:e,value:t,onChange:r}=n;const s=`${e}-rgb-input`,[i,a]=C.useState(qt(t||"#000"));C.useEffect(()=>{t&&a(t)},[t]);const o=(c,u)=>{const h=i.toRgb();h[u]=c||0;const p=qt(h);t||a(p),r==null||r(p)};return F.createElement("div",{className:s},F.createElement(Qn,{max:255,min:0,value:Number(i.toRgb().r),prefixCls:e,className:s,onChange:c=>o(Number(c),"r")}),F.createElement(Qn,{max:255,min:0,value:Number(i.toRgb().g),prefixCls:e,className:s,onChange:c=>o(Number(c),"g")}),F.createElement(Qn,{max:255,min:0,value:Number(i.toRgb().b),prefixCls:e,className:s,onChange:c=>o(Number(c),"b")}))},Qh=[qn.hex,qn.hsb,qn.rgb].map(n=>({value:n,label:n.toLocaleUpperCase()})),Jh=n=>{const{prefixCls:e,format:t,value:r,disabledAlpha:s,onFormatChange:i,onChange:a,disabledFormat:o}=n,[c,u]=Or(qn.hex,{value:t,onChange:i}),h=`${e}-input`,p=f=>{u(f)},d=C.useMemo(()=>{const f={value:r,prefixCls:e,onChange:a};switch(c){case qn.hsb:return F.createElement(Zh,Object.assign({},f));case qn.rgb:return F.createElement(Yh,Object.assign({},f));default:return F.createElement(Xh,Object.assign({},f))}},[c,e,r,a]);return F.createElement("div",{className:`${h}-container`},!o&&F.createElement(lh,{value:c,variant:"borderless",getPopupContainer:f=>f,popupMatchSelectWidth:68,placement:"bottomRight",onChange:p,className:`${e}-format-select`,size:"small",options:Qh}),F.createElement("div",{className:h},d),!s&&F.createElement(Gh,{prefixCls:e,value:r,onChange:a}))};function Xi(n,e,t){return(n-e)/(t-e)}function Ra(n,e,t,r){var s=Xi(e,t,r),i={};switch(n){case"rtl":i.right="".concat(s*100,"%"),i.transform="translateX(50%)";break;case"btt":i.bottom="".concat(s*100,"%"),i.transform="translateY(50%)";break;case"ttb":i.top="".concat(s*100,"%"),i.transform="translateY(-50%)";break;default:i.left="".concat(s*100,"%"),i.transform="translateX(-50%)";break}return i}function Xn(n,e){return Array.isArray(n)?n[e]:n}var nr=C.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0,styles:{},classNames:{}}),rc=C.createContext({}),ed=["prefixCls","value","valueIndex","onStartMove","onDelete","style","render","dragging","draggingDelete","onOffsetChange","onChangeComplete","onFocus","onMouseEnter"],so=C.forwardRef(function(n,e){var t=n.prefixCls,r=n.value,s=n.valueIndex,i=n.onStartMove,a=n.onDelete,o=n.style,c=n.render,u=n.dragging,h=n.draggingDelete,p=n.onOffsetChange,d=n.onChangeComplete,f=n.onFocus,m=n.onMouseEnter,b=Ws(n,ed),y=C.useContext(nr),E=y.min,S=y.max,N=y.direction,T=y.disabled,_=y.keyboard,P=y.range,R=y.tabIndex,K=y.ariaLabelForHandle,U=y.ariaLabelledByForHandle,z=y.ariaRequired,v=y.ariaValueTextFormatterForHandle,O=y.styles,w=y.classNames,A="".concat(t,"-handle"),$=function(V){T||i(V,s)},I=function(V){f==null||f(V,s)},M=function(V){m(V,s)},j=function(V){if(!T&&_){var W=null;switch(V.which||V.keyCode){case lt.LEFT:W=N==="ltr"||N==="btt"?-1:1;break;case lt.RIGHT:W=N==="ltr"||N==="btt"?1:-1;break;case lt.UP:W=N!=="ttb"?1:-1;break;case lt.DOWN:W=N!=="ttb"?-1:1;break;case lt.HOME:W="min";break;case lt.END:W="max";break;case lt.PAGE_UP:W=2;break;case lt.PAGE_DOWN:W=-2;break;case lt.BACKSPACE:case lt.DELETE:a(s);break}W!==null&&(V.preventDefault(),p(W,s))}},D=function(V){switch(V.which||V.keyCode){case lt.LEFT:case lt.RIGHT:case lt.UP:case lt.DOWN:case lt.HOME:case lt.END:case lt.PAGE_UP:case lt.PAGE_DOWN:d==null||d();break}},H=Ra(N,r,E,S),te={};if(s!==null){var Y;te={tabIndex:T?null:Xn(R,s),role:"slider","aria-valuemin":E,"aria-valuemax":S,"aria-valuenow":r,"aria-disabled":T,"aria-label":Xn(K,s),"aria-labelledby":Xn(U,s),"aria-required":Xn(z,s),"aria-valuetext":(Y=Xn(v,s))===null||Y===void 0?void 0:Y(r),"aria-orientation":N==="ltr"||N==="rtl"?"horizontal":"vertical",onMouseDown:$,onTouchStart:$,onFocus:I,onMouseEnter:M,onKeyDown:j,onKeyUp:D}}var ne=C.createElement("div",Vt({ref:e,className:Ee(A,Oe(Oe(Oe({},"".concat(A,"-").concat(s+1),s!==null&&P),"".concat(A,"-dragging"),u),"".concat(A,"-dragging-delete"),h),w.handle),style:dt(dt(dt({},H),o),O.handle)},te,b));return c&&(ne=c(ne,{index:s,prefixCls:t,value:r,dragging:u,draggingDelete:h})),ne}),td=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","activeHandleRender","draggingIndex","draggingDelete","onFocus"],nd=C.forwardRef(function(n,e){var t=n.prefixCls,r=n.style,s=n.onStartMove,i=n.onOffsetChange,a=n.values,o=n.handleRender,c=n.activeHandleRender,u=n.draggingIndex,h=n.draggingDelete,p=n.onFocus,d=Ws(n,td),f=C.useRef({}),m=C.useState(!1),b=Fe(m,2),y=b[0],E=b[1],S=C.useState(-1),N=Fe(S,2),T=N[0],_=N[1],P=function(v){_(v),E(!0)},R=function(v,O){P(O),p==null||p(v)},K=function(v,O){P(O)};C.useImperativeHandle(e,function(){return{focus:function(v){var O;(O=f.current[v])===null||O===void 0||O.focus()},hideHelp:function(){Ou.flushSync(function(){E(!1)})}}});var U=dt({prefixCls:t,onStartMove:s,onOffsetChange:i,render:o,onFocus:R,onMouseEnter:K},d);return C.createElement(C.Fragment,null,a.map(function(z,v){var O=u===v;return C.createElement(so,Vt({ref:function(A){A?f.current[v]=A:delete f.current[v]},dragging:O,draggingDelete:O&&h,style:Xn(r,v),key:v,value:z,valueIndex:v},U))}),c&&y&&C.createElement(so,Vt({key:"a11y"},U,{value:a[T],valueIndex:null,dragging:u!==-1,draggingDelete:h,render:c,style:{pointerEvents:"none"},tabIndex:null,"aria-hidden":!0})))}),rd=function(e){var t=e.prefixCls,r=e.style,s=e.children,i=e.value,a=e.onClick,o=C.useContext(nr),c=o.min,u=o.max,h=o.direction,p=o.includedStart,d=o.includedEnd,f=o.included,m="".concat(t,"-text"),b=Ra(h,i,c,u);return C.createElement("span",{className:Ee(m,Oe({},"".concat(m,"-active"),f&&p<=i&&i<=d)),style:dt(dt({},b),r),onMouseDown:function(E){E.stopPropagation()},onClick:function(){a(i)}},s)},sd=function(e){var t=e.prefixCls,r=e.marks,s=e.onClick,i="".concat(t,"-mark");return r.length?C.createElement("div",{className:i},r.map(function(a){var o=a.value,c=a.style,u=a.label;return C.createElement(rd,{key:o,prefixCls:i,style:c,value:o,onClick:s},u)})):null},id=function(e){var t=e.prefixCls,r=e.value,s=e.style,i=e.activeStyle,a=C.useContext(nr),o=a.min,c=a.max,u=a.direction,h=a.included,p=a.includedStart,d=a.includedEnd,f="".concat(t,"-dot"),m=h&&p<=r&&r<=d,b=dt(dt({},Ra(u,r,o,c)),typeof s=="function"?s(r):s);return m&&(b=dt(dt({},b),typeof i=="function"?i(r):i)),C.createElement("span",{className:Ee(f,Oe({},"".concat(f,"-active"),m)),style:b})},ad=function(e){var t=e.prefixCls,r=e.marks,s=e.dots,i=e.style,a=e.activeStyle,o=C.useContext(nr),c=o.min,u=o.max,h=o.step,p=C.useMemo(function(){var d=new Set;if(r.forEach(function(m){d.add(m.value)}),s&&h!==null)for(var f=c;f<=u;)d.add(f),f+=h;return Array.from(d)},[c,u,h,s,r]);return C.createElement("div",{className:"".concat(t,"-step")},p.map(function(d){return C.createElement(id,{prefixCls:t,key:d,value:d,style:i,activeStyle:a})}))},io=function(e){var t=e.prefixCls,r=e.style,s=e.start,i=e.end,a=e.index,o=e.onStartMove,c=e.replaceCls,u=C.useContext(nr),h=u.direction,p=u.min,d=u.max,f=u.disabled,m=u.range,b=u.classNames,y="".concat(t,"-track"),E=Xi(s,p,d),S=Xi(i,p,d),N=function(R){!f&&o&&o(R,-1)},T={};switch(h){case"rtl":T.right="".concat(E*100,"%"),T.width="".concat(S*100-E*100,"%");break;case"btt":T.bottom="".concat(E*100,"%"),T.height="".concat(S*100-E*100,"%");break;case"ttb":T.top="".concat(E*100,"%"),T.height="".concat(S*100-E*100,"%");break;default:T.left="".concat(E*100,"%"),T.width="".concat(S*100-E*100,"%")}var _=c||Ee(y,Oe(Oe({},"".concat(y,"-").concat(a+1),a!==null&&m),"".concat(t,"-track-draggable"),o),b.track);return C.createElement("div",{className:_,style:dt(dt({},T),r),onMouseDown:N,onTouchStart:N})},od=function(e){var t=e.prefixCls,r=e.style,s=e.values,i=e.startPoint,a=e.onStartMove,o=C.useContext(nr),c=o.included,u=o.range,h=o.min,p=o.styles,d=o.classNames,f=C.useMemo(function(){if(!u){if(s.length===0)return[];var b=i??h,y=s[0];return[{start:Math.min(b,y),end:Math.max(b,y)}]}for(var E=[],S=0;S<s.length-1;S+=1)E.push({start:s[S],end:s[S+1]});return E},[s,u,i,h]);if(!c)return null;var m=f!=null&&f.length&&(d.tracks||p.tracks)?C.createElement(io,{index:null,prefixCls:t,start:f[0].start,end:f[f.length-1].end,replaceCls:Ee(d.tracks,"".concat(t,"-tracks")),style:p.tracks}):null;return C.createElement(C.Fragment,null,m,f.map(function(b,y){var E=b.start,S=b.end;return C.createElement(io,{index:y,prefixCls:t,style:dt(dt({},Xn(r,y)),p.track),start:E,end:S,key:y,onStartMove:a})}))},ld=130;function ao(n){var e="targetTouches"in n?n.targetTouches[0]:n;return{pageX:e.pageX,pageY:e.pageY}}function cd(n,e,t,r,s,i,a,o,c,u,h){var p=C.useState(null),d=Fe(p,2),f=d[0],m=d[1],b=C.useState(-1),y=Fe(b,2),E=y[0],S=y[1],N=C.useState(!1),T=Fe(N,2),_=T[0],P=T[1],R=C.useState(t),K=Fe(R,2),U=K[0],z=K[1],v=C.useState(t),O=Fe(v,2),w=O[0],A=O[1],$=C.useRef(null),I=C.useRef(null),M=C.useRef(null),j=C.useContext(rc),D=j.onDragStart,H=j.onDragChange;Hs(function(){E===-1&&z(t)},[t,E]),C.useEffect(function(){return function(){document.removeEventListener("mousemove",$.current),document.removeEventListener("mouseup",I.current),M.current&&(M.current.removeEventListener("touchmove",$.current),M.current.removeEventListener("touchend",I.current))}},[]);var te=function(W,ee,G){ee!==void 0&&m(ee),z(W);var se=W;G&&(se=W.filter(function(oe,le){return le!==E})),a(se),H&&H({rawValues:W,deleteIndex:G?E:-1,draggingIndex:E,draggingValue:ee})},Y=rn(function(V,W,ee){if(V===-1){var G=w[0],se=w[w.length-1],oe=r-G,le=s-se,he=W*(s-r);he=Math.max(he,oe),he=Math.min(he,le);var ge=i(G+he);he=ge-G;var ve=w.map(function(Ze){return Ze+he});te(ve)}else{var ye=(s-r)*W,Ue=wt(U);Ue[V]=w[V];var Pe=c(Ue,ye,V,"dist");te(Pe.values,Pe.value,ee)}}),ne=function(W,ee,G){W.stopPropagation();var se=G||t,oe=se[ee];S(ee),m(oe),A(se),z(se),P(!1);var le=ao(W),he=le.pageX,ge=le.pageY,ve=!1;D&&D({rawValues:se,draggingIndex:ee,draggingValue:oe});var ye=function(Ze){Ze.preventDefault();var qe=ao(Ze),Le=qe.pageX,Ve=qe.pageY,it=Le-he,Ke=Ve-ge,Re=n.current.getBoundingClientRect(),Ge=Re.width,ct=Re.height,We,Xe;switch(e){case"btt":We=-Ke/ct,Xe=it;break;case"ttb":We=Ke/ct,Xe=it;break;case"rtl":We=-it/Ge,Xe=Ke;break;default:We=it/Ge,Xe=Ke}ve=u?Math.abs(Xe)>ld&&h<U.length:!1,P(ve),Y(ee,We,ve)},Ue=function Pe(Ze){Ze.preventDefault(),document.removeEventListener("mouseup",Pe),document.removeEventListener("mousemove",ye),M.current&&(M.current.removeEventListener("touchmove",$.current),M.current.removeEventListener("touchend",I.current)),$.current=null,I.current=null,M.current=null,o(ve),S(-1),P(!1)};document.addEventListener("mouseup",Ue),document.addEventListener("mousemove",ye),W.currentTarget.addEventListener("touchend",Ue),W.currentTarget.addEventListener("touchmove",ye),$.current=ye,I.current=Ue,M.current=W.currentTarget},ae=C.useMemo(function(){var V=wt(t).sort(function(oe,le){return oe-le}),W=wt(U).sort(function(oe,le){return oe-le}),ee={};W.forEach(function(oe){ee[oe]=(ee[oe]||0)+1}),V.forEach(function(oe){ee[oe]=(ee[oe]||0)-1});var G=u?1:0,se=Object.values(ee).reduce(function(oe,le){return oe+Math.abs(le)},0);return se<=G?U:t},[t,U,u]);return[E,f,_,ae,ne]}function ud(n,e,t,r,s,i){var a=C.useCallback(function(f){return Math.max(n,Math.min(e,f))},[n,e]),o=C.useCallback(function(f){if(t!==null){var m=n+Math.round((a(f)-n)/t)*t,b=function(N){return(String(N).split(".")[1]||"").length},y=Math.max(b(t),b(e),b(n)),E=Number(m.toFixed(y));return n<=E&&E<=e?E:null}return null},[t,n,e,a]),c=C.useCallback(function(f){var m=a(f),b=r.map(function(S){return S.value});t!==null&&b.push(o(f)),b.push(n,e);var y=b[0],E=e-n;return b.forEach(function(S){var N=Math.abs(m-S);N<=E&&(y=S,E=N)}),y},[n,e,r,t,a,o]),u=function f(m,b,y){var E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit";if(typeof b=="number"){var S,N=m[y],T=N+b,_=[];r.forEach(function(z){_.push(z.value)}),_.push(n,e),_.push(o(N));var P=b>0?1:-1;E==="unit"?_.push(o(N+P*t)):_.push(o(T)),_=_.filter(function(z){return z!==null}).filter(function(z){return b<0?z<=N:z>=N}),E==="unit"&&(_=_.filter(function(z){return z!==N}));var R=E==="unit"?N:T;S=_[0];var K=Math.abs(S-R);if(_.forEach(function(z){var v=Math.abs(z-R);v<K&&(S=z,K=v)}),S===void 0)return b<0?n:e;if(E==="dist")return S;if(Math.abs(b)>1){var U=wt(m);return U[y]=S,f(U,b-P,y,E)}return S}else{if(b==="min")return n;if(b==="max")return e}},h=function(m,b,y){var E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",S=m[y],N=u(m,b,y,E);return{value:N,changed:N!==S}},p=function(m){return i===null&&m===0||typeof i=="number"&&m<i},d=function(m,b,y){var E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",S=m.map(c),N=S[y],T=u(S,b,y,E);if(S[y]=T,s===!1){var _=i||0;y>0&&S[y-1]!==N&&(S[y]=Math.max(S[y],S[y-1]+_)),y<S.length-1&&S[y+1]!==N&&(S[y]=Math.min(S[y],S[y+1]-_))}else if(typeof i=="number"||i===null){for(var P=y+1;P<S.length;P+=1)for(var R=!0;p(S[P]-S[P-1])&&R;){var K=h(S,1,P);S[P]=K.value,R=K.changed}for(var U=y;U>0;U-=1)for(var z=!0;p(S[U]-S[U-1])&&z;){var v=h(S,-1,U-1);S[U-1]=v.value,z=v.changed}for(var O=S.length-1;O>0;O-=1)for(var w=!0;p(S[O]-S[O-1])&&w;){var A=h(S,-1,O-1);S[O-1]=A.value,w=A.changed}for(var $=0;$<S.length-1;$+=1)for(var I=!0;p(S[$+1]-S[$])&&I;){var M=h(S,1,$+1);S[$+1]=M.value,I=M.changed}}return{value:S[y],values:S}};return[c,d]}function hd(n){return C.useMemo(function(){if(n===!0||!n)return[!!n,!1,!1,0];var e=n.editable,t=n.draggableTrack,r=n.minCount,s=n.maxCount;return[!0,e,!e&&t,r||0,s]},[n])}var dd=C.forwardRef(function(n,e){var t=n.prefixCls,r=t===void 0?"rc-slider":t,s=n.className,i=n.style,a=n.classNames,o=n.styles,c=n.id,u=n.disabled,h=u===void 0?!1:u,p=n.keyboard,d=p===void 0?!0:p,f=n.autoFocus,m=n.onFocus,b=n.onBlur,y=n.min,E=y===void 0?0:y,S=n.max,N=S===void 0?100:S,T=n.step,_=T===void 0?1:T,P=n.value,R=n.defaultValue,K=n.range,U=n.count,z=n.onChange,v=n.onBeforeChange,O=n.onAfterChange,w=n.onChangeComplete,A=n.allowCross,$=A===void 0?!0:A,I=n.pushable,M=I===void 0?!1:I,j=n.reverse,D=n.vertical,H=n.included,te=H===void 0?!0:H,Y=n.startPoint,ne=n.trackStyle,ae=n.handleStyle,V=n.railStyle,W=n.dotStyle,ee=n.activeDotStyle,G=n.marks,se=n.dots,oe=n.handleRender,le=n.activeHandleRender,he=n.track,ge=n.tabIndex,ve=ge===void 0?0:ge,ye=n.ariaLabelForHandle,Ue=n.ariaLabelledByForHandle,Pe=n.ariaRequired,Ze=n.ariaValueTextFormatterForHandle,qe=C.useRef(null),Le=C.useRef(null),Ve=C.useMemo(function(){return D?j?"ttb":"btt":j?"rtl":"ltr"},[j,D]),it=hd(K),Ke=Fe(it,5),Re=Ke[0],Ge=Ke[1],ct=Ke[2],We=Ke[3],Xe=Ke[4],Me=C.useMemo(function(){return isFinite(E)?E:0},[E]),Ie=C.useMemo(function(){return isFinite(N)?N:100},[N]),we=C.useMemo(function(){return _!==null&&_<=0?1:_},[_]),et=C.useMemo(function(){return typeof M=="boolean"?M?we:!1:M>=0?M:!1},[M,we]),gt=C.useMemo(function(){return Object.keys(G||{}).map(function(Ce){var ue=G[Ce],Te={value:Number(Ce)};return ue&&Al(ue)==="object"&&!C.isValidElement(ue)&&("label"in ue||"style"in ue)?(Te.style=ue.style,Te.label=ue.label):Te.label=ue,Te}).filter(function(Ce){var ue=Ce.label;return ue||typeof ue=="number"}).sort(function(Ce,ue){return Ce.value-ue.value})},[G]),Et=ud(Me,Ie,we,gt,$,et),tt=Fe(Et,2),Ne=tt[0],ke=tt[1],Ye=Or(R,{value:P}),Ae=Fe(Ye,2),$e=Ae[0],kt=Ae[1],Z=C.useMemo(function(){var Ce=$e==null?[]:Array.isArray($e)?$e:[$e],ue=Fe(Ce,1),Te=ue[0],De=Te===void 0?Me:Te,Be=$e===null?[]:[De];if(Re){if(Be=wt(Ce),U||$e===void 0){var At=U>=0?U+1:2;for(Be=Be.slice(0,At);Be.length<At;){var pt;Be.push((pt=Be[Be.length-1])!==null&&pt!==void 0?pt:Me)}}Be.sort(function(Qe,Ct){return Qe-Ct})}return Be.forEach(function(Qe,Ct){Be[Ct]=Ne(Qe)}),Be},[$e,Re,Me,U,Ne]),J=function(ue){return Re?ue:ue[0]},pe=rn(function(Ce){var ue=wt(Ce).sort(function(Te,De){return Te-De});z&&!_u(ue,Z,!0)&&z(J(ue)),kt(ue)}),de=rn(function(Ce){Ce&&qe.current.hideHelp();var ue=J(Z);O==null||O(ue),zi(!O,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),w==null||w(ue)}),at=function(ue){if(!(h||!Ge||Z.length<=We)){var Te=wt(Z);Te.splice(ue,1),v==null||v(J(Te)),pe(Te);var De=Math.max(0,ue-1);qe.current.hideHelp(),qe.current.focus(De)}},Nt=cd(Le,Ve,Z,Me,Ie,Ne,pe,de,ke,Ge,We),ot=Fe(Nt,5),Hn=ot[0],Dt=ot[1],Mr=ot[2],Fn=ot[3],cr=ot[4],Un=function(ue,Te){if(!h){var De=wt(Z),Be=0,At=0,pt=Ie-Me;Z.forEach(function(Ot,Tn){var pr=Math.abs(ue-Ot);pr<=pt&&(pt=pr,Be=Tn),Ot<ue&&(At=Tn)});var Qe=Be;Ge&&pt!==0&&(!Xe||Z.length<Xe)?(De.splice(At+1,0,ue),Qe=At+1):De[Be]=ue,Re&&!Z.length&&U===void 0&&De.push(ue);var Ct=J(De);if(v==null||v(Ct),pe(De),Te){var jt,Qt;(jt=document.activeElement)===null||jt===void 0||(Qt=jt.blur)===null||Qt===void 0||Qt.call(jt),qe.current.focus(Qe),cr(Te,Qe,De)}else O==null||O(Ct),zi(!O,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),w==null||w(Ct)}},zn=function(ue){ue.preventDefault();var Te=Le.current.getBoundingClientRect(),De=Te.width,Be=Te.height,At=Te.left,pt=Te.top,Qe=Te.bottom,Ct=Te.right,jt=ue.clientX,Qt=ue.clientY,Ot;switch(Ve){case"btt":Ot=(Qe-Qt)/Be;break;case"ttb":Ot=(Qt-pt)/Be;break;case"rtl":Ot=(Ct-jt)/De;break;default:Ot=(jt-At)/De}var Tn=Me+Ot*(Ie-Me);Un(Ne(Tn),ue)},nt=C.useState(null),ur=Fe(nt,2),Vn=ur[0],hr=ur[1],kr=function(ue,Te){if(!h){var De=ke(Z,ue,Te);v==null||v(J(Z)),pe(De.values),hr(De.value)}};C.useEffect(function(){if(Vn!==null){var Ce=Z.indexOf(Vn);Ce>=0&&qe.current.focus(Ce)}hr(null)},[Vn]);var Dr=C.useMemo(function(){return ct&&we===null?!1:ct},[ct,we]),rt=rn(function(Ce,ue){cr(Ce,ue),v==null||v(J(Z))}),dr=Hn!==-1;C.useEffect(function(){if(!dr){var Ce=Z.lastIndexOf(Dt);qe.current.focus(Ce)}},[dr]);var hn=C.useMemo(function(){return wt(Fn).sort(function(Ce,ue){return Ce-ue})},[Fn]),jr=C.useMemo(function(){return Re?[hn[0],hn[hn.length-1]]:[Me,hn[0]]},[hn,Re,Me]),fr=Fe(jr,2),gr=fr[0],ut=fr[1];C.useImperativeHandle(e,function(){return{focus:function(){qe.current.focus(0)},blur:function(){var ue,Te=document,De=Te.activeElement;(ue=Le.current)!==null&&ue!==void 0&&ue.contains(De)&&(De==null||De.blur())}}}),C.useEffect(function(){f&&qe.current.focus(0)},[]);var Pr=C.useMemo(function(){return{min:Me,max:Ie,direction:Ve,disabled:h,keyboard:d,step:we,included:te,includedStart:gr,includedEnd:ut,range:Re,tabIndex:ve,ariaLabelForHandle:ye,ariaLabelledByForHandle:Ue,ariaRequired:Pe,ariaValueTextFormatterForHandle:Ze,styles:o||{},classNames:a||{}}},[Me,Ie,Ve,h,d,we,te,gr,ut,Re,ve,ye,Ue,Pe,Ze,o,a]);return C.createElement(nr.Provider,{value:Pr},C.createElement("div",{ref:Le,className:Ee(r,s,Oe(Oe(Oe(Oe({},"".concat(r,"-disabled"),h),"".concat(r,"-vertical"),D),"".concat(r,"-horizontal"),!D),"".concat(r,"-with-marks"),gt.length)),style:i,onMouseDown:zn,id:c},C.createElement("div",{className:Ee("".concat(r,"-rail"),a==null?void 0:a.rail),style:dt(dt({},V),o==null?void 0:o.rail)}),he!==!1&&C.createElement(od,{prefixCls:r,style:ne,values:Z,startPoint:Y,onStartMove:Dr?rt:void 0}),C.createElement(ad,{prefixCls:r,marks:gt,dots:se,style:W,activeStyle:ee}),C.createElement(nd,{ref:qe,prefixCls:r,style:ae,values:Fn,draggingIndex:Hn,draggingDelete:Mr,onStartMove:rt,onOffsetChange:kr,onFocus:m,onBlur:b,handleRender:oe,activeHandleRender:le,onChangeComplete:de,onDelete:Ge?at:void 0}),C.createElement(sd,{prefixCls:r,marks:gt,onClick:Un})))});const sc=C.createContext({}),oo=C.forwardRef((n,e)=>{const{open:t,draggingDelete:r}=n,s=C.useRef(null),i=t&&!r,a=C.useRef(null);function o(){bn.cancel(a.current),a.current=null}function c(){a.current=bn(()=>{var u;(u=s.current)===null||u===void 0||u.forceAlign(),a.current=null})}return C.useEffect(()=>(i?c():o(),o),[i,n.title]),C.createElement(Lu,Object.assign({ref:Tl(s,e)},n,{open:i}))}),fd=n=>{const{componentCls:e,antCls:t,controlSize:r,dotSize:s,marginFull:i,marginPart:a,colorFillContentHover:o,handleColorDisabled:c,calc:u,handleSize:h,handleSizeHover:p,handleActiveColor:d,handleActiveOutlineColor:f,handleLineWidth:m,handleLineWidthHover:b,motionDurationMid:y}=n;return{[e]:Object.assign(Object.assign({},qs(n)),{position:"relative",height:r,margin:`${be(a)} ${be(i)}`,padding:0,cursor:"pointer",touchAction:"none","&-vertical":{margin:`${be(i)} ${be(a)}`},[`${e}-rail`]:{position:"absolute",backgroundColor:n.railBg,borderRadius:n.borderRadiusXS,transition:`background-color ${y}`},[`${e}-track,${e}-tracks`]:{position:"absolute",transition:`background-color ${y}`},[`${e}-track`]:{backgroundColor:n.trackBg,borderRadius:n.borderRadiusXS},[`${e}-track-draggable`]:{boxSizing:"content-box",backgroundClip:"content-box",border:"solid rgba(0,0,0,0)"},"&:hover":{[`${e}-rail`]:{backgroundColor:n.railHoverBg},[`${e}-track`]:{backgroundColor:n.trackHoverBg},[`${e}-dot`]:{borderColor:o},[`${e}-handle::after`]:{boxShadow:`0 0 0 ${be(m)} ${n.colorPrimaryBorderHover}`},[`${e}-dot-active`]:{borderColor:n.dotActiveBorderColor}},[`${e}-handle`]:{position:"absolute",width:h,height:h,outline:"none",userSelect:"none","&-dragging-delete":{opacity:0},"&::before":{content:'""',position:"absolute",insetInlineStart:u(m).mul(-1).equal(),insetBlockStart:u(m).mul(-1).equal(),width:u(h).add(u(m).mul(2)).equal(),height:u(h).add(u(m).mul(2)).equal(),backgroundColor:"transparent"},"&::after":{content:'""',position:"absolute",insetBlockStart:0,insetInlineStart:0,width:h,height:h,backgroundColor:n.colorBgElevated,boxShadow:`0 0 0 ${be(m)} ${n.handleColor}`,outline:"0px solid transparent",borderRadius:"50%",cursor:"pointer",transition:`
            inset-inline-start ${y},
            inset-block-start ${y},
            width ${y},
            height ${y},
            box-shadow ${y},
            outline ${y}
          `},"&:hover, &:active, &:focus":{"&::before":{insetInlineStart:u(p).sub(h).div(2).add(b).mul(-1).equal(),insetBlockStart:u(p).sub(h).div(2).add(b).mul(-1).equal(),width:u(p).add(u(b).mul(2)).equal(),height:u(p).add(u(b).mul(2)).equal()},"&::after":{boxShadow:`0 0 0 ${be(b)} ${d}`,outline:`6px solid ${f}`,width:p,height:p,insetInlineStart:n.calc(h).sub(p).div(2).equal(),insetBlockStart:n.calc(h).sub(p).div(2).equal()}}},[`&-lock ${e}-handle`]:{"&::before, &::after":{transition:"none"}},[`${e}-mark`]:{position:"absolute",fontSize:n.fontSize},[`${e}-mark-text`]:{position:"absolute",display:"inline-block",color:n.colorTextDescription,textAlign:"center",wordBreak:"keep-all",cursor:"pointer",userSelect:"none","&-active":{color:n.colorText}},[`${e}-step`]:{position:"absolute",background:"transparent",pointerEvents:"none"},[`${e}-dot`]:{position:"absolute",width:s,height:s,backgroundColor:n.colorBgElevated,border:`${be(m)} solid ${n.dotBorderColor}`,borderRadius:"50%",cursor:"pointer",transition:`border-color ${n.motionDurationSlow}`,pointerEvents:"auto","&-active":{borderColor:n.dotActiveBorderColor}},[`&${e}-disabled`]:{cursor:"not-allowed",[`${e}-rail`]:{backgroundColor:`${n.railBg} !important`},[`${e}-track`]:{backgroundColor:`${n.trackBgDisabled} !important`},[`
          ${e}-dot
        `]:{backgroundColor:n.colorBgElevated,borderColor:n.trackBgDisabled,boxShadow:"none",cursor:"not-allowed"},[`${e}-handle::after`]:{backgroundColor:n.colorBgElevated,cursor:"not-allowed",width:h,height:h,boxShadow:`0 0 0 ${be(m)} ${c}`,insetInlineStart:0,insetBlockStart:0},[`
          ${e}-mark-text,
          ${e}-dot
        `]:{cursor:"not-allowed !important"}},[`&-tooltip ${t}-tooltip-inner`]:{minWidth:"unset"}})}},ic=(n,e)=>{const{componentCls:t,railSize:r,handleSize:s,dotSize:i,marginFull:a,calc:o}=n,c=e?"paddingBlock":"paddingInline",u=e?"width":"height",h=e?"height":"width",p=e?"insetBlockStart":"insetInlineStart",d=e?"top":"insetInlineStart",f=o(r).mul(3).sub(s).div(2).equal(),m=o(s).sub(r).div(2).equal(),b=e?{borderWidth:`${be(m)} 0`,transform:`translateY(${be(o(m).mul(-1).equal())})`}:{borderWidth:`0 ${be(m)}`,transform:`translateX(${be(n.calc(m).mul(-1).equal())})`};return{[c]:r,[h]:o(r).mul(3).equal(),[`${t}-rail`]:{[u]:"100%",[h]:r},[`${t}-track,${t}-tracks`]:{[h]:r},[`${t}-track-draggable`]:Object.assign({},b),[`${t}-handle`]:{[p]:f},[`${t}-mark`]:{insetInlineStart:0,top:0,[d]:o(r).mul(3).add(e?0:a).equal(),[u]:"100%"},[`${t}-step`]:{insetInlineStart:0,top:0,[d]:r,[u]:"100%",[h]:r},[`${t}-dot`]:{position:"absolute",[p]:o(r).sub(i).div(2).equal()}}},gd=n=>{const{componentCls:e,marginPartWithMark:t}=n;return{[`${e}-horizontal`]:Object.assign(Object.assign({},ic(n,!0)),{[`&${e}-with-marks`]:{marginBottom:t}})}},pd=n=>{const{componentCls:e}=n;return{[`${e}-vertical`]:Object.assign(Object.assign({},ic(n,!1)),{height:"100%"})}},md=n=>{const t=n.controlHeightLG/4,r=n.controlHeightSM/2,s=n.lineWidth+1,i=n.lineWidth+1*1.5,a=n.colorPrimary,o=new Vi(a).setA(.2).toRgbString();return{controlSize:t,railSize:4,handleSize:t,handleSizeHover:r,dotSize:8,handleLineWidth:s,handleLineWidthHover:i,railBg:n.colorFillTertiary,railHoverBg:n.colorFillSecondary,trackBg:n.colorPrimaryBorder,trackHoverBg:n.colorPrimaryBorderHover,handleColor:n.colorPrimaryBorder,handleActiveColor:a,handleActiveOutlineColor:o,handleColorDisabled:new Vi(n.colorTextDisabled).onBackground(n.colorBgContainer).toHexString(),dotBorderColor:n.colorBorderSecondary,dotActiveBorderColor:n.colorPrimaryBorder,trackBgDisabled:n.colorBgContainerDisabled}},bd=Ca("Slider",n=>{const e=Sa(n,{marginPart:n.calc(n.controlHeight).sub(n.controlSize).div(2).equal(),marginFull:n.calc(n.controlSize).div(2).equal(),marginPartWithMark:n.calc(n.controlHeightLG).sub(n.controlSize).equal()});return[fd(e),gd(e),pd(e)]},md);function Ai(){const[n,e]=C.useState(!1),t=C.useRef(null),r=()=>{bn.cancel(t.current)},s=i=>{r(),i?e(i):t.current=bn(()=>{e(i)})};return C.useEffect(()=>r,[]),[n,s]}var vd=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};function yd(n,e){return n||n===null?n:e||e===null?e:t=>typeof t=="number"?t.toString():""}const Cd=F.forwardRef((n,e)=>{var t,r,s,i,a,o,c,u,h,p;const{prefixCls:d,range:f,className:m,rootClassName:b,style:y,disabled:E,tooltipPrefixCls:S,tipFormatter:N,tooltipVisible:T,getTooltipPopupContainer:_,tooltipPlacement:P,tooltip:R={},onChangeComplete:K,classNames:U,styles:z}=n,v=vd(n,["prefixCls","range","className","rootClassName","style","disabled","tooltipPrefixCls","tipFormatter","tooltipVisible","getTooltipPopupContainer","tooltipPlacement","tooltip","onChangeComplete","classNames","styles"]),{vertical:O}=n,{direction:w,slider:A,getPrefixCls:$,getPopupContainer:I}=F.useContext(Ea),M=F.useContext(xa),j=E??M,{handleRender:D,direction:H}=F.useContext(sc),Y=(H||w)==="rtl",[ne,ae]=Ai(),[V,W]=Ai(),ee=Object.assign({},R),{open:G,placement:se,getPopupContainer:oe,prefixCls:le,formatter:he}=ee,ge=G??T,ve=(ne||V)&&ge!==!1,ye=yd(he,N),[Ue,Pe]=Ai(),Ze=we=>{K==null||K(we),Pe(!1)},qe=(we,et)=>we||(et?Y?"left":"right":"top"),Le=$("slider",d),[Ve,it,Ke]=bd(Le),Re=Ee(m,A==null?void 0:A.className,(t=A==null?void 0:A.classNames)===null||t===void 0?void 0:t.root,U==null?void 0:U.root,b,{[`${Le}-rtl`]:Y,[`${Le}-lock`]:Ue},it,Ke);Y&&!v.vertical&&(v.reverse=!v.reverse),F.useEffect(()=>{const we=()=>{bn(()=>{W(!1)},1)};return document.addEventListener("mouseup",we),()=>{document.removeEventListener("mouseup",we)}},[]);const Ge=f&&!ge,ct=D||((we,et)=>{const{index:gt}=et,Et=we.props;function tt(Ae,$e,kt){var Z,J,pe,de;kt&&((J=(Z=v)[Ae])===null||J===void 0||J.call(Z,$e)),(de=(pe=Et)[Ae])===null||de===void 0||de.call(pe,$e)}const Ne=Object.assign(Object.assign({},Et),{onMouseEnter:Ae=>{ae(!0),tt("onMouseEnter",Ae)},onMouseLeave:Ae=>{ae(!1),tt("onMouseLeave",Ae)},onMouseDown:Ae=>{W(!0),Pe(!0),tt("onMouseDown",Ae)},onFocus:Ae=>{var $e;W(!0),($e=v.onFocus)===null||$e===void 0||$e.call(v,Ae),tt("onFocus",Ae,!0)},onBlur:Ae=>{var $e;W(!1),($e=v.onBlur)===null||$e===void 0||$e.call(v,Ae),tt("onBlur",Ae,!0)}}),ke=F.cloneElement(we,Ne),Ye=(!!ge||ve)&&ye!==null;return Ge?ke:F.createElement(oo,Object.assign({},ee,{prefixCls:$("tooltip",le??S),title:ye?ye(et.value):"",open:Ye,placement:qe(se??P,O),key:gt,classNames:{root:`${Le}-tooltip`},getPopupContainer:oe||_||I}),ke)}),We=Ge?(we,et)=>{const gt=F.cloneElement(we,{style:Object.assign(Object.assign({},we.props.style),{visibility:"hidden"})});return F.createElement(oo,Object.assign({},ee,{prefixCls:$("tooltip",le??S),title:ye?ye(et.value):"",open:ye!==null&&ve,placement:qe(se??P,O),key:"tooltip",classNames:{root:`${Le}-tooltip`},getPopupContainer:oe||_||I,draggingDelete:et.draggingDelete}),gt)}:void 0,Xe=Object.assign(Object.assign(Object.assign(Object.assign({},(r=A==null?void 0:A.styles)===null||r===void 0?void 0:r.root),A==null?void 0:A.style),z==null?void 0:z.root),y),Me=Object.assign(Object.assign({},(s=A==null?void 0:A.styles)===null||s===void 0?void 0:s.tracks),z==null?void 0:z.tracks),Ie=Ee((i=A==null?void 0:A.classNames)===null||i===void 0?void 0:i.tracks,U==null?void 0:U.tracks);return Ve(F.createElement(dd,Object.assign({},v,{classNames:Object.assign({handle:Ee((a=A==null?void 0:A.classNames)===null||a===void 0?void 0:a.handle,U==null?void 0:U.handle),rail:Ee((o=A==null?void 0:A.classNames)===null||o===void 0?void 0:o.rail,U==null?void 0:U.rail),track:Ee((c=A==null?void 0:A.classNames)===null||c===void 0?void 0:c.track,U==null?void 0:U.track)},Ie?{tracks:Ie}:{}),styles:Object.assign({handle:Object.assign(Object.assign({},(u=A==null?void 0:A.styles)===null||u===void 0?void 0:u.handle),z==null?void 0:z.handle),rail:Object.assign(Object.assign({},(h=A==null?void 0:A.styles)===null||h===void 0?void 0:h.rail),z==null?void 0:z.rail),track:Object.assign(Object.assign({},(p=A==null?void 0:A.styles)===null||p===void 0?void 0:p.track),z==null?void 0:z.track)},Object.keys(Me).length?{tracks:Me}:{}),step:v.step,range:f,className:Re,style:Xe,disabled:j,ref:e,prefixCls:Le,handleRender:ct,activeHandleRender:We,onChangeComplete:Ze})))});var Sd=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const ac=n=>{const{prefixCls:e,colors:t,type:r,color:s,range:i=!1,className:a,activeIndex:o,onActive:c,onDragStart:u,onDragChange:h,onKeyDelete:p}=n,d=Sd(n,["prefixCls","colors","type","color","range","className","activeIndex","onActive","onDragStart","onDragChange","onKeyDelete"]),f=Object.assign(Object.assign({},d),{track:!1}),m=C.useMemo(()=>`linear-gradient(90deg, ${t.map(P=>`${P.color} ${P.percent}%`).join(", ")})`,[t]),b=C.useMemo(()=>!s||!r?null:r==="alpha"?s.toRgbString():`hsl(${s.toHsb().h}, 100%, 50%)`,[s,r]),y=rn(u),E=rn(h),S=C.useMemo(()=>({onDragStart:y,onDragChange:E}),[]),N=rn((_,P)=>{const{onFocus:R,style:K,className:U,onKeyDown:z}=_.props,v=Object.assign({},K);return r==="gradient"&&(v.background=$l(t,P.value)),C.cloneElement(_,{onFocus:O=>{c==null||c(P.index),R==null||R(O)},style:v,className:Ee(U,{[`${e}-slider-handle-active`]:o===P.index}),onKeyDown:O=>{(O.key==="Delete"||O.key==="Backspace")&&p&&p(P.index),z==null||z(O)}})}),T=C.useMemo(()=>({direction:"ltr",handleRender:N}),[]);return C.createElement(sc.Provider,{value:T},C.createElement(rc.Provider,{value:S},C.createElement(Cd,Object.assign({},f,{className:Ee(a,`${e}-slider`),tooltip:{open:!1},range:{editable:i,minCount:2},styles:{rail:{background:m},handle:b?{background:b}:{}},classNames:{rail:`${e}-slider-rail`,handle:`${e}-slider-handle`}}))))},Ed=n=>{const{value:e,onChange:t,onChangeComplete:r}=n,s=a=>t(a[0]),i=a=>r(a[0]);return C.createElement(ac,Object.assign({},n,{value:[e],onChange:s,onChangeComplete:i}))};function lo(n){return wt(n).sort((e,t)=>e.percent-t.percent)}const xd=n=>{const{prefixCls:e,mode:t,onChange:r,onChangeComplete:s,onActive:i,activeIndex:a,onGradientDragging:o,colors:c}=n,u=t==="gradient",h=C.useMemo(()=>c.map(E=>({percent:E.percent,color:E.color.toRgbString()})),[c]),p=C.useMemo(()=>h.map(E=>E.percent),[h]),d=C.useRef(h),f=E=>{let{rawValues:S,draggingIndex:N,draggingValue:T}=E;if(S.length>h.length){const _=$l(h,T),P=wt(h);P.splice(N,0,{percent:T,color:_}),d.current=P}else d.current=h;o(!0),r(new nn(lo(d.current)),!0)},m=E=>{let{deleteIndex:S,draggingIndex:N,draggingValue:T}=E,_=wt(d.current);S!==-1?_.splice(S,1):(_[N]=Object.assign(Object.assign({},_[N]),{percent:T}),_=lo(_)),r(new nn(_),!0)},b=E=>{const S=wt(h);S.splice(E,1);const N=new nn(S);r(N),s(N)},y=E=>{s(new nn(h)),a>=E.length&&i(E.length-1),o(!1)};return u?C.createElement(ac,{min:0,max:100,prefixCls:e,className:`${e}-gradient-slider`,colors:h,color:null,value:p,range:!0,onChangeComplete:y,disabled:!1,type:"gradient",activeIndex:a,onActive:i,onDragStart:f,onDragChange:m,onKeyDelete:b}):null},wd=C.memo(xd);var Nd=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const Ad={slider:Ed},co=()=>{const n=C.useContext(Yl),{mode:e,onModeChange:t,modeOptions:r,prefixCls:s,allowClear:i,value:a,disabledAlpha:o,onChange:c,onClear:u,onChangeComplete:h,activeIndex:p,gradientDragging:d}=n,f=Nd(n,["mode","onModeChange","modeOptions","prefixCls","allowClear","value","disabledAlpha","onChange","onClear","onChangeComplete","activeIndex","gradientDragging"]),m=F.useMemo(()=>a.cleared?[{percent:0,color:new nn("")},{percent:100,color:new nn("")}]:a.getColors(),[a]),b=!a.isGradient(),[y,E]=F.useState(a);Hs(()=>{var A;b||E((A=m[p])===null||A===void 0?void 0:A.color)},[d,p]);const S=F.useMemo(()=>{var A;return b?a:d?y:(A=m[p])===null||A===void 0?void 0:A.color},[a,p,b,y,d]),[N,T]=F.useState(S),[_,P]=F.useState(0),R=N!=null&&N.equals(S)?S:N;Hs(()=>{T(S)},[_,S==null?void 0:S.toHexString()]);const K=(A,$)=>{let I=qt(A);if(a.cleared){const j=I.toRgb();if(!j.r&&!j.g&&!j.b&&$){const{type:D,value:H=0}=$;I=new nn({h:D==="hue"?H:0,s:1,b:1,a:D==="alpha"?H/100:1})}else I=Ms(I)}if(e==="single")return I;const M=wt(m);return M[p]=Object.assign(Object.assign({},M[p]),{color:I}),new nn(M)},U=(A,$,I)=>{const M=K(A,I);T(M.isGradient()?M.getColors()[p].color:M),c(M,$)},z=(A,$)=>{h(K(A,$)),P(I=>I+1)},v=A=>{c(K(A))};let O=null;const w=r.length>1;return(i||w)&&(O=F.createElement("div",{className:`${s}-operation`},w&&F.createElement(ju,{size:"small",options:r,value:e,onChange:t}),F.createElement(Jl,Object.assign({prefixCls:s,value:a,onChange:A=>{c(A),u==null||u()}},f)))),F.createElement(F.Fragment,null,O,F.createElement(wd,Object.assign({},n,{colors:m})),F.createElement(Ah,{prefixCls:s,value:R==null?void 0:R.toHsb(),disabledAlpha:o,onChange:(A,$)=>{U(A,!0,$)},onChangeComplete:(A,$)=>{z(A,$)},components:Ad}),F.createElement(Jh,Object.assign({value:S,onChange:v,prefixCls:s,disabledAlpha:o},f)))},uo=()=>{const{prefixCls:n,value:e,presets:t,onChange:r}=C.useContext(Ql);return Array.isArray(t)?F.createElement(Iu,{value:e,presets:t,prefixCls:n,onChange:r}):null},Td=n=>{const{prefixCls:e,presets:t,panelRender:r,value:s,onChange:i,onClear:a,allowClear:o,disabledAlpha:c,mode:u,onModeChange:h,modeOptions:p,onChangeComplete:d,activeIndex:f,onActive:m,format:b,onFormatChange:y,gradientDragging:E,onGradientDragging:S,disabledFormat:N}=n,T=`${e}-inner`,_=F.useMemo(()=>({prefixCls:e,value:s,onChange:i,onClear:a,allowClear:o,disabledAlpha:c,mode:u,onModeChange:h,modeOptions:p,onChangeComplete:d,activeIndex:f,onActive:m,format:b,onFormatChange:y,gradientDragging:E,onGradientDragging:S,disabledFormat:N}),[e,s,i,a,o,c,u,h,p,d,f,m,b,y,E,S,N]),P=F.useMemo(()=>({prefixCls:e,value:s,presets:t,onChange:i}),[e,s,t,i]),R=F.createElement("div",{className:`${T}-content`},F.createElement(co,null),Array.isArray(t)&&F.createElement(hh,null),F.createElement(uo,null));return F.createElement(Yl.Provider,{value:_},F.createElement(Ql.Provider,{value:P},F.createElement("div",{className:T},typeof r=="function"?r(R,{components:{Picker:co,Presets:uo}}):R)))};var Od=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const _d=C.forwardRef((n,e)=>{const{color:t,prefixCls:r,open:s,disabled:i,format:a,className:o,showText:c,activeIndex:u}=n,h=Od(n,["color","prefixCls","open","disabled","format","className","showText","activeIndex"]),p=`${r}-trigger`,d=`${p}-text`,f=`${d}-cell`,[m]=ql("ColorPicker"),b=F.useMemo(()=>{if(!c)return"";if(typeof c=="function")return c(t);if(t.cleared)return m.transparent;if(t.isGradient())return t.getColors().map((N,T)=>{const _=u!==-1&&u!==T;return F.createElement("span",{key:T,className:Ee(f,_&&`${f}-inactive`)},N.color.toRgbString()," ",N.percent,"%")});const E=t.toHexString().toUpperCase(),S=wa(t);switch(a){case"rgb":return t.toRgbString();case"hsb":return t.toHsbString();default:return S<100?`${E.slice(0,7)},${S}%`:E}},[t,a,c,u]),y=C.useMemo(()=>t.cleared?F.createElement(Jl,{prefixCls:r}):F.createElement(xl,{prefixCls:r,color:t.toCssString()}),[t,r]);return F.createElement("div",Object.assign({ref:e,className:Ee(p,o,{[`${p}-active`]:s,[`${p}-disabled`]:i})},Ru(h)),y,c&&F.createElement("div",{className:d},b))});function Ld(n,e,t){const[r]=ql("ColorPicker"),[s,i]=Or(n,{value:e}),[a,o]=C.useState("single"),[c,u]=C.useMemo(()=>{const b=(Array.isArray(t)?t:[t]).filter(N=>N);b.length||b.push("single");const y=new Set(b),E=[],S=(N,T)=>{y.has(N)&&E.push({label:T,value:N})};return S("single",r.singleColor),S("gradient",r.gradientColor),[E,y]},[t]),[h,p]=C.useState(null),d=rn(b=>{p(b),i(b)}),f=C.useMemo(()=>{const b=qt(s||"");return b.equals(h)?h:b},[s,h]),m=C.useMemo(()=>{var b;return u.has(a)?a:(b=c[0])===null||b===void 0?void 0:b.value},[u,a,c]);return C.useEffect(()=>{o(f.isGradient()?"gradient":"single")},[f]),[f,d,m,o,c]}const oc=(n,e)=>({backgroundImage:`conic-gradient(${e} 0 25%, transparent 0 50%, ${e} 0 75%, transparent 0)`,backgroundSize:`${n} ${n}`}),ho=(n,e)=>{const{componentCls:t,borderRadiusSM:r,colorPickerInsetShadow:s,lineWidth:i,colorFillSecondary:a}=n;return{[`${t}-color-block`]:Object.assign(Object.assign({position:"relative",borderRadius:r,width:e,height:e,boxShadow:s,flex:"none"},oc("50%",n.colorFillSecondary)),{[`${t}-color-block-inner`]:{width:"100%",height:"100%",boxShadow:`inset 0 0 0 ${be(i)} ${a}`,borderRadius:"inherit"}})}},Id=n=>{const{componentCls:e,antCls:t,fontSizeSM:r,lineHeightSM:s,colorPickerAlphaInputWidth:i,marginXXS:a,paddingXXS:o,controlHeightSM:c,marginXS:u,fontSizeIcon:h,paddingXS:p,colorTextPlaceholder:d,colorPickerInputNumberHandleWidth:f,lineWidth:m}=n;return{[`${e}-input-container`]:{display:"flex",[`${e}-steppers${t}-input-number`]:{fontSize:r,lineHeight:s,[`${t}-input-number-input`]:{paddingInlineStart:o,paddingInlineEnd:0},[`${t}-input-number-handler-wrap`]:{width:f}},[`${e}-steppers${e}-alpha-input`]:{flex:`0 0 ${be(i)}`,marginInlineStart:a},[`${e}-format-select${t}-select`]:{marginInlineEnd:u,width:"auto","&-single":{[`${t}-select-selector`]:{padding:0,border:0},[`${t}-select-arrow`]:{insetInlineEnd:0},[`${t}-select-selection-item`]:{paddingInlineEnd:n.calc(h).add(a).equal(),fontSize:r,lineHeight:be(c)},[`${t}-select-item-option-content`]:{fontSize:r,lineHeight:s},[`${t}-select-dropdown`]:{[`${t}-select-item`]:{minHeight:"auto"}}}},[`${e}-input`]:{gap:a,alignItems:"center",flex:1,width:0,[`${e}-hsb-input,${e}-rgb-input`]:{display:"flex",gap:a,alignItems:"center"},[`${e}-steppers`]:{flex:1},[`${e}-hex-input${t}-input-affix-wrapper`]:{flex:1,padding:`0 ${be(p)}`,[`${t}-input`]:{fontSize:r,textTransform:"uppercase",lineHeight:be(n.calc(c).sub(n.calc(m).mul(2)).equal())},[`${t}-input-prefix`]:{color:d}}}}}},Rd=n=>{const{componentCls:e,controlHeightLG:t,borderRadiusSM:r,colorPickerInsetShadow:s,marginSM:i,colorBgElevated:a,colorFillSecondary:o,lineWidthBold:c,colorPickerHandlerSize:u}=n;return{userSelect:"none",[`${e}-select`]:{[`${e}-palette`]:{minHeight:n.calc(t).mul(4).equal(),overflow:"hidden",borderRadius:r},[`${e}-saturation`]:{position:"absolute",borderRadius:"inherit",boxShadow:s,inset:0},marginBottom:i},[`${e}-handler`]:{width:u,height:u,border:`${be(c)} solid ${a}`,position:"relative",borderRadius:"50%",cursor:"pointer",boxShadow:`${s}, 0 0 0 1px ${o}`}}},$d=n=>{const{componentCls:e,antCls:t,colorTextQuaternary:r,paddingXXS:s,colorPickerPresetColorSize:i,fontSizeSM:a,colorText:o,lineHeightSM:c,lineWidth:u,borderRadius:h,colorFill:p,colorWhite:d,marginXXS:f,paddingXS:m,fontHeightSM:b}=n;return{[`${e}-presets`]:{[`${t}-collapse-item > ${t}-collapse-header`]:{padding:0,[`${t}-collapse-expand-icon`]:{height:b,color:r,paddingInlineEnd:s}},[`${t}-collapse`]:{display:"flex",flexDirection:"column",gap:f},[`${t}-collapse-item > ${t}-collapse-content > ${t}-collapse-content-box`]:{padding:`${be(m)} 0`},"&-label":{fontSize:a,color:o,lineHeight:c},"&-items":{display:"flex",flexWrap:"wrap",gap:n.calc(f).mul(1.5).equal(),[`${e}-presets-color`]:{position:"relative",cursor:"pointer",width:i,height:i,"&::before":{content:'""',pointerEvents:"none",width:n.calc(i).add(n.calc(u).mul(4)).equal(),height:n.calc(i).add(n.calc(u).mul(4)).equal(),position:"absolute",top:n.calc(u).mul(-2).equal(),insetInlineStart:n.calc(u).mul(-2).equal(),borderRadius:h,border:`${be(u)} solid transparent`,transition:`border-color ${n.motionDurationMid} ${n.motionEaseInBack}`},"&:hover::before":{borderColor:p},"&::after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"21.5%",display:"table",width:n.calc(i).div(13).mul(5).equal(),height:n.calc(i).div(13).mul(8).equal(),border:`${be(n.lineWidthBold)} solid ${n.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${n.motionDurationFast} ${n.motionEaseInBack}, opacity ${n.motionDurationFast}`},[`&${e}-presets-color-checked`]:{"&::after":{opacity:1,borderColor:d,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`transform ${n.motionDurationMid} ${n.motionEaseOutBack} ${n.motionDurationFast}`},[`&${e}-presets-color-bright`]:{"&::after":{borderColor:"rgba(0, 0, 0, 0.45)"}}}}},"&-empty":{fontSize:a,color:r}}}},qd=n=>{const{componentCls:e,colorPickerInsetShadow:t,colorBgElevated:r,colorFillSecondary:s,lineWidthBold:i,colorPickerHandlerSizeSM:a,colorPickerSliderHeight:o,marginSM:c,marginXS:u}=n,h=n.calc(a).sub(n.calc(i).mul(2).equal()).equal(),p=n.calc(a).add(n.calc(i).mul(2).equal()).equal(),d={"&:after":{transform:"scale(1)",boxShadow:`${t}, 0 0 0 1px ${n.colorPrimaryActive}`}};return{[`${e}-slider`]:[oc(be(o),n.colorFillSecondary),{margin:0,padding:0,height:o,borderRadius:n.calc(o).div(2).equal(),"&-rail":{height:o,borderRadius:n.calc(o).div(2).equal(),boxShadow:t},[`& ${e}-slider-handle`]:{width:h,height:h,top:0,borderRadius:"100%","&:before":{display:"block",position:"absolute",background:"transparent",left:{_skip_check_:!0,value:"50%"},top:"50%",transform:"translate(-50%, -50%)",width:p,height:p,borderRadius:"100%"},"&:after":{width:a,height:a,border:`${be(i)} solid ${r}`,boxShadow:`${t}, 0 0 0 1px ${s}`,outline:"none",insetInlineStart:n.calc(i).mul(-1).equal(),top:n.calc(i).mul(-1).equal(),background:"transparent",transition:"none"},"&:focus":d}}],[`${e}-slider-container`]:{display:"flex",gap:c,marginBottom:c,[`${e}-slider-group`]:{flex:1,flexDirection:"column",justifyContent:"space-between",display:"flex","&-disabled-alpha":{justifyContent:"center"}}},[`${e}-gradient-slider`]:{marginBottom:u,[`& ${e}-slider-handle`]:{"&:after":{transform:"scale(0.8)"},"&-active, &:focus":d}}}},Zi=(n,e,t)=>({borderInlineEndWidth:n.lineWidth,borderColor:e,boxShadow:`0 0 0 ${be(n.controlOutlineWidth)} ${t}`,outline:0}),Md=n=>{const{componentCls:e}=n;return{"&-rtl":{[`${e}-presets-color`]:{"&::after":{direction:"ltr"}},[`${e}-clear`]:{"&::after":{direction:"ltr"}}}}},fo=(n,e,t)=>{const{componentCls:r,borderRadiusSM:s,lineWidth:i,colorSplit:a,colorBorder:o,red6:c}=n;return{[`${r}-clear`]:Object.assign(Object.assign({width:e,height:e,borderRadius:s,border:`${be(i)} solid ${a}`,position:"relative",overflow:"hidden",cursor:"inherit",transition:`all ${n.motionDurationFast}`},t),{"&::after":{content:'""',position:"absolute",insetInlineEnd:n.calc(i).mul(-1).equal(),top:n.calc(i).mul(-1).equal(),display:"block",width:40,height:2,transformOrigin:"calc(100% - 1px) 1px",transform:"rotate(-45deg)",backgroundColor:c},"&:hover":{borderColor:o}})}},kd=n=>{const{componentCls:e,colorError:t,colorWarning:r,colorErrorHover:s,colorWarningHover:i,colorErrorOutline:a,colorWarningOutline:o}=n;return{[`&${e}-status-error`]:{borderColor:t,"&:hover":{borderColor:s},[`&${e}-trigger-active`]:Object.assign({},Zi(n,t,a))},[`&${e}-status-warning`]:{borderColor:r,"&:hover":{borderColor:i},[`&${e}-trigger-active`]:Object.assign({},Zi(n,r,o))}}},Dd=n=>{const{componentCls:e,controlHeightLG:t,controlHeightSM:r,controlHeight:s,controlHeightXS:i,borderRadius:a,borderRadiusSM:o,borderRadiusXS:c,borderRadiusLG:u,fontSizeLG:h}=n;return{[`&${e}-lg`]:{minWidth:t,minHeight:t,borderRadius:u,[`${e}-color-block, ${e}-clear`]:{width:s,height:s,borderRadius:a},[`${e}-trigger-text`]:{fontSize:h}},[`&${e}-sm`]:{minWidth:r,minHeight:r,borderRadius:o,[`${e}-color-block, ${e}-clear`]:{width:i,height:i,borderRadius:c},[`${e}-trigger-text`]:{lineHeight:be(i)}}}},jd=n=>{const{antCls:e,componentCls:t,colorPickerWidth:r,colorPrimary:s,motionDurationMid:i,colorBgElevated:a,colorTextDisabled:o,colorText:c,colorBgContainerDisabled:u,borderRadius:h,marginXS:p,marginSM:d,controlHeight:f,controlHeightSM:m,colorBgTextActive:b,colorPickerPresetColorSize:y,colorPickerPreviewSize:E,lineWidth:S,colorBorder:N,paddingXXS:T,fontSize:_,colorPrimaryHover:P,controlOutline:R}=n;return[{[t]:Object.assign({[`${t}-inner`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({"&-content":{display:"flex",flexDirection:"column",width:r,[`& > ${e}-divider`]:{margin:`${be(d)} 0 ${be(p)}`}},[`${t}-panel`]:Object.assign({},Rd(n))},qd(n)),ho(n,E)),Id(n)),$d(n)),fo(n,y,{marginInlineStart:"auto"})),{[`${t}-operation`]:{display:"flex",justifyContent:"space-between",marginBottom:p}}),"&-trigger":Object.assign(Object.assign(Object.assign(Object.assign({minWidth:f,minHeight:f,borderRadius:h,border:`${be(S)} solid ${N}`,cursor:"pointer",display:"inline-flex",alignItems:"flex-start",justifyContent:"center",transition:`all ${i}`,background:a,padding:n.calc(T).sub(S).equal(),[`${t}-trigger-text`]:{marginInlineStart:p,marginInlineEnd:n.calc(p).sub(n.calc(T).sub(S)).equal(),fontSize:_,color:c,alignSelf:"center","&-cell":{"&:not(:last-child):after":{content:'", "'},"&-inactive":{color:o}}},"&:hover":{borderColor:P},[`&${t}-trigger-active`]:Object.assign({},Zi(n,s,R)),"&-disabled":{color:o,background:u,cursor:"not-allowed","&:hover":{borderColor:b},[`${t}-trigger-text`]:{color:o}}},fo(n,m)),ho(n,m)),kd(n)),Dd(n))},Md(n))},Ol(n,{focusElCls:`${t}-trigger-active`})]},Pd=Ca("ColorPicker",n=>{const{colorTextQuaternary:e,marginSM:t}=n,r=8,s=Sa(n,{colorPickerWidth:234,colorPickerHandlerSize:16,colorPickerHandlerSizeSM:12,colorPickerAlphaInputWidth:44,colorPickerInputNumberHandleWidth:16,colorPickerPresetColorSize:24,colorPickerInsetShadow:`inset 0 0 1px 0 ${e}`,colorPickerSliderHeight:r,colorPickerPreviewSize:n.calc(r).mul(2).add(t).equal()});return[jd(s)]});var Bd=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const ei=n=>{const{mode:e,value:t,defaultValue:r,format:s,defaultFormat:i,allowClear:a=!1,presets:o,children:c,trigger:u="click",open:h,disabled:p,placement:d="bottomLeft",arrow:f=!0,panelRender:m,showText:b,style:y,className:E,size:S,rootClassName:N,prefixCls:T,styles:_,disabledAlpha:P=!1,onFormatChange:R,onChange:K,onClear:U,onOpenChange:z,onChangeComplete:v,getPopupContainer:O,autoAdjustOverflow:w=!0,destroyTooltipOnHide:A,disabledFormat:$}=n,I=Bd(n,["mode","value","defaultValue","format","defaultFormat","allowClear","presets","children","trigger","open","disabled","placement","arrow","panelRender","showText","style","className","size","rootClassName","prefixCls","styles","disabledAlpha","onFormatChange","onChange","onClear","onOpenChange","onChangeComplete","getPopupContainer","autoAdjustOverflow","destroyTooltipOnHide","disabledFormat"]),{getPrefixCls:M,direction:j,colorPicker:D}=C.useContext(Ea),H=C.useContext(xa),te=p??H,[Y,ne]=Or(!1,{value:h,postState:Ne=>!te&&Ne,onChange:z}),[ae,V]=Or(s,{value:s,defaultValue:i,onChange:R}),W=M("color-picker",T),[ee,G,se,oe,le]=Ld(r,t,e),he=C.useMemo(()=>wa(ee)<100,[ee]),[ge,ve]=F.useState(null),ye=Ne=>{if(v){let ke=qt(Ne);P&&he&&(ke=Ms(Ne)),v(ke)}},Ue=(Ne,ke)=>{let Ye=qt(Ne);P&&he&&(Ye=Ms(Ye)),G(Ye),ve(null),K&&K(Ye,Ye.toCssString()),ke||ye(Ye)},[Pe,Ze]=F.useState(0),[qe,Le]=F.useState(!1),Ve=Ne=>{if(oe(Ne),Ne==="single"&&ee.isGradient())Ze(0),Ue(new nn(ee.getColors()[0].color)),ve(ee);else if(Ne==="gradient"&&!ee.isGradient()){const ke=he?Ms(ee):ee;Ue(new nn(ge||[{percent:0,color:ke},{percent:100,color:ke}]))}},{status:it}=F.useContext(Il),{compactSize:Ke,compactItemClassnames:Re}=Ll(W,j),Ge=Rl(Ne=>{var ke;return(ke=S??Ke)!==null&&ke!==void 0?ke:Ne}),ct=_l(W),[We,Xe,Me]=Pd(W,ct),Ie={[`${W}-rtl`]:j},we=Ee(N,Me,ct,Ie),et=Ee(Ki(W,it),{[`${W}-sm`]:Ge==="small",[`${W}-lg`]:Ge==="large"},Re,D==null?void 0:D.className,we,E,Xe),gt=Ee(W,we),Et={open:Y,trigger:u,placement:d,arrow:f,rootClassName:N,getPopupContainer:O,autoAdjustOverflow:w,destroyTooltipOnHide:A},tt=Object.assign(Object.assign({},D==null?void 0:D.style),y);return We(F.createElement(uh,Object.assign({style:_==null?void 0:_.popup,styles:{body:_==null?void 0:_.popupOverlayInner},onOpenChange:Ne=>{(!Ne||!te)&&ne(Ne)},content:F.createElement(Gi,{form:!0},F.createElement(Td,{mode:se,onModeChange:Ve,modeOptions:le,prefixCls:W,value:ee,allowClear:a,disabled:te,disabledAlpha:P,presets:o,panelRender:m,format:ae,onFormatChange:V,onChange:Ue,onChangeComplete:ye,onClear:U,activeIndex:Pe,onActive:Ze,gradientDragging:qe,onGradientDragging:Le,disabledFormat:$})),classNames:{root:gt}},Et),c||F.createElement(_d,Object.assign({activeIndex:Y?Pe:-1,open:Y,className:et,style:tt,prefixCls:W,disabled:te,showText:b,format:ae},I,{color:ee}))))},Hd=ch(ei,void 0,n=>Object.assign(Object.assign({},n),{placement:"bottom",autoAdjustOverflow:!1}),"color-picker",n=>n);ei._InternalPanelDoNotUseOrYouWillBeFired=Hd;globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};function Fd(){const n=Dn(),{error:e,isPending:t,mutateAsync:r}=jn({mutationFn:async s=>En("custom-apps/save",s,void 0,"POST"),mutationKey:["saveCustomApp"],onSuccess:s=>{!s||s.status==="error"||n.setQueryData(["customApps"],i=>i?wn(i,a=>{a.data.unshift(s.data)}):{code:"SUCCESS",data:[s.data],status:"success"})}});return{error:e,isSavingCustomApp:t,saveCustomApp:r}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};const $a=Vu(n=>({activeKey:void 0,addModuleCustomAppId:void 0,handleCustomAppCreated:e=>{n(wn(t=>{Array.isArray(t.activeKey)?t.activeKey.push(e):t.activeKey=[e],t.addModuleCustomAppId=e}))},setActiveKey:e=>{n(t=>({...t,activeKey:e}))},setAddModuleCustomAppId:e=>{n(t=>({...t,addModuleCustomAppId:e}))}}));globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};const go={color:"#eeeeee",name:"Custom app"},{Text:Ti}=Kt;function Ud(){var y,E,S,N,T,_,P,R,K,U,z,v;const[n,e]=C.useState(!1),{handleCustomAppCreated:t}=$a(),[r,s]=Ys(go),{error:i,isSavingCustomApp:a,saveCustomApp:o}=Fd(),{messageApi:c}=C.useContext(xn),[u,h]=C.useState(!1),p=()=>{e(!0)},d=()=>{e(!1)},f=async O=>{O.preventDefault();const{data:w}=await o(r);d(),s(go),c==null||c.success("App created successfully"),t(w.id)},m=()=>{if(typeof wp<"u"&&wp.media){const O=wp.media({button:{text:"Select logo"},library:{type:"image"},multiple:!1,title:B("Media")});O.on("select",()=>{const w=O.state().get("selection").first().toJSON();s(A=>{A.logo=w.url})}),O.open()}},b=(O,w)=>{s(A=>{A[O]=w})};return fe(os,{children:[fe("div",{className:"flex items-center gap-1",children:[L(ze,{"data-testid":"add-apps",icon:L(Ml,{}),onClick:p,children:B("Create new app")}),L(ze,{disabled:!$n.IS_PRO,icon:L($u,{}),onClick:()=>h(!0),children:B("Import")}),L(Zs,{}),L(Pu,{isOpen:u,setIsOpen:h,title:B("Custom App Import"),url:"pro_custom-app-import"})]}),L(Qs,{destroyOnClose:!0,footer:null,maskClosable:!0,onCancel:d,open:n,title:B("Create an app"),width:600,children:fe("form",{onSubmit:f,children:[L(Mt,{"data-testid":"app-name",invalidMessage:(E=(y=i==null?void 0:i.data)==null?void 0:y.name)==null?void 0:E[0],label:B("App Name"),onChange:O=>b("name",O.target.value),required:!0,status:((S=i==null?void 0:i.data)==null?void 0:S.name)&&"error",value:r.name,wrapperClassName:"mb-3"}),L(Mt,{"data-testid":"app-description",invalidMessage:(T=(N=i==null?void 0:i.data)==null?void 0:N.description)==null?void 0:T[0],label:B("Description"),onChange:O=>b("description",O.target.value),status:((_=i==null?void 0:i.data)==null?void 0:_.description)&&"error",value:r.description,wrapperClassName:"mb-3"}),fe(on,{className:"mb-3",gap:15,children:[fe("div",{className:"w-100",children:[L("div",{className:"mb-1",children:B("Logo")}),fe(vn,{children:[L(Oa,{css:Xs({"& img":{objectFit:"contain !important"}},"",""),size:40,src:r==null?void 0:r.logo,style:{background:r.color,padding:6}}),L(ze,{icon:L(kl,{}),onClick:m,children:B("Select Logo")})]}),L("br",{}),L(Ti,{type:"secondary",children:B("PNG format, max dimensions 512 x 512 px")}),L("br",{}),((P=i==null?void 0:i.data)==null?void 0:P.logo)&&L(Ti,{type:"danger",children:(K=(R=i==null?void 0:i.data)==null?void 0:R.logo)==null?void 0:K[0]})]}),fe("div",{className:"w-100",children:[L(Kt,{className:"mb-1",children:B("Theme")}),L(ei,{disabledAlpha:!0,onChangeComplete:O=>b("color",O.toHexString()),showText:!0,value:r.color}),L("br",{}),((U=i==null?void 0:i.data)==null?void 0:U.color)&&L(Ti,{type:"danger",children:(v=(z=i==null?void 0:i.data)==null?void 0:z.color)==null?void 0:v[0]})]})]}),fe(on,{gap:8,justify:"end",children:[L(ze,{onClick:d,children:B("Cancel")}),L(ze,{"data-testid":"add-apps-submit",htmlType:"submit",loading:a,type:"primary",children:B("Create")})]})]})})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};function zd(){const{data:n,isLoading:e,isPending:t}=qu({queryFn:()=>En("custom-apps",void 0,void 0,"GET"),queryKey:["customApps"],select:r=>r.data});return{customApps:n,isCustomAppLoading:e,isCustomAppPending:t}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};function Vd(){const n=Dn(),{messageApi:e}=C.useContext(xn),{isPending:t,mutateAsync:r}=jn({mutationFn:async s=>En(`custom-apps/${s}/delete`),mutationKey:["deleteCustomApps"],onMutate:async s=>{await n.cancelQueries({queryKey:["customApps"]});const i=n.getQueryData(["customApps"]);return n.setQueryData(["customApps"],a=>a&&wn(a,o=>{o.data=o.data.filter(({id:c})=>c!==s)})),{previousData:i}},onError:(s,i,a)=>{a!=null&&a.previousData&&n.setQueryData(["customApps"],a.previousData),e==null||e.warning(s.data)}});return{deleteCustomApps:r,isCustomAppsDeleting:t}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};function Gd(){const n=Dn(),{messageApi:e}=C.useContext(xn),{isPending:t,mutateAsync:r}=jn({mutationFn:async s=>En(`pro_custom-machines/${s}/delete`),mutationKey:["deleteModules"],onMutate:async s=>{await n.cancelQueries({queryKey:["customApps"]});const i=n.getQueryData(["customApps"]);return n.setQueryData(["customApps"],a=>a&&wn(a,o=>{o.data=o.data.map(c=>{var u;return{...c,customMachines:(u=c.customMachines)==null?void 0:u.filter(h=>h.id!==s)}})})),{previousData:i}},onError:(s,i,a)=>{a!=null&&a.previousData&&n.setQueryData(["customApps"],a.previousData),e==null||e.warning(s.data)}});return{deleteModules:r,isModulesDeleting:t}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};function Kd(){const n=Dn(),{messageApi:e}=C.useContext(xn),{isPending:t,mutateAsync:r}=jn({mutationFn:async({customAppId:s,status:i})=>En(`custom-apps/${s}/update-status`,{status:i},void 0,"POST"),mutationKey:["updateCustomAppsStatus"],onMutate:async s=>{await n.cancelQueries({queryKey:["customApps"]});const i=n.getQueryData(["customApps"]);return n.setQueryData(["customApps"],a=>a&&wn(a,o=>{const c=o.data.find(u=>u.id===s.customAppId);c&&(c.status=s.status)})),{previousData:i}},onError:(s,i,a)=>{a!=null&&a.previousData&&n.setQueryData(["customApps"],a.previousData),e==null||e.warning(s.data)}});return{isUpdatingStatus:t,updateCustomAppsStatus:r}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};function Wd(){const n=Dn(),{messageApi:e}=C.useContext(xn),{isPending:t,mutateAsync:r}=jn({mutationFn:async({moduleId:s,status:i})=>En(`pro_custom-machines/${s}/update-status`,{status:i},void 0,"POST"),mutationKey:["updateModuleStatus"],onMutate:async s=>{await n.cancelQueries({queryKey:["customApps"]});const i=n.getQueryData(["customApps"]);return n.setQueryData(["customApps"],a=>a&&wn(a,o=>{o.data.forEach(c=>{var h;const u=(h=c.customMachines)==null?void 0:h.find(p=>p.id===s.moduleId);u&&(u.status=s.status)})})),{previousData:i}},onError:(s,i,a)=>{a!=null&&a.previousData&&n.setQueryData(["customApps"],a.previousData),e==null||e.warning(s.data)}});return{isUpdatingStatus:t,updateModuleStatus:r}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};function Xd(){const n=Dn(),{error:e,isPending:t,mutateAsync:r}=jn({mutationFn:async s=>En(`custom-apps/${s.id}/update`,s,void 0,"POST"),mutationKey:["updateCustomApps"],onSuccess:(s,i)=>{n.setQueryData(["customApps"],a=>a&&wn(a,o=>{const c=o.data.find(u=>u.id===i.id);c&&Object.assign(c,{...i,customMachines:c.customMachines})}))}});return{error:e,isUpdatingCustomApps:t,updateCustomApps:r}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};const{Text:Oi}=Kt;function Zd({closeModal:n,editableCustomApp:e}){var p,d,f,m,b,y,E,S,N,T,_,P;const[t,r]=Ys(e),{error:s,isUpdatingCustomApps:i,updateCustomApps:a}=Xd(),{messageApi:o}=C.useContext(xn),c=async R=>{R.preventDefault(),await a(t),n(),o==null||o.success("App updated successfully")},u=()=>{if(typeof wp<"u"&&wp.media){const R=wp.media({button:{text:"Select logo"},library:{type:"image"},multiple:!1,title:B("Media")});R.on("select",()=>{const K=R.state().get("selection").first().toJSON();r(U=>{U.logo=K.url})}),R.open()}},h=(R,K)=>{r(U=>{U[R]=K})};return fe("form",{onSubmit:c,children:[L(Mt,{"data-testid":"app-name",invalidMessage:(d=(p=s==null?void 0:s.data)==null?void 0:p.name)==null?void 0:d[0],label:B("App Name"),onChange:R=>h("name",R.target.value),required:!0,status:((f=s==null?void 0:s.data)==null?void 0:f.name)&&"error",value:t.name,wrapperClassName:"mb-3"}),L(Mt,{"data-testid":"app-description",invalidMessage:(b=(m=s==null?void 0:s.data)==null?void 0:m.description)==null?void 0:b[0],label:B("Description"),onChange:R=>h("description",R.target.value),status:((y=s==null?void 0:s.data)==null?void 0:y.description)&&"error",value:t.description,wrapperClassName:"mb-3"}),fe(on,{className:"mb-3",gap:15,children:[fe("div",{className:"w-100",children:[L("div",{className:"mb-1",children:B("Logo")}),fe(vn,{children:[L(Oa,{css:Xs({"& img":{objectFit:"contain !important"}},"",""),size:40,src:t==null?void 0:t.logo,style:{background:t.color,padding:6}}),L(ze,{icon:L(Mu,{}),onClick:u,children:B("Select Logo")})]}),L("br",{}),L(Oi,{type:"secondary",children:B("PNG format, max dimensions 512 x 512 px")}),L("br",{}),((E=s==null?void 0:s.data)==null?void 0:E.logo)&&L(Oi,{type:"danger",children:(N=(S=s==null?void 0:s.data)==null?void 0:S.logo)==null?void 0:N[0]})]}),fe("div",{className:"w-100",children:[L(Kt,{className:"mb-1",children:B("Theme")}),L(ei,{disabledAlpha:!0,onChangeComplete:R=>h("color",R.toHexString()),showText:!0,value:t.color}),L("br",{}),((T=s==null?void 0:s.data)==null?void 0:T.color)&&L(Oi,{type:"danger",children:(P=(_=s==null?void 0:s.data)==null?void 0:_.color)==null?void 0:P[0]})]})]}),fe(on,{gap:8,justify:"end",children:[L(ze,{onClick:n,children:B("Cancel")}),L(ze,{"data-testid":"edit-apps-submit",htmlType:"submit",loading:i,type:"primary",children:B("Update")})]})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};function Yd({editableCustomApp:n}){const[e,t]=C.useState(!1),r=()=>{t(!0)},s=()=>{t(!1)};return fe(os,{children:[L(ze,{"data-testid":"edit-apps",icon:L(Dl,{}),onClick:r,type:"text"}),e&&L(Qs,{footer:null,maskClosable:!0,onCancel:s,open:!0,title:B("Edit app"),width:600,children:L(Zd,{closeModal:s,editableCustomApp:n})})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};function Qd({customApp:n,handleDelete:e,handleStatusChange:t}){return fe(vn,{onClick:r=>r.stopPropagation(),children:[L("label",{children:fe(vn,{children:[n.status?B("Published"):B("Unpublished"),L(Fs,{checked:n.status,"data-testid":"change-apps-status",onChange:t(n.id),size:"small"})]})}),L(Yd,{editableCustomApp:n}),L(Vl,{cancelText:B("No"),description:B("Are you sure to delete this app?"),okText:B("Yes"),onConfirm:e(n.id),placement:"right",title:B("Delete the custom app"),children:L(ze,{"data-testid":"delete-apps",icon:L(jl,{}),type:"text"})}),fe(ze,{disabled:!$n.IS_PRO,href:$n.IS_PRO?Gu(`pro_custom-app-export/${n.id}`):void 0,icon:L(kl,{}),rel:"noreferrer",type:"text",children:[B("Export"),L(mn,{conditions:!$n.IS_PRO,children:L(Gl,{className:"mr-0 flex items-center gap-1",color:"orange",icon:L(ku,{}),children:B("Pro")})})]})]})}var lc=typeof global=="object"&&global&&global.Object===Object&&global,Jd=typeof self=="object"&&self&&self.Object===Object&&self,un=lc||Jd||Function("return this")(),kn=un.Symbol,cc=Object.prototype,ef=cc.hasOwnProperty,tf=cc.toString,Vr=kn?kn.toStringTag:void 0;function nf(n){var e=ef.call(n,Vr),t=n[Vr];try{n[Vr]=void 0;var r=!0}catch{}var s=tf.call(n);return r&&(e?n[Vr]=t:delete n[Vr]),s}var rf=Object.prototype,sf=rf.toString;function af(n){return sf.call(n)}var of="[object Null]",lf="[object Undefined]",po=kn?kn.toStringTag:void 0;function qr(n){return n==null?n===void 0?lf:of:po&&po in Object(n)?nf(n):af(n)}function yn(n){return n!=null&&typeof n=="object"}var Jn=Array.isArray;function Pn(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}function uc(n){return n}var cf="[object AsyncFunction]",uf="[object Function]",hf="[object GeneratorFunction]",df="[object Proxy]";function qa(n){if(!Pn(n))return!1;var e=qr(n);return e==uf||e==hf||e==cf||e==df}var _i=un["__core-js_shared__"],mo=function(){var n=/[^.]+$/.exec(_i&&_i.keys&&_i.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function ff(n){return!!mo&&mo in n}var gf=Function.prototype,pf=gf.toString;function rr(n){if(n!=null){try{return pf.call(n)}catch{}try{return n+""}catch{}}return""}var mf=/[\\^$.*+?()[\]{}|]/g,bf=/^\[object .+?Constructor\]$/,vf=Function.prototype,yf=Object.prototype,Cf=vf.toString,Sf=yf.hasOwnProperty,Ef=RegExp("^"+Cf.call(Sf).replace(mf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function xf(n){if(!Pn(n)||ff(n))return!1;var e=qa(n)?Ef:bf;return e.test(rr(n))}function wf(n,e){return n==null?void 0:n[e]}function sr(n,e){var t=wf(n,e);return xf(t)?t:void 0}var Yi=sr(un,"WeakMap"),bo=Object.create,Nf=function(){function n(){}return function(e){if(!Pn(e))return{};if(bo)return bo(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();function Af(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function Tf(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var Of=800,_f=16,Lf=Date.now;function If(n){var e=0,t=0;return function(){var r=Lf(),s=_f-(r-t);if(t=r,s>0){if(++e>=Of)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function Rf(n){return function(){return n}}var zs=function(){try{var n=sr(Object,"defineProperty");return n({},"",{}),n}catch{}}(),$f=zs?function(n,e){return zs(n,"toString",{configurable:!0,enumerable:!1,value:Rf(e),writable:!0})}:uc,qf=If($f);function Mf(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}var kf=9007199254740991,Df=/^(?:0|[1-9]\d*)$/;function hc(n,e){var t=typeof n;return e=e??kf,!!e&&(t=="number"||t!="symbol"&&Df.test(n))&&n>-1&&n%1==0&&n<e}function Ma(n,e,t){e=="__proto__"&&zs?zs(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function ls(n,e){return n===e||n!==n&&e!==e}var jf=Object.prototype,Pf=jf.hasOwnProperty;function dc(n,e,t){var r=n[e];(!(Pf.call(n,e)&&ls(r,t))||t===void 0&&!(e in n))&&Ma(n,e,t)}function Bf(n,e,t,r){var s=!t;t||(t={});for(var i=-1,a=e.length;++i<a;){var o=e[i],c=void 0;c===void 0&&(c=n[o]),s?Ma(t,o,c):dc(t,o,c)}return t}var vo=Math.max;function Hf(n,e,t){return e=vo(e===void 0?n.length-1:e,0),function(){for(var r=arguments,s=-1,i=vo(r.length-e,0),a=Array(i);++s<i;)a[s]=r[e+s];s=-1;for(var o=Array(e+1);++s<e;)o[s]=r[s];return o[e]=t(a),Af(n,this,o)}}function Ff(n,e){return qf(Hf(n,e,uc),n+"")}var Uf=9007199254740991;function fc(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Uf}function ti(n){return n!=null&&fc(n.length)&&!qa(n)}function zf(n,e,t){if(!Pn(t))return!1;var r=typeof e;return(r=="number"?ti(t)&&hc(e,t.length):r=="string"&&e in t)?ls(t[e],n):!1}function Vf(n){return Ff(function(e,t){var r=-1,s=t.length,i=s>1?t[s-1]:void 0,a=s>2?t[2]:void 0;for(i=n.length>3&&typeof i=="function"?(s--,i):void 0,a&&zf(t[0],t[1],a)&&(i=s<3?void 0:i,s=1),e=Object(e);++r<s;){var o=t[r];o&&n(e,o,r,i)}return e})}var Gf=Object.prototype;function ka(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||Gf;return n===t}function Kf(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var Wf="[object Arguments]";function yo(n){return yn(n)&&qr(n)==Wf}var gc=Object.prototype,Xf=gc.hasOwnProperty,Zf=gc.propertyIsEnumerable,Qi=yo(function(){return arguments}())?yo:function(n){return yn(n)&&Xf.call(n,"callee")&&!Zf.call(n,"callee")};function Yf(){return!1}var pc=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Co=pc&&typeof module=="object"&&module&&!module.nodeType&&module,Qf=Co&&Co.exports===pc,So=Qf?un.Buffer:void 0,Jf=So?So.isBuffer:void 0,es=Jf||Yf,eg="[object Arguments]",tg="[object Array]",ng="[object Boolean]",rg="[object Date]",sg="[object Error]",ig="[object Function]",ag="[object Map]",og="[object Number]",lg="[object Object]",cg="[object RegExp]",ug="[object Set]",hg="[object String]",dg="[object WeakMap]",fg="[object ArrayBuffer]",gg="[object DataView]",pg="[object Float32Array]",mg="[object Float64Array]",bg="[object Int8Array]",vg="[object Int16Array]",yg="[object Int32Array]",Cg="[object Uint8Array]",Sg="[object Uint8ClampedArray]",Eg="[object Uint16Array]",xg="[object Uint32Array]",He={};He[pg]=He[mg]=He[bg]=He[vg]=He[yg]=He[Cg]=He[Sg]=He[Eg]=He[xg]=!0;He[eg]=He[tg]=He[fg]=He[ng]=He[gg]=He[rg]=He[sg]=He[ig]=He[ag]=He[og]=He[lg]=He[cg]=He[ug]=He[hg]=He[dg]=!1;function wg(n){return yn(n)&&fc(n.length)&&!!He[qr(n)]}function Da(n){return function(e){return n(e)}}var mc=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Zr=mc&&typeof module=="object"&&module&&!module.nodeType&&module,Ng=Zr&&Zr.exports===mc,Li=Ng&&lc.process,_r=function(){try{var n=Zr&&Zr.require&&Zr.require("util").types;return n||Li&&Li.binding&&Li.binding("util")}catch{}}(),Eo=_r&&_r.isTypedArray,ja=Eo?Da(Eo):wg,Ag=Object.prototype,Tg=Ag.hasOwnProperty;function bc(n,e){var t=Jn(n),r=!t&&Qi(n),s=!t&&!r&&es(n),i=!t&&!r&&!s&&ja(n),a=t||r||s||i,o=a?Kf(n.length,String):[],c=o.length;for(var u in n)(e||Tg.call(n,u))&&!(a&&(u=="length"||s&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||hc(u,c)))&&o.push(u);return o}function vc(n,e){return function(t){return n(e(t))}}var Og=vc(Object.keys,Object),_g=Object.prototype,Lg=_g.hasOwnProperty;function Ig(n){if(!ka(n))return Og(n);var e=[];for(var t in Object(n))Lg.call(n,t)&&t!="constructor"&&e.push(t);return e}function Rg(n){return ti(n)?bc(n):Ig(n)}function $g(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var qg=Object.prototype,Mg=qg.hasOwnProperty;function kg(n){if(!Pn(n))return $g(n);var e=ka(n),t=[];for(var r in n)r=="constructor"&&(e||!Mg.call(n,r))||t.push(r);return t}function yc(n){return ti(n)?bc(n,!0):kg(n)}var ts=sr(Object,"create");function Dg(){this.__data__=ts?ts(null):{},this.size=0}function jg(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var Pg="__lodash_hash_undefined__",Bg=Object.prototype,Hg=Bg.hasOwnProperty;function Fg(n){var e=this.__data__;if(ts){var t=e[n];return t===Pg?void 0:t}return Hg.call(e,n)?e[n]:void 0}var Ug=Object.prototype,zg=Ug.hasOwnProperty;function Vg(n){var e=this.__data__;return ts?e[n]!==void 0:zg.call(e,n)}var Gg="__lodash_hash_undefined__";function Kg(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=ts&&e===void 0?Gg:e,this}function er(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}er.prototype.clear=Dg;er.prototype.delete=jg;er.prototype.get=Fg;er.prototype.has=Vg;er.prototype.set=Kg;function Wg(){this.__data__=[],this.size=0}function ni(n,e){for(var t=n.length;t--;)if(ls(n[t][0],e))return t;return-1}var Xg=Array.prototype,Zg=Xg.splice;function Yg(n){var e=this.__data__,t=ni(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():Zg.call(e,t,1),--this.size,!0}function Qg(n){var e=this.__data__,t=ni(e,n);return t<0?void 0:e[t][1]}function Jg(n){return ni(this.__data__,n)>-1}function ep(n,e){var t=this.__data__,r=ni(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}function Nn(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Nn.prototype.clear=Wg;Nn.prototype.delete=Yg;Nn.prototype.get=Qg;Nn.prototype.has=Jg;Nn.prototype.set=ep;var ns=sr(un,"Map");function tp(){this.size=0,this.__data__={hash:new er,map:new(ns||Nn),string:new er}}function np(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function ri(n,e){var t=n.__data__;return np(e)?t[typeof e=="string"?"string":"hash"]:t.map}function rp(n){var e=ri(this,n).delete(n);return this.size-=e?1:0,e}function sp(n){return ri(this,n).get(n)}function ip(n){return ri(this,n).has(n)}function ap(n,e){var t=ri(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}function ir(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}ir.prototype.clear=tp;ir.prototype.delete=rp;ir.prototype.get=sp;ir.prototype.has=ip;ir.prototype.set=ap;function op(n,e){for(var t=-1,r=e.length,s=n.length;++t<r;)n[s+t]=e[t];return n}var Cc=vc(Object.getPrototypeOf,Object),lp="[object Object]",cp=Function.prototype,up=Object.prototype,Sc=cp.toString,hp=up.hasOwnProperty,dp=Sc.call(Object);function fp(n){if(!yn(n)||qr(n)!=lp)return!1;var e=Cc(n);if(e===null)return!0;var t=hp.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Sc.call(t)==dp}function gp(){this.__data__=new Nn,this.size=0}function pp(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function mp(n){return this.__data__.get(n)}function bp(n){return this.__data__.has(n)}var vp=200;function yp(n,e){var t=this.__data__;if(t instanceof Nn){var r=t.__data__;if(!ns||r.length<vp-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new ir(r)}return t.set(n,e),this.size=t.size,this}function sn(n){var e=this.__data__=new Nn(n);this.size=e.size}sn.prototype.clear=gp;sn.prototype.delete=pp;sn.prototype.get=mp;sn.prototype.has=bp;sn.prototype.set=yp;var Ec=typeof exports=="object"&&exports&&!exports.nodeType&&exports,xo=Ec&&typeof module=="object"&&module&&!module.nodeType&&module,Cp=xo&&xo.exports===Ec,wo=Cp?un.Buffer:void 0,No=wo?wo.allocUnsafe:void 0;function xc(n,e){if(e)return n.slice();var t=n.length,r=No?No(t):new n.constructor(t);return n.copy(r),r}function Sp(n,e){for(var t=-1,r=n==null?0:n.length,s=0,i=[];++t<r;){var a=n[t];e(a,t,n)&&(i[s++]=a)}return i}function Ep(){return[]}var xp=Object.prototype,Np=xp.propertyIsEnumerable,Ao=Object.getOwnPropertySymbols,Ap=Ao?function(n){return n==null?[]:(n=Object(n),Sp(Ao(n),function(e){return Np.call(n,e)}))}:Ep;function Tp(n,e,t){var r=e(n);return Jn(n)?r:op(r,t(n))}function Ji(n){return Tp(n,Rg,Ap)}var ea=sr(un,"DataView"),ta=sr(un,"Promise"),na=sr(un,"Set"),To="[object Map]",Op="[object Object]",Oo="[object Promise]",_o="[object Set]",Lo="[object WeakMap]",Io="[object DataView]",_p=rr(ea),Lp=rr(ns),Ip=rr(ta),Rp=rr(na),$p=rr(Yi),Ut=qr;(ea&&Ut(new ea(new ArrayBuffer(1)))!=Io||ns&&Ut(new ns)!=To||ta&&Ut(ta.resolve())!=Oo||na&&Ut(new na)!=_o||Yi&&Ut(new Yi)!=Lo)&&(Ut=function(n){var e=qr(n),t=e==Op?n.constructor:void 0,r=t?rr(t):"";if(r)switch(r){case _p:return Io;case Lp:return To;case Ip:return Oo;case Rp:return _o;case $p:return Lo}return e});var qp=Object.prototype,Mp=qp.hasOwnProperty;function kp(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&Mp.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var Vs=un.Uint8Array;function Pa(n){var e=new n.constructor(n.byteLength);return new Vs(e).set(new Vs(n)),e}function Dp(n,e){var t=Pa(n.buffer);return new n.constructor(t,n.byteOffset,n.byteLength)}var jp=/\w*$/;function Pp(n){var e=new n.constructor(n.source,jp.exec(n));return e.lastIndex=n.lastIndex,e}var Ro=kn?kn.prototype:void 0,$o=Ro?Ro.valueOf:void 0;function Bp(n){return $o?Object($o.call(n)):{}}function wc(n,e){var t=e?Pa(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var Hp="[object Boolean]",Fp="[object Date]",Up="[object Map]",zp="[object Number]",Vp="[object RegExp]",Gp="[object Set]",Kp="[object String]",Wp="[object Symbol]",Xp="[object ArrayBuffer]",Zp="[object DataView]",Yp="[object Float32Array]",Qp="[object Float64Array]",Jp="[object Int8Array]",em="[object Int16Array]",tm="[object Int32Array]",nm="[object Uint8Array]",rm="[object Uint8ClampedArray]",sm="[object Uint16Array]",im="[object Uint32Array]";function am(n,e,t){var r=n.constructor;switch(e){case Xp:return Pa(n);case Hp:case Fp:return new r(+n);case Zp:return Dp(n);case Yp:case Qp:case Jp:case em:case tm:case nm:case rm:case sm:case im:return wc(n,t);case Up:return new r;case zp:case Kp:return new r(n);case Vp:return Pp(n);case Gp:return new r;case Wp:return Bp(n)}}function Nc(n){return typeof n.constructor=="function"&&!ka(n)?Nf(Cc(n)):{}}var om="[object Map]";function lm(n){return yn(n)&&Ut(n)==om}var qo=_r&&_r.isMap,cm=qo?Da(qo):lm,um="[object Set]";function hm(n){return yn(n)&&Ut(n)==um}var Mo=_r&&_r.isSet,dm=Mo?Da(Mo):hm,fm=1,Ac="[object Arguments]",gm="[object Array]",pm="[object Boolean]",mm="[object Date]",bm="[object Error]",Tc="[object Function]",vm="[object GeneratorFunction]",ym="[object Map]",Cm="[object Number]",Oc="[object Object]",Sm="[object RegExp]",Em="[object Set]",xm="[object String]",wm="[object Symbol]",Nm="[object WeakMap]",Am="[object ArrayBuffer]",Tm="[object DataView]",Om="[object Float32Array]",_m="[object Float64Array]",Lm="[object Int8Array]",Im="[object Int16Array]",Rm="[object Int32Array]",$m="[object Uint8Array]",qm="[object Uint8ClampedArray]",Mm="[object Uint16Array]",km="[object Uint32Array]",je={};je[Ac]=je[gm]=je[Am]=je[Tm]=je[pm]=je[mm]=je[Om]=je[_m]=je[Lm]=je[Im]=je[Rm]=je[ym]=je[Cm]=je[Oc]=je[Sm]=je[Em]=je[xm]=je[wm]=je[$m]=je[qm]=je[Mm]=je[km]=!0;je[bm]=je[Tc]=je[Nm]=!1;function Ds(n,e,t,r,s,i){var a,o=e&fm;if(a!==void 0)return a;if(!Pn(n))return n;var c=Jn(n);if(c)a=kp(n);else{var u=Ut(n),h=u==Tc||u==vm;if(es(n))return xc(n,o);if(u==Oc||u==Ac||h&&!s)a=h?{}:Nc(n);else{if(!je[u])return s?n:{};a=am(n,u,o)}}i||(i=new sn);var p=i.get(n);if(p)return p;i.set(n,a),dm(n)?n.forEach(function(m){a.add(Ds(m,e,t,m,n,i))}):cm(n)&&n.forEach(function(m,b){a.set(b,Ds(m,e,t,b,n,i))});var d=Ji,f=c?void 0:d(n);return Mf(f||n,function(m,b){f&&(b=m,m=n[b]),dc(a,b,Ds(m,e,t,b,n,i))}),a}var Dm=1,jm=4;function Nr(n){return Ds(n,Dm|jm)}var Pm="__lodash_hash_undefined__";function Bm(n){return this.__data__.set(n,Pm),this}function Hm(n){return this.__data__.has(n)}function Gs(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new ir;++e<t;)this.add(n[e])}Gs.prototype.add=Gs.prototype.push=Bm;Gs.prototype.has=Hm;function Fm(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}function Um(n,e){return n.has(e)}var zm=1,Vm=2;function _c(n,e,t,r,s,i){var a=t&zm,o=n.length,c=e.length;if(o!=c&&!(a&&c>o))return!1;var u=i.get(n),h=i.get(e);if(u&&h)return u==e&&h==n;var p=-1,d=!0,f=t&Vm?new Gs:void 0;for(i.set(n,e),i.set(e,n);++p<o;){var m=n[p],b=e[p];if(r)var y=a?r(b,m,p,e,n,i):r(m,b,p,n,e,i);if(y!==void 0){if(y)continue;d=!1;break}if(f){if(!Fm(e,function(E,S){if(!Um(f,S)&&(m===E||s(m,E,t,r,i)))return f.push(S)})){d=!1;break}}else if(!(m===b||s(m,b,t,r,i))){d=!1;break}}return i.delete(n),i.delete(e),d}function Gm(n){var e=-1,t=Array(n.size);return n.forEach(function(r,s){t[++e]=[s,r]}),t}function Km(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var Wm=1,Xm=2,Zm="[object Boolean]",Ym="[object Date]",Qm="[object Error]",Jm="[object Map]",eb="[object Number]",tb="[object RegExp]",nb="[object Set]",rb="[object String]",sb="[object Symbol]",ib="[object ArrayBuffer]",ab="[object DataView]",ko=kn?kn.prototype:void 0,Ii=ko?ko.valueOf:void 0;function ob(n,e,t,r,s,i,a){switch(t){case ab:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case ib:return!(n.byteLength!=e.byteLength||!i(new Vs(n),new Vs(e)));case Zm:case Ym:case eb:return ls(+n,+e);case Qm:return n.name==e.name&&n.message==e.message;case tb:case rb:return n==e+"";case Jm:var o=Gm;case nb:var c=r&Wm;if(o||(o=Km),n.size!=e.size&&!c)return!1;var u=a.get(n);if(u)return u==e;r|=Xm,a.set(n,e);var h=_c(o(n),o(e),r,s,i,a);return a.delete(n),h;case sb:if(Ii)return Ii.call(n)==Ii.call(e)}return!1}var lb=1,cb=Object.prototype,ub=cb.hasOwnProperty;function hb(n,e,t,r,s,i){var a=t&lb,o=Ji(n),c=o.length,u=Ji(e),h=u.length;if(c!=h&&!a)return!1;for(var p=c;p--;){var d=o[p];if(!(a?d in e:ub.call(e,d)))return!1}var f=i.get(n),m=i.get(e);if(f&&m)return f==e&&m==n;var b=!0;i.set(n,e),i.set(e,n);for(var y=a;++p<c;){d=o[p];var E=n[d],S=e[d];if(r)var N=a?r(S,E,d,e,n,i):r(E,S,d,n,e,i);if(!(N===void 0?E===S||s(E,S,t,r,i):N)){b=!1;break}y||(y=d=="constructor")}if(b&&!y){var T=n.constructor,_=e.constructor;T!=_&&"constructor"in n&&"constructor"in e&&!(typeof T=="function"&&T instanceof T&&typeof _=="function"&&_ instanceof _)&&(b=!1)}return i.delete(n),i.delete(e),b}var db=1,Do="[object Arguments]",jo="[object Array]",ws="[object Object]",fb=Object.prototype,Po=fb.hasOwnProperty;function gb(n,e,t,r,s,i){var a=Jn(n),o=Jn(e),c=a?jo:Ut(n),u=o?jo:Ut(e);c=c==Do?ws:c,u=u==Do?ws:u;var h=c==ws,p=u==ws,d=c==u;if(d&&es(n)){if(!es(e))return!1;a=!0,h=!1}if(d&&!h)return i||(i=new sn),a||ja(n)?_c(n,e,t,r,s,i):ob(n,e,c,t,r,s,i);if(!(t&db)){var f=h&&Po.call(n,"__wrapped__"),m=p&&Po.call(e,"__wrapped__");if(f||m){var b=f?n.value():n,y=m?e.value():e;return i||(i=new sn),s(b,y,t,r,i)}}return d?(i||(i=new sn),hb(n,e,t,r,s,i)):!1}function Lc(n,e,t,r,s){return n===e?!0:n==null||e==null||!yn(n)&&!yn(e)?n!==n&&e!==e:gb(n,e,t,r,Lc,s)}function pb(n){return function(e,t,r){for(var s=-1,i=Object(e),a=r(e),o=a.length;o--;){var c=a[++s];if(t(i[c],c,i)===!1)break}return e}}var mb=pb();function ra(n,e,t){(t!==void 0&&!ls(n[e],t)||t===void 0&&!(e in n))&&Ma(n,e,t)}function bb(n){return yn(n)&&ti(n)}function sa(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}function vb(n){return Bf(n,yc(n))}function yb(n,e,t,r,s,i,a){var o=sa(n,t),c=sa(e,t),u=a.get(c);if(u){ra(n,t,u);return}var h=i?i(o,c,t+"",n,e,a):void 0,p=h===void 0;if(p){var d=Jn(c),f=!d&&es(c),m=!d&&!f&&ja(c);h=c,d||f||m?Jn(o)?h=o:bb(o)?h=Tf(o):f?(p=!1,h=xc(c,!0)):m?(p=!1,h=wc(c,!0)):h=[]:fp(c)||Qi(c)?(h=o,Qi(o)?h=vb(o):(!Pn(o)||qa(o))&&(h=Nc(c))):p=!1}p&&(a.set(c,h),s(h,c,r,i,a),a.delete(c)),ra(n,t,h)}function Ic(n,e,t,r,s){n!==e&&mb(e,function(i,a){if(s||(s=new sn),Pn(i))yb(n,e,a,t,Ic,r,s);else{var o=r?r(sa(n,a),i,a+"",n,e,s):void 0;o===void 0&&(o=i),ra(n,a,o)}},yc)}function Ba(n,e){return Lc(n,e)}var Mn=Vf(function(n,e,t){Ic(n,e,t)}),ie=(n=>(n[n.TYPE=3]="TYPE",n[n.LEVEL=12]="LEVEL",n[n.ATTRIBUTE=13]="ATTRIBUTE",n[n.BLOT=14]="BLOT",n[n.INLINE=7]="INLINE",n[n.BLOCK=11]="BLOCK",n[n.BLOCK_BLOT=10]="BLOCK_BLOT",n[n.INLINE_BLOT=6]="INLINE_BLOT",n[n.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",n[n.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",n[n.ANY=15]="ANY",n))(ie||{});class ln{constructor(e,t,r={}){this.attrName=e,this.keyName=t;const s=ie.TYPE&ie.ATTRIBUTE;this.scope=r.scope!=null?r.scope&ie.LEVEL|s:ie.ATTRIBUTE,r.whitelist!=null&&(this.whitelist=r.whitelist)}static keys(e){return Array.from(e.attributes).map(t=>t.name)}add(e,t){return this.canAdd(e,t)?(e.setAttribute(this.keyName,t),!0):!1}canAdd(e,t){return this.whitelist==null?!0:typeof t=="string"?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""}}class Ar extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const Rc=class ia{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,t=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(t){let r=null;try{r=e.parentNode}catch{return null}return this.find(r,t)}return null}create(e,t,r){const s=this.query(t);if(s==null)throw new Ar(`Unable to create ${t} blot`);const i=s,a=t instanceof Node||t.nodeType===Node.TEXT_NODE?t:i.create(r),o=new i(e,a,r);return ia.blots.set(o.domNode,o),o}find(e,t=!1){return ia.find(e,t)}query(e,t=ie.ANY){let r;return typeof e=="string"?r=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?r=this.types.text:typeof e=="number"?e&ie.LEVEL&ie.BLOCK?r=this.types.block:e&ie.LEVEL&ie.INLINE&&(r=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(s=>(r=this.classes[s],!!r)),r=r||this.tags[e.tagName]),r==null?null:"scope"in r&&t&ie.LEVEL&r.scope&&t&ie.TYPE&r.scope?r:null}register(...e){return e.map(t=>{const r="blotName"in t,s="attrName"in t;if(!r&&!s)throw new Ar("Invalid definition");if(r&&t.blotName==="abstract")throw new Ar("Cannot register abstract class");const i=r?t.blotName:s?t.attrName:void 0;return this.types[i]=t,s?typeof t.keyName=="string"&&(this.attributes[t.keyName]=t):r&&(t.className&&(this.classes[t.className]=t),t.tagName&&(Array.isArray(t.tagName)?t.tagName=t.tagName.map(a=>a.toUpperCase()):t.tagName=t.tagName.toUpperCase(),(Array.isArray(t.tagName)?t.tagName:[t.tagName]).forEach(a=>{(this.tags[a]==null||t.className==null)&&(this.tags[a]=t)}))),t})}};Rc.blots=new WeakMap;let Lr=Rc;function Bo(n,e){return(n.getAttribute("class")||"").split(/\s+/).filter(t=>t.indexOf(`${e}-`)===0)}class Cb extends ln{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(t=>t.split("-").slice(0,-1).join("-"))}add(e,t){return this.canAdd(e,t)?(this.remove(e),e.classList.add(`${this.keyName}-${t}`),!0):!1}remove(e){Bo(e,this.keyName).forEach(t=>{e.classList.remove(t)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const t=(Bo(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""}}const Xt=Cb;function Ri(n){const e=n.split("-"),t=e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("");return e[0]+t}class Sb extends ln{static keys(e){return(e.getAttribute("style")||"").split(";").map(t=>t.split(":")[0].trim())}add(e,t){return this.canAdd(e,t)?(e.style[Ri(this.keyName)]=t,!0):!1}remove(e){e.style[Ri(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const t=e.style[Ri(this.keyName)];return this.canAdd(e,t)?t:""}}const Bn=Sb;class Eb{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,t){t?e.add(this.domNode,t)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=Lr.find(this.domNode);if(e==null)return;const t=ln.keys(this.domNode),r=Xt.keys(this.domNode),s=Bn.keys(this.domNode);t.concat(r).concat(s).forEach(i=>{const a=e.scroll.query(i,ie.ATTRIBUTE);a instanceof ln&&(this.attributes[a.attrName]=a)})}copy(e){Object.keys(this.attributes).forEach(t=>{const r=this.attributes[t].value(this.domNode);e.format(t,r)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(t=>{this.attributes[t].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,t)=>(e[t]=this.attributes[t].value(this.domNode),e),{})}}const si=Eb,$c=class{constructor(e,t){this.scroll=e,this.domNode=t,Lr.blots.set(t,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new Ar("Blot definition missing tagName");let t,r;return Array.isArray(this.tagName)?(typeof e=="string"?(r=e.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof e=="number"&&(r=e),typeof r=="number"?t=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?t=document.createElement(r):t=document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),Lr.blots.delete(this.domNode)}deleteAt(e,t){this.isolate(e,t).remove()}formatAt(e,t,r,s){const i=this.isolate(e,t);if(this.scroll.query(r,ie.BLOT)!=null&&s)i.wrap(r,s);else if(this.scroll.query(r,ie.ATTRIBUTE)!=null){const a=this.scroll.create(this.statics.scope);i.wrap(a),a.format(r,s)}}insertAt(e,t,r){const s=r==null?this.scroll.create("text",t):this.scroll.create(t,r),i=this.split(e);this.parent.insertBefore(s,i||void 0)}isolate(e,t){const r=this.split(e);if(r==null)throw new Error("Attempt to isolate at end");return r.split(t),r}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,t){const r=typeof e=="string"?this.scroll.create(e,t):e;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(e,t){return e===0?this:this.next}update(e,t){}wrap(e,t){const r=typeof e=="string"?this.scroll.create(e,t):e;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new Ar(`Cannot wrap ${e}`);return r.appendChild(this),r}};$c.blotName="abstract";let qc=$c;const Mc=class extends qc{static value(e){return!0}index(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1}position(e,t){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};Mc.scope=ie.INLINE_BLOT;let xb=Mc;const vt=xb;class wb{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const t=e.slice(1);this.append(...t)}}at(e){const t=this.iterator();let r=t();for(;r&&e>0;)e-=1,r=t();return r}contains(e){const t=this.iterator();let r=t();for(;r;){if(r===e)return!0;r=t()}return!1}indexOf(e){const t=this.iterator();let r=t(),s=0;for(;r;){if(r===e)return s;s+=1,r=t()}return-1}insertBefore(e,t){e!=null&&(this.remove(e),e.next=t,t!=null?(e.prev=t.prev,t.prev!=null&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let t=0,r=this.head;for(;r!=null;){if(r===e)return t;t+=r.length(),r=r.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const t=e;return e!=null&&(e=e.next),t}}find(e,t=!1){const r=this.iterator();let s=r();for(;s;){const i=s.length();if(e<i||t&&e===i&&(s.next==null||s.next.length()!==0))return[s,e];e-=i,s=r()}return[null,0]}forEach(e){const t=this.iterator();let r=t();for(;r;)e(r),r=t()}forEachAt(e,t,r){if(t<=0)return;const[s,i]=this.find(e);let a=e-i;const o=this.iterator(s);let c=o();for(;c&&a<e+t;){const u=c.length();e>a?r(c,e-a,Math.min(t,a+u-e)):r(c,0,Math.min(u,e+t-a)),a+=u,c=o()}}map(e){return this.reduce((t,r)=>(t.push(e(r)),t),[])}reduce(e,t){const r=this.iterator();let s=r();for(;s;)t=e(t,s),s=r();return t}}function Ho(n,e){const t=e.find(n);if(t)return t;try{return e.create(n)}catch{const r=e.create(ie.INLINE);return Array.from(n.childNodes).forEach(s=>{r.domNode.appendChild(s)}),n.parentNode&&n.parentNode.replaceChild(r.domNode,n),r.attach(),r}}const kc=class _n extends qc{constructor(e,t){super(e,t),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,_n.uiClass&&this.uiNode.classList.add(_n.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new wb,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const t=Ho(e,this.scroll);this.insertBefore(t,this.children.head||void 0)}catch(t){if(t instanceof Ar)return;throw t}})}deleteAt(e,t){if(e===0&&t===this.length())return this.remove();this.children.forEachAt(e,t,(r,s,i)=>{r.deleteAt(s,i)})}descendant(e,t=0){const[r,s]=this.children.find(t);return e.blotName==null&&e(r)||e.blotName!=null&&r instanceof e?[r,s]:r instanceof _n?r.descendant(e,s):[null,-1]}descendants(e,t=0,r=Number.MAX_VALUE){let s=[],i=r;return this.children.forEachAt(t,r,(a,o,c)=>{(e.blotName==null&&e(a)||e.blotName!=null&&a instanceof e)&&s.push(a),a instanceof _n&&(s=s.concat(a.descendants(e,o,i))),i-=c}),s}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(t=>{e||this.statics.allowedChildren.some(r=>t instanceof r)||(t.statics.scope===ie.BLOCK_BLOT?(t.next!=null&&this.splitAfter(t),t.prev!=null&&this.splitAfter(t.prev),t.parent.unwrap(),e=!0):t instanceof _n?t.unwrap():t.remove())})}formatAt(e,t,r,s){this.children.forEachAt(e,t,(i,a,o)=>{i.formatAt(a,o,r,s)})}insertAt(e,t,r){const[s,i]=this.children.find(e);if(s)s.insertAt(i,t,r);else{const a=r==null?this.scroll.create("text",t):this.scroll.create(t,r);this.appendChild(a)}}insertBefore(e,t){e.parent!=null&&e.parent.children.remove(e);let r=null;this.children.insertBefore(e,t||null),e.parent=this,t!=null&&(r=t.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==r)&&this.domNode.insertBefore(e.domNode,r),e.attach()}length(){return this.children.reduce((e,t)=>e+t.length(),0)}moveChildren(e,t){this.children.forEach(r=>{e.insertBefore(r,t)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t)}else this.remove()}path(e,t=!1){const[r,s]=this.children.find(e,t),i=[[this,e]];return r instanceof _n?i.concat(r.path(s,t)):(r!=null&&i.push([r,s]),i)}removeChild(e){this.children.remove(e)}replaceWith(e,t){const r=typeof e=="string"?this.scroll.create(e,t):e;return r instanceof _n&&this.moveChildren(r),super.replaceWith(r)}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}const r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(e,this.length(),(s,i,a)=>{const o=s.split(i,t);o!=null&&r.appendChild(o)}),r}splitAfter(e){const t=this.clone();for(;e.next!=null;)t.appendChild(e.next);return this.parent&&this.parent.insertBefore(t,this.next||void 0),t}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,t){const r=[],s=[];e.forEach(i=>{i.target===this.domNode&&i.type==="childList"&&(r.push(...i.addedNodes),s.push(...i.removedNodes))}),s.forEach(i=>{if(i.parentNode!=null&&i.tagName!=="IFRAME"&&document.body.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const a=this.scroll.find(i);a!=null&&(a.domNode.parentNode==null||a.domNode.parentNode===this.domNode)&&a.detach()}),r.filter(i=>i.parentNode===this.domNode&&i!==this.uiNode).sort((i,a)=>i===a?0:i.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(i=>{let a=null;i.nextSibling!=null&&(a=this.scroll.find(i.nextSibling));const o=Ho(i,this.scroll);(o.next!==a||o.next==null)&&(o.parent!=null&&o.parent.removeChild(this),this.insertBefore(o,a||void 0))}),this.enforceAllowedChildren()}};kc.uiClass="";let Nb=kc;const Gt=Nb;function Ab(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}const yr=class Cr extends Gt{static create(e){return super.create(e)}static formats(e,t){const r=t.query(Cr.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new si(this.domNode)}format(e,t){if(e===this.statics.blotName&&!t)this.children.forEach(r=>{r instanceof Cr||(r=r.wrap(Cr.blotName,!0)),this.attributes.copy(r)}),this.unwrap();else{const r=this.scroll.query(e,ie.INLINE);if(r==null)return;r instanceof ln?this.attributes.attribute(r,t):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t)}}formats(){const e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,r,s){this.formats()[r]!=null||this.scroll.query(r,ie.ATTRIBUTE)?this.isolate(e,t).format(r,s):super.formatAt(e,t,r,s)}optimize(e){super.optimize(e);const t=this.formats();if(Object.keys(t).length===0)return this.unwrap();const r=this.next;r instanceof Cr&&r.prev===this&&Ab(t,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(e,t){const r=super.replaceWith(e,t);return this.attributes.copy(r),r}update(e,t){super.update(e,t),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}wrap(e,t){const r=super.wrap(e,t);return r instanceof Cr&&this.attributes.move(r),r}};yr.allowedChildren=[yr,vt],yr.blotName="inline",yr.scope=ie.INLINE_BLOT,yr.tagName="SPAN";let Tb=yr;const Ha=Tb,Sr=class aa extends Gt{static create(e){return super.create(e)}static formats(e,t){const r=t.query(aa.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new si(this.domNode)}format(e,t){const r=this.scroll.query(e,ie.BLOCK);r!=null&&(r instanceof ln?this.attributes.attribute(r,t):e===this.statics.blotName&&!t?this.replaceWith(aa.blotName):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t))}formats(){const e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,r,s){this.scroll.query(r,ie.BLOCK)!=null?this.format(r,s):super.formatAt(e,t,r,s)}insertAt(e,t,r){if(r==null||this.scroll.query(t,ie.INLINE)!=null)super.insertAt(e,t,r);else{const s=this.split(e);if(s!=null){const i=this.scroll.create(t,r);s.parent.insertBefore(i,s)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,t){const r=super.replaceWith(e,t);return this.attributes.copy(r),r}update(e,t){super.update(e,t),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}};Sr.blotName="block",Sr.scope=ie.BLOCK_BLOT,Sr.tagName="P",Sr.allowedChildren=[Ha,Sr,vt];let Ob=Sr;const rs=Ob,oa=class extends Gt{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,t){super.deleteAt(e,t),this.enforceAllowedChildren()}formatAt(e,t,r,s){super.formatAt(e,t,r,s),this.enforceAllowedChildren()}insertAt(e,t,r){super.insertAt(e,t,r),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};oa.blotName="container",oa.scope=ie.BLOCK_BLOT;let _b=oa;const ii=_b;class Lb extends vt{static formats(e,t){}format(e,t){super.formatAt(0,this.length(),e,t)}formatAt(e,t,r,s){e===0&&t===this.length()?this.format(r,s):super.formatAt(e,t,r,s)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const Tt=Lb,Ib={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},Rb=100,Er=class extends Gt{constructor(e,t){super(null,t),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,Ib),this.attach()}create(e,t){return this.registry.create(this,e,t)}find(e,t=!1){const r=this.registry.find(e,t);return r?r.scroll===this?r:t?this.find(r.scroll.domNode.parentNode,!0):null:null}query(e,t=ie.ANY){return this.registry.query(e,t)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,t){this.update(),e===0&&t===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(e,t)}formatAt(e,t,r,s){this.update(),super.formatAt(e,t,r,s)}insertAt(e,t,r){this.update(),super.insertAt(e,t,r)}optimize(e=[],t={}){super.optimize(t);const r=t.mutationsMap||new WeakMap;let s=Array.from(this.observer.takeRecords());for(;s.length>0;)e.push(s.pop());const i=(c,u=!0)=>{c==null||c===this||c.domNode.parentNode!=null&&(r.has(c.domNode)||r.set(c.domNode,[]),u&&i(c.parent))},a=c=>{r.has(c.domNode)&&(c instanceof Gt&&c.children.forEach(a),r.delete(c.domNode),c.optimize(t))};let o=e;for(let c=0;o.length>0;c+=1){if(c>=Rb)throw new Error("[Parchment] Maximum optimize iterations reached");for(o.forEach(u=>{const h=this.find(u.target,!0);h!=null&&(h.domNode===u.target&&(u.type==="childList"?(i(this.find(u.previousSibling,!1)),Array.from(u.addedNodes).forEach(p=>{const d=this.find(p,!1);i(d,!1),d instanceof Gt&&d.children.forEach(f=>{i(f,!1)})})):u.type==="attributes"&&i(h.prev)),i(h))}),this.children.forEach(a),o=Array.from(this.observer.takeRecords()),s=o.slice();s.length>0;)e.push(s.pop())}}update(e,t={}){e=e||this.observer.takeRecords();const r=new WeakMap;e.map(s=>{const i=this.find(s.target,!0);return i==null?null:r.has(i.domNode)?(r.get(i.domNode).push(s),null):(r.set(i.domNode,[s]),i)}).forEach(s=>{s!=null&&s!==this&&r.has(s.domNode)&&s.update(r.get(s.domNode)||[],t)}),t.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),t),this.optimize(e,t)}};Er.blotName="scroll",Er.defaultChild=rs,Er.allowedChildren=[rs,ii],Er.scope=ie.BLOCK_BLOT,Er.tagName="DIV";let $b=Er;const Fa=$b,la=class Dc extends vt{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,t){super(e,t),this.text=this.statics.value(this.domNode)}deleteAt(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)}index(e,t){return this.domNode===e?t:-1}insertAt(e,t,r){r==null?(this.text=this.text.slice(0,e)+t+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,t,r)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof Dc&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,t=!1){return[this.domNode,e]}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}const r=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next||void 0),this.text=this.statics.value(this.domNode),r}update(e,t){e.some(r=>r.type==="characterData"&&r.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};la.blotName="text",la.scope=ie.INLINE_BLOT;let qb=la;const Ks=qb,Mb=Object.freeze(Object.defineProperty({__proto__:null,Attributor:ln,AttributorStore:si,BlockBlot:rs,ClassAttributor:Xt,ContainerBlot:ii,EmbedBlot:Tt,InlineBlot:Ha,LeafBlot:vt,ParentBlot:Gt,Registry:Lr,Scope:ie,ScrollBlot:Fa,StyleAttributor:Bn,TextBlot:Ks},Symbol.toStringTag,{value:"Module"}));var Ns={exports:{}},$i,Fo;function kb(){if(Fo)return $i;Fo=1;var n=-1,e=1,t=0;function r(v,O,w,A,$){if(v===O)return v?[[t,v]]:[];if(w!=null){var I=U(v,O,w);if(I)return I}var M=o(v,O),j=v.substring(0,M);v=v.substring(M),O=O.substring(M),M=u(v,O);var D=v.substring(v.length-M);v=v.substring(0,v.length-M),O=O.substring(0,O.length-M);var H=s(v,O);return j&&H.unshift([t,j]),D&&H.push([t,D]),S(H,$),A&&p(H),H}function s(v,O){var w;if(!v)return[[e,O]];if(!O)return[[n,v]];var A=v.length>O.length?v:O,$=v.length>O.length?O:v,I=A.indexOf($);if(I!==-1)return w=[[e,A.substring(0,I)],[t,$],[e,A.substring(I+$.length)]],v.length>O.length&&(w[0][0]=w[2][0]=n),w;if($.length===1)return[[n,v],[e,O]];var M=h(v,O);if(M){var j=M[0],D=M[1],H=M[2],te=M[3],Y=M[4],ne=r(j,H),ae=r(D,te);return ne.concat([[t,Y]],ae)}return i(v,O)}function i(v,O){for(var w=v.length,A=O.length,$=Math.ceil((w+A)/2),I=$,M=2*$,j=new Array(M),D=new Array(M),H=0;H<M;H++)j[H]=-1,D[H]=-1;j[I+1]=0,D[I+1]=0;for(var te=w-A,Y=te%2!==0,ne=0,ae=0,V=0,W=0,ee=0;ee<$;ee++){for(var G=-ee+ne;G<=ee-ae;G+=2){var se=I+G,oe;G===-ee||G!==ee&&j[se-1]<j[se+1]?oe=j[se+1]:oe=j[se-1]+1;for(var le=oe-G;oe<w&&le<A&&v.charAt(oe)===O.charAt(le);)oe++,le++;if(j[se]=oe,oe>w)ae+=2;else if(le>A)ne+=2;else if(Y){var he=I+te-G;if(he>=0&&he<M&&D[he]!==-1){var ge=w-D[he];if(oe>=ge)return a(v,O,oe,le)}}}for(var ve=-ee+V;ve<=ee-W;ve+=2){var he=I+ve,ge;ve===-ee||ve!==ee&&D[he-1]<D[he+1]?ge=D[he+1]:ge=D[he-1]+1;for(var ye=ge-ve;ge<w&&ye<A&&v.charAt(w-ge-1)===O.charAt(A-ye-1);)ge++,ye++;if(D[he]=ge,ge>w)W+=2;else if(ye>A)V+=2;else if(!Y){var se=I+te-ve;if(se>=0&&se<M&&j[se]!==-1){var oe=j[se],le=I+oe-se;if(ge=w-ge,oe>=ge)return a(v,O,oe,le)}}}}return[[n,v],[e,O]]}function a(v,O,w,A){var $=v.substring(0,w),I=O.substring(0,A),M=v.substring(w),j=O.substring(A),D=r($,I),H=r(M,j);return D.concat(H)}function o(v,O){if(!v||!O||v.charAt(0)!==O.charAt(0))return 0;for(var w=0,A=Math.min(v.length,O.length),$=A,I=0;w<$;)v.substring(I,$)==O.substring(I,$)?(w=$,I=w):A=$,$=Math.floor((A-w)/2+w);return N(v.charCodeAt($-1))&&$--,$}function c(v,O){var w=v.length,A=O.length;if(w==0||A==0)return 0;w>A?v=v.substring(w-A):w<A&&(O=O.substring(0,w));var $=Math.min(w,A);if(v==O)return $;for(var I=0,M=1;;){var j=v.substring($-M),D=O.indexOf(j);if(D==-1)return I;M+=D,(D==0||v.substring($-M)==O.substring(0,M))&&(I=M,M++)}}function u(v,O){if(!v||!O||v.slice(-1)!==O.slice(-1))return 0;for(var w=0,A=Math.min(v.length,O.length),$=A,I=0;w<$;)v.substring(v.length-$,v.length-I)==O.substring(O.length-$,O.length-I)?(w=$,I=w):A=$,$=Math.floor((A-w)/2+w);return T(v.charCodeAt(v.length-$))&&$--,$}function h(v,O){var w=v.length>O.length?v:O,A=v.length>O.length?O:v;if(w.length<4||A.length*2<w.length)return null;function $(ae,V,W){for(var ee=ae.substring(W,W+Math.floor(ae.length/4)),G=-1,se="",oe,le,he,ge;(G=V.indexOf(ee,G+1))!==-1;){var ve=o(ae.substring(W),V.substring(G)),ye=u(ae.substring(0,W),V.substring(0,G));se.length<ye+ve&&(se=V.substring(G-ye,G)+V.substring(G,G+ve),oe=ae.substring(0,W-ye),le=ae.substring(W+ve),he=V.substring(0,G-ye),ge=V.substring(G+ve))}return se.length*2>=ae.length?[oe,le,he,ge,se]:null}var I=$(w,A,Math.ceil(w.length/4)),M=$(w,A,Math.ceil(w.length/2)),j;if(!I&&!M)return null;M?I?j=I[4].length>M[4].length?I:M:j=M:j=I;var D,H,te,Y;v.length>O.length?(D=j[0],H=j[1],te=j[2],Y=j[3]):(te=j[0],Y=j[1],D=j[2],H=j[3]);var ne=j[4];return[D,H,te,Y,ne]}function p(v){for(var O=!1,w=[],A=0,$=null,I=0,M=0,j=0,D=0,H=0;I<v.length;)v[I][0]==t?(w[A++]=I,M=D,j=H,D=0,H=0,$=v[I][1]):(v[I][0]==e?D+=v[I][1].length:H+=v[I][1].length,$&&$.length<=Math.max(M,j)&&$.length<=Math.max(D,H)&&(v.splice(w[A-1],0,[n,$]),v[w[A-1]+1][0]=e,A--,A--,I=A>0?w[A-1]:-1,M=0,j=0,D=0,H=0,$=null,O=!0)),I++;for(O&&S(v),E(v),I=1;I<v.length;){if(v[I-1][0]==n&&v[I][0]==e){var te=v[I-1][1],Y=v[I][1],ne=c(te,Y),ae=c(Y,te);ne>=ae?(ne>=te.length/2||ne>=Y.length/2)&&(v.splice(I,0,[t,Y.substring(0,ne)]),v[I-1][1]=te.substring(0,te.length-ne),v[I+1][1]=Y.substring(ne),I++):(ae>=te.length/2||ae>=Y.length/2)&&(v.splice(I,0,[t,te.substring(0,ae)]),v[I-1][0]=e,v[I-1][1]=Y.substring(0,Y.length-ae),v[I+1][0]=n,v[I+1][1]=te.substring(ae),I++),I++}I++}}var d=/[^a-zA-Z0-9]/,f=/\s/,m=/[\r\n]/,b=/\n\r?\n$/,y=/^\r?\n\r?\n/;function E(v){function O(ae,V){if(!ae||!V)return 6;var W=ae.charAt(ae.length-1),ee=V.charAt(0),G=W.match(d),se=ee.match(d),oe=G&&W.match(f),le=se&&ee.match(f),he=oe&&W.match(m),ge=le&&ee.match(m),ve=he&&ae.match(b),ye=ge&&V.match(y);return ve||ye?5:he||ge?4:G&&!oe&&le?3:oe||le?2:G||se?1:0}for(var w=1;w<v.length-1;){if(v[w-1][0]==t&&v[w+1][0]==t){var A=v[w-1][1],$=v[w][1],I=v[w+1][1],M=u(A,$);if(M){var j=$.substring($.length-M);A=A.substring(0,A.length-M),$=j+$.substring(0,$.length-M),I=j+I}for(var D=A,H=$,te=I,Y=O(A,$)+O($,I);$.charAt(0)===I.charAt(0);){A+=$.charAt(0),$=$.substring(1)+I.charAt(0),I=I.substring(1);var ne=O(A,$)+O($,I);ne>=Y&&(Y=ne,D=A,H=$,te=I)}v[w-1][1]!=D&&(D?v[w-1][1]=D:(v.splice(w-1,1),w--),v[w][1]=H,te?v[w+1][1]=te:(v.splice(w+1,1),w--))}w++}}function S(v,O){v.push([t,""]);for(var w=0,A=0,$=0,I="",M="",j;w<v.length;){if(w<v.length-1&&!v[w][1]){v.splice(w,1);continue}switch(v[w][0]){case e:$++,M+=v[w][1],w++;break;case n:A++,I+=v[w][1],w++;break;case t:var D=w-$-A-1;if(O){if(D>=0&&P(v[D][1])){var H=v[D][1].slice(-1);if(v[D][1]=v[D][1].slice(0,-1),I=H+I,M=H+M,!v[D][1]){v.splice(D,1),w--;var te=D-1;v[te]&&v[te][0]===e&&($++,M=v[te][1]+M,te--),v[te]&&v[te][0]===n&&(A++,I=v[te][1]+I,te--),D=te}}if(_(v[w][1])){var H=v[w][1].charAt(0);v[w][1]=v[w][1].slice(1),I+=H,M+=H}}if(w<v.length-1&&!v[w][1]){v.splice(w,1);break}if(I.length>0||M.length>0){I.length>0&&M.length>0&&(j=o(M,I),j!==0&&(D>=0?v[D][1]+=M.substring(0,j):(v.splice(0,0,[t,M.substring(0,j)]),w++),M=M.substring(j),I=I.substring(j)),j=u(M,I),j!==0&&(v[w][1]=M.substring(M.length-j)+v[w][1],M=M.substring(0,M.length-j),I=I.substring(0,I.length-j)));var Y=$+A;I.length===0&&M.length===0?(v.splice(w-Y,Y),w=w-Y):I.length===0?(v.splice(w-Y,Y,[e,M]),w=w-Y+1):M.length===0?(v.splice(w-Y,Y,[n,I]),w=w-Y+1):(v.splice(w-Y,Y,[n,I],[e,M]),w=w-Y+2)}w!==0&&v[w-1][0]===t?(v[w-1][1]+=v[w][1],v.splice(w,1)):w++,$=0,A=0,I="",M="";break}}v[v.length-1][1]===""&&v.pop();var ne=!1;for(w=1;w<v.length-1;)v[w-1][0]===t&&v[w+1][0]===t&&(v[w][1].substring(v[w][1].length-v[w-1][1].length)===v[w-1][1]?(v[w][1]=v[w-1][1]+v[w][1].substring(0,v[w][1].length-v[w-1][1].length),v[w+1][1]=v[w-1][1]+v[w+1][1],v.splice(w-1,1),ne=!0):v[w][1].substring(0,v[w+1][1].length)==v[w+1][1]&&(v[w-1][1]+=v[w+1][1],v[w][1]=v[w][1].substring(v[w+1][1].length)+v[w+1][1],v.splice(w+1,1),ne=!0)),w++;ne&&S(v,O)}function N(v){return v>=55296&&v<=56319}function T(v){return v>=56320&&v<=57343}function _(v){return T(v.charCodeAt(0))}function P(v){return N(v.charCodeAt(v.length-1))}function R(v){for(var O=[],w=0;w<v.length;w++)v[w][1].length>0&&O.push(v[w]);return O}function K(v,O,w,A){return P(v)||_(A)?null:R([[t,v],[n,O],[e,w],[t,A]])}function U(v,O,w){var A=typeof w=="number"?{index:w,length:0}:w.oldRange,$=typeof w=="number"?null:w.newRange,I=v.length,M=O.length;if(A.length===0&&($===null||$.length===0)){var j=A.index,D=v.slice(0,j),H=v.slice(j),te=$?$.index:null;e:{var Y=j+M-I;if(te!==null&&te!==Y||Y<0||Y>M)break e;var ne=O.slice(0,Y),ae=O.slice(Y);if(ae!==H)break e;var V=Math.min(j,Y),W=D.slice(0,V),ee=ne.slice(0,V);if(W!==ee)break e;var G=D.slice(V),se=ne.slice(V);return K(W,G,se,H)}e:{if(te!==null&&te!==j)break e;var oe=j,ne=O.slice(0,oe),ae=O.slice(oe);if(ne!==D)break e;var le=Math.min(I-oe,M-oe),he=H.slice(H.length-le),ge=ae.slice(ae.length-le);if(he!==ge)break e;var G=H.slice(0,H.length-le),se=ae.slice(0,ae.length-le);return K(D,G,se,he)}}if(A.length>0&&$&&$.length===0)e:{var W=v.slice(0,A.index),he=v.slice(A.index+A.length),V=W.length,le=he.length;if(M<V+le)break e;var ee=O.slice(0,V),ge=O.slice(M-le);if(W!==ee||he!==ge)break e;var G=v.slice(V,I-le),se=O.slice(V,M-le);return K(W,G,se,he)}return null}function z(v,O,w,A){return r(v,O,w,A,!0)}return z.INSERT=e,z.DELETE=n,z.EQUAL=t,$i=z,$i}var Kr={exports:{}};Kr.exports;var Uo;function jc(){return Uo||(Uo=1,function(n,e){var t=200,r="__lodash_hash_undefined__",s=9007199254740991,i="[object Arguments]",a="[object Array]",o="[object Boolean]",c="[object Date]",u="[object Error]",h="[object Function]",p="[object GeneratorFunction]",d="[object Map]",f="[object Number]",m="[object Object]",b="[object Promise]",y="[object RegExp]",E="[object Set]",S="[object String]",N="[object Symbol]",T="[object WeakMap]",_="[object ArrayBuffer]",P="[object DataView]",R="[object Float32Array]",K="[object Float64Array]",U="[object Int8Array]",z="[object Int16Array]",v="[object Int32Array]",O="[object Uint8Array]",w="[object Uint8ClampedArray]",A="[object Uint16Array]",$="[object Uint32Array]",I=/[\\^$.*+?()[\]{}|]/g,M=/\w*$/,j=/^\[object .+?Constructor\]$/,D=/^(?:0|[1-9]\d*)$/,H={};H[i]=H[a]=H[_]=H[P]=H[o]=H[c]=H[R]=H[K]=H[U]=H[z]=H[v]=H[d]=H[f]=H[m]=H[y]=H[E]=H[S]=H[N]=H[O]=H[w]=H[A]=H[$]=!0,H[u]=H[h]=H[T]=!1;var te=typeof Ln=="object"&&Ln&&Ln.Object===Object&&Ln,Y=typeof self=="object"&&self&&self.Object===Object&&self,ne=te||Y||Function("return this")(),ae=e&&!e.nodeType&&e,V=ae&&!0&&n&&!n.nodeType&&n,W=V&&V.exports===ae;function ee(l,g){return l.set(g[0],g[1]),l}function G(l,g){return l.add(g),l}function se(l,g){for(var x=-1,q=l?l.length:0;++x<q&&g(l[x],x,l)!==!1;);return l}function oe(l,g){for(var x=-1,q=g.length,me=l.length;++x<q;)l[me+x]=g[x];return l}function le(l,g,x,q){for(var me=-1,ce=l?l.length:0;++me<ce;)x=g(x,l[me],me,l);return x}function he(l,g){for(var x=-1,q=Array(l);++x<l;)q[x]=g(x);return q}function ge(l,g){return l==null?void 0:l[g]}function ve(l){var g=!1;if(l!=null&&typeof l.toString!="function")try{g=!!(l+"")}catch{}return g}function ye(l){var g=-1,x=Array(l.size);return l.forEach(function(q,me){x[++g]=[me,q]}),x}function Ue(l,g){return function(x){return l(g(x))}}function Pe(l){var g=-1,x=Array(l.size);return l.forEach(function(q){x[++g]=q}),x}var Ze=Array.prototype,qe=Function.prototype,Le=Object.prototype,Ve=ne["__core-js_shared__"],it=function(){var l=/[^.]+$/.exec(Ve&&Ve.keys&&Ve.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),Ke=qe.toString,Re=Le.hasOwnProperty,Ge=Le.toString,ct=RegExp("^"+Ke.call(Re).replace(I,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),We=W?ne.Buffer:void 0,Xe=ne.Symbol,Me=ne.Uint8Array,Ie=Ue(Object.getPrototypeOf,Object),we=Object.create,et=Le.propertyIsEnumerable,gt=Ze.splice,Et=Object.getOwnPropertySymbols,tt=We?We.isBuffer:void 0,Ne=Ue(Object.keys,Object),ke=Pt(ne,"DataView"),Ye=Pt(ne,"Map"),Ae=Pt(ne,"Promise"),$e=Pt(ne,"Set"),kt=Pt(ne,"WeakMap"),Z=Pt(Object,"create"),J=St(ke),pe=St(Ye),de=St(Ae),at=St($e),Nt=St(kt),ot=Xe?Xe.prototype:void 0,Hn=ot?ot.valueOf:void 0;function Dt(l){var g=-1,x=l?l.length:0;for(this.clear();++g<x;){var q=l[g];this.set(q[0],q[1])}}function Mr(){this.__data__=Z?Z(null):{}}function Fn(l){return this.has(l)&&delete this.__data__[l]}function cr(l){var g=this.__data__;if(Z){var x=g[l];return x===r?void 0:x}return Re.call(g,l)?g[l]:void 0}function Un(l){var g=this.__data__;return Z?g[l]!==void 0:Re.call(g,l)}function zn(l,g){var x=this.__data__;return x[l]=Z&&g===void 0?r:g,this}Dt.prototype.clear=Mr,Dt.prototype.delete=Fn,Dt.prototype.get=cr,Dt.prototype.has=Un,Dt.prototype.set=zn;function nt(l){var g=-1,x=l?l.length:0;for(this.clear();++g<x;){var q=l[g];this.set(q[0],q[1])}}function ur(){this.__data__=[]}function Vn(l){var g=this.__data__,x=pt(g,l);if(x<0)return!1;var q=g.length-1;return x==q?g.pop():gt.call(g,x,1),!0}function hr(l){var g=this.__data__,x=pt(g,l);return x<0?void 0:g[x][1]}function kr(l){return pt(this.__data__,l)>-1}function Dr(l,g){var x=this.__data__,q=pt(x,l);return q<0?x.push([l,g]):x[q][1]=g,this}nt.prototype.clear=ur,nt.prototype.delete=Vn,nt.prototype.get=hr,nt.prototype.has=kr,nt.prototype.set=Dr;function rt(l){var g=-1,x=l?l.length:0;for(this.clear();++g<x;){var q=l[g];this.set(q[0],q[1])}}function dr(){this.__data__={hash:new Dt,map:new(Ye||nt),string:new Dt}}function hn(l){return Kn(this,l).delete(l)}function jr(l){return Kn(this,l).get(l)}function fr(l){return Kn(this,l).has(l)}function gr(l,g){return Kn(this,l).set(l,g),this}rt.prototype.clear=dr,rt.prototype.delete=hn,rt.prototype.get=jr,rt.prototype.has=fr,rt.prototype.set=gr;function ut(l){this.__data__=new nt(l)}function Pr(){this.__data__=new nt}function Ce(l){return this.__data__.delete(l)}function ue(l){return this.__data__.get(l)}function Te(l){return this.__data__.has(l)}function De(l,g){var x=this.__data__;if(x instanceof nt){var q=x.__data__;if(!Ye||q.length<t-1)return q.push([l,g]),this;x=this.__data__=new rt(q)}return x.set(l,g),this}ut.prototype.clear=Pr,ut.prototype.delete=Ce,ut.prototype.get=ue,ut.prototype.has=Te,ut.prototype.set=De;function Be(l,g){var x=Fr(l)||br(l)?he(l.length,String):[],q=x.length,me=!!q;for(var ce in l)Re.call(l,ce)&&!(me&&(ce=="length"||bi(ce,q)))&&x.push(ce);return x}function At(l,g,x){var q=l[g];(!(Re.call(l,g)&&bs(q,x))||x===void 0&&!(g in l))&&(l[g]=x)}function pt(l,g){for(var x=l.length;x--;)if(bs(l[x][0],g))return x;return-1}function Qe(l,g){return l&&Hr(g,zr(g),l)}function Ct(l,g,x,q,me,ce,xe){var Se;if(q&&(Se=ce?q(l,me,ce,xe):q(l)),Se!==void 0)return Se;if(!en(l))return l;var Je=Fr(l);if(Je){if(Se=pi(l),!g)return di(l,Se)}else{var _e=fn(l),mt=_e==h||_e==p;if(vs(l))return mr(l,g);if(_e==m||_e==i||mt&&!ce){if(ve(l))return ce?l:{};if(Se=Jt(mt?{}:l),!g)return fi(l,Qe(Se,l))}else{if(!H[_e])return ce?l:{};Se=mi(l,_e,Ct,g)}}xe||(xe=new ut);var xt=xe.get(l);if(xt)return xt;if(xe.set(l,Se),!Je)var st=x?gi(l):zr(l);return se(st||l,function(bt,ht){st&&(ht=bt,bt=l[ht]),At(Se,ht,Ct(bt,g,x,q,ht,l,xe))}),Se}function jt(l){return en(l)?we(l):{}}function Qt(l,g,x){var q=g(l);return Fr(l)?q:oe(q,x(l))}function Ot(l){return Ge.call(l)}function Tn(l){if(!en(l)||yi(l))return!1;var g=Ur(l)||ve(l)?ct:j;return g.test(St(l))}function pr(l){if(!ps(l))return Ne(l);var g=[];for(var x in Object(l))Re.call(l,x)&&x!="constructor"&&g.push(x);return g}function mr(l,g){if(g)return l.slice();var x=new l.constructor(l.length);return l.copy(x),x}function Br(l){var g=new l.constructor(l.byteLength);return new Me(g).set(new Me(l)),g}function Gn(l,g){var x=g?Br(l.buffer):l.buffer;return new l.constructor(x,l.byteOffset,l.byteLength)}function fs(l,g,x){var q=g?x(ye(l),!0):ye(l);return le(q,ee,new l.constructor)}function gs(l){var g=new l.constructor(l.source,M.exec(l));return g.lastIndex=l.lastIndex,g}function ci(l,g,x){var q=g?x(Pe(l),!0):Pe(l);return le(q,G,new l.constructor)}function ui(l){return Hn?Object(Hn.call(l)):{}}function hi(l,g){var x=g?Br(l.buffer):l.buffer;return new l.constructor(x,l.byteOffset,l.length)}function di(l,g){var x=-1,q=l.length;for(g||(g=Array(q));++x<q;)g[x]=l[x];return g}function Hr(l,g,x,q){x||(x={});for(var me=-1,ce=g.length;++me<ce;){var xe=g[me],Se=void 0;At(x,xe,Se===void 0?l[xe]:Se)}return x}function fi(l,g){return Hr(l,dn(l),g)}function gi(l){return Qt(l,zr,dn)}function Kn(l,g){var x=l.__data__;return vi(g)?x[typeof g=="string"?"string":"hash"]:x.map}function Pt(l,g){var x=ge(l,g);return Tn(x)?x:void 0}var dn=Et?Ue(Et,Object):Si,fn=Ot;(ke&&fn(new ke(new ArrayBuffer(1)))!=P||Ye&&fn(new Ye)!=d||Ae&&fn(Ae.resolve())!=b||$e&&fn(new $e)!=E||kt&&fn(new kt)!=T)&&(fn=function(l){var g=Ge.call(l),x=g==m?l.constructor:void 0,q=x?St(x):void 0;if(q)switch(q){case J:return P;case pe:return d;case de:return b;case at:return E;case Nt:return T}return g});function pi(l){var g=l.length,x=l.constructor(g);return g&&typeof l[0]=="string"&&Re.call(l,"index")&&(x.index=l.index,x.input=l.input),x}function Jt(l){return typeof l.constructor=="function"&&!ps(l)?jt(Ie(l)):{}}function mi(l,g,x,q){var me=l.constructor;switch(g){case _:return Br(l);case o:case c:return new me(+l);case P:return Gn(l,q);case R:case K:case U:case z:case v:case O:case w:case A:case $:return hi(l,q);case d:return fs(l,q,x);case f:case S:return new me(l);case y:return gs(l);case E:return ci(l,q,x);case N:return ui(l)}}function bi(l,g){return g=g??s,!!g&&(typeof l=="number"||D.test(l))&&l>-1&&l%1==0&&l<g}function vi(l){var g=typeof l;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?l!=="__proto__":l===null}function yi(l){return!!it&&it in l}function ps(l){var g=l&&l.constructor,x=typeof g=="function"&&g.prototype||Le;return l===x}function St(l){if(l!=null){try{return Ke.call(l)}catch{}try{return l+""}catch{}}return""}function ms(l){return Ct(l,!0,!0)}function bs(l,g){return l===g||l!==l&&g!==g}function br(l){return Ci(l)&&Re.call(l,"callee")&&(!et.call(l,"callee")||Ge.call(l)==i)}var Fr=Array.isArray;function vr(l){return l!=null&&ys(l.length)&&!Ur(l)}function Ci(l){return Cs(l)&&vr(l)}var vs=tt||Ei;function Ur(l){var g=en(l)?Ge.call(l):"";return g==h||g==p}function ys(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=s}function en(l){var g=typeof l;return!!l&&(g=="object"||g=="function")}function Cs(l){return!!l&&typeof l=="object"}function zr(l){return vr(l)?Be(l):pr(l)}function Si(){return[]}function Ei(){return!1}n.exports=ms}(Kr,Kr.exports)),Kr.exports}var Wr={exports:{}};Wr.exports;var zo;function Pc(){return zo||(zo=1,function(n,e){var t=200,r="__lodash_hash_undefined__",s=1,i=2,a=9007199254740991,o="[object Arguments]",c="[object Array]",u="[object AsyncFunction]",h="[object Boolean]",p="[object Date]",d="[object Error]",f="[object Function]",m="[object GeneratorFunction]",b="[object Map]",y="[object Number]",E="[object Null]",S="[object Object]",N="[object Promise]",T="[object Proxy]",_="[object RegExp]",P="[object Set]",R="[object String]",K="[object Symbol]",U="[object Undefined]",z="[object WeakMap]",v="[object ArrayBuffer]",O="[object DataView]",w="[object Float32Array]",A="[object Float64Array]",$="[object Int8Array]",I="[object Int16Array]",M="[object Int32Array]",j="[object Uint8Array]",D="[object Uint8ClampedArray]",H="[object Uint16Array]",te="[object Uint32Array]",Y=/[\\^$.*+?()[\]{}|]/g,ne=/^\[object .+?Constructor\]$/,ae=/^(?:0|[1-9]\d*)$/,V={};V[w]=V[A]=V[$]=V[I]=V[M]=V[j]=V[D]=V[H]=V[te]=!0,V[o]=V[c]=V[v]=V[h]=V[O]=V[p]=V[d]=V[f]=V[b]=V[y]=V[S]=V[_]=V[P]=V[R]=V[z]=!1;var W=typeof Ln=="object"&&Ln&&Ln.Object===Object&&Ln,ee=typeof self=="object"&&self&&self.Object===Object&&self,G=W||ee||Function("return this")(),se=e&&!e.nodeType&&e,oe=se&&!0&&n&&!n.nodeType&&n,le=oe&&oe.exports===se,he=le&&W.process,ge=function(){try{return he&&he.binding&&he.binding("util")}catch{}}(),ve=ge&&ge.isTypedArray;function ye(l,g){for(var x=-1,q=l==null?0:l.length,me=0,ce=[];++x<q;){var xe=l[x];g(xe,x,l)&&(ce[me++]=xe)}return ce}function Ue(l,g){for(var x=-1,q=g.length,me=l.length;++x<q;)l[me+x]=g[x];return l}function Pe(l,g){for(var x=-1,q=l==null?0:l.length;++x<q;)if(g(l[x],x,l))return!0;return!1}function Ze(l,g){for(var x=-1,q=Array(l);++x<l;)q[x]=g(x);return q}function qe(l){return function(g){return l(g)}}function Le(l,g){return l.has(g)}function Ve(l,g){return l==null?void 0:l[g]}function it(l){var g=-1,x=Array(l.size);return l.forEach(function(q,me){x[++g]=[me,q]}),x}function Ke(l,g){return function(x){return l(g(x))}}function Re(l){var g=-1,x=Array(l.size);return l.forEach(function(q){x[++g]=q}),x}var Ge=Array.prototype,ct=Function.prototype,We=Object.prototype,Xe=G["__core-js_shared__"],Me=ct.toString,Ie=We.hasOwnProperty,we=function(){var l=/[^.]+$/.exec(Xe&&Xe.keys&&Xe.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),et=We.toString,gt=RegExp("^"+Me.call(Ie).replace(Y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Et=le?G.Buffer:void 0,tt=G.Symbol,Ne=G.Uint8Array,ke=We.propertyIsEnumerable,Ye=Ge.splice,Ae=tt?tt.toStringTag:void 0,$e=Object.getOwnPropertySymbols,kt=Et?Et.isBuffer:void 0,Z=Ke(Object.keys,Object),J=dn(G,"DataView"),pe=dn(G,"Map"),de=dn(G,"Promise"),at=dn(G,"Set"),Nt=dn(G,"WeakMap"),ot=dn(Object,"create"),Hn=St(J),Dt=St(pe),Mr=St(de),Fn=St(at),cr=St(Nt),Un=tt?tt.prototype:void 0,zn=Un?Un.valueOf:void 0;function nt(l){var g=-1,x=l==null?0:l.length;for(this.clear();++g<x;){var q=l[g];this.set(q[0],q[1])}}function ur(){this.__data__=ot?ot(null):{},this.size=0}function Vn(l){var g=this.has(l)&&delete this.__data__[l];return this.size-=g?1:0,g}function hr(l){var g=this.__data__;if(ot){var x=g[l];return x===r?void 0:x}return Ie.call(g,l)?g[l]:void 0}function kr(l){var g=this.__data__;return ot?g[l]!==void 0:Ie.call(g,l)}function Dr(l,g){var x=this.__data__;return this.size+=this.has(l)?0:1,x[l]=ot&&g===void 0?r:g,this}nt.prototype.clear=ur,nt.prototype.delete=Vn,nt.prototype.get=hr,nt.prototype.has=kr,nt.prototype.set=Dr;function rt(l){var g=-1,x=l==null?0:l.length;for(this.clear();++g<x;){var q=l[g];this.set(q[0],q[1])}}function dr(){this.__data__=[],this.size=0}function hn(l){var g=this.__data__,x=mr(g,l);if(x<0)return!1;var q=g.length-1;return x==q?g.pop():Ye.call(g,x,1),--this.size,!0}function jr(l){var g=this.__data__,x=mr(g,l);return x<0?void 0:g[x][1]}function fr(l){return mr(this.__data__,l)>-1}function gr(l,g){var x=this.__data__,q=mr(x,l);return q<0?(++this.size,x.push([l,g])):x[q][1]=g,this}rt.prototype.clear=dr,rt.prototype.delete=hn,rt.prototype.get=jr,rt.prototype.has=fr,rt.prototype.set=gr;function ut(l){var g=-1,x=l==null?0:l.length;for(this.clear();++g<x;){var q=l[g];this.set(q[0],q[1])}}function Pr(){this.size=0,this.__data__={hash:new nt,map:new(pe||rt),string:new nt}}function Ce(l){var g=Pt(this,l).delete(l);return this.size-=g?1:0,g}function ue(l){return Pt(this,l).get(l)}function Te(l){return Pt(this,l).has(l)}function De(l,g){var x=Pt(this,l),q=x.size;return x.set(l,g),this.size+=x.size==q?0:1,this}ut.prototype.clear=Pr,ut.prototype.delete=Ce,ut.prototype.get=ue,ut.prototype.has=Te,ut.prototype.set=De;function Be(l){var g=-1,x=l==null?0:l.length;for(this.__data__=new ut;++g<x;)this.add(l[g])}function At(l){return this.__data__.set(l,r),this}function pt(l){return this.__data__.has(l)}Be.prototype.add=Be.prototype.push=At,Be.prototype.has=pt;function Qe(l){var g=this.__data__=new rt(l);this.size=g.size}function Ct(){this.__data__=new rt,this.size=0}function jt(l){var g=this.__data__,x=g.delete(l);return this.size=g.size,x}function Qt(l){return this.__data__.get(l)}function Ot(l){return this.__data__.has(l)}function Tn(l,g){var x=this.__data__;if(x instanceof rt){var q=x.__data__;if(!pe||q.length<t-1)return q.push([l,g]),this.size=++x.size,this;x=this.__data__=new ut(q)}return x.set(l,g),this.size=x.size,this}Qe.prototype.clear=Ct,Qe.prototype.delete=jt,Qe.prototype.get=Qt,Qe.prototype.has=Ot,Qe.prototype.set=Tn;function pr(l,g){var x=br(l),q=!x&&bs(l),me=!x&&!q&&vr(l),ce=!x&&!q&&!me&&Cs(l),xe=x||q||me||ce,Se=xe?Ze(l.length,String):[],Je=Se.length;for(var _e in l)Ie.call(l,_e)&&!(xe&&(_e=="length"||me&&(_e=="offset"||_e=="parent")||ce&&(_e=="buffer"||_e=="byteLength"||_e=="byteOffset")||mi(_e,Je)))&&Se.push(_e);return Se}function mr(l,g){for(var x=l.length;x--;)if(ms(l[x][0],g))return x;return-1}function Br(l,g,x){var q=g(l);return br(l)?q:Ue(q,x(l))}function Gn(l){return l==null?l===void 0?U:E:Ae&&Ae in Object(l)?fn(l):ps(l)}function fs(l){return en(l)&&Gn(l)==o}function gs(l,g,x,q,me){return l===g?!0:l==null||g==null||!en(l)&&!en(g)?l!==l&&g!==g:ci(l,g,x,q,gs,me)}function ci(l,g,x,q,me,ce){var xe=br(l),Se=br(g),Je=xe?c:Jt(l),_e=Se?c:Jt(g);Je=Je==o?S:Je,_e=_e==o?S:_e;var mt=Je==S,xt=_e==S,st=Je==_e;if(st&&vr(l)){if(!vr(g))return!1;xe=!0,mt=!1}if(st&&!mt)return ce||(ce=new Qe),xe||Cs(l)?Hr(l,g,x,q,me,ce):fi(l,g,Je,x,q,me,ce);if(!(x&s)){var bt=mt&&Ie.call(l,"__wrapped__"),ht=xt&&Ie.call(g,"__wrapped__");if(bt||ht){var On=bt?l.value():l,gn=ht?g.value():g;return ce||(ce=new Qe),me(On,gn,x,q,ce)}}return st?(ce||(ce=new Qe),gi(l,g,x,q,me,ce)):!1}function ui(l){if(!ys(l)||vi(l))return!1;var g=vs(l)?gt:ne;return g.test(St(l))}function hi(l){return en(l)&&Ur(l.length)&&!!V[Gn(l)]}function di(l){if(!yi(l))return Z(l);var g=[];for(var x in Object(l))Ie.call(l,x)&&x!="constructor"&&g.push(x);return g}function Hr(l,g,x,q,me,ce){var xe=x&s,Se=l.length,Je=g.length;if(Se!=Je&&!(xe&&Je>Se))return!1;var _e=ce.get(l);if(_e&&ce.get(g))return _e==g;var mt=-1,xt=!0,st=x&i?new Be:void 0;for(ce.set(l,g),ce.set(g,l);++mt<Se;){var bt=l[mt],ht=g[mt];if(q)var On=xe?q(ht,bt,mt,g,l,ce):q(bt,ht,mt,l,g,ce);if(On!==void 0){if(On)continue;xt=!1;break}if(st){if(!Pe(g,function(gn,Wn){if(!Le(st,Wn)&&(bt===gn||me(bt,gn,x,q,ce)))return st.push(Wn)})){xt=!1;break}}else if(!(bt===ht||me(bt,ht,x,q,ce))){xt=!1;break}}return ce.delete(l),ce.delete(g),xt}function fi(l,g,x,q,me,ce,xe){switch(x){case O:if(l.byteLength!=g.byteLength||l.byteOffset!=g.byteOffset)return!1;l=l.buffer,g=g.buffer;case v:return!(l.byteLength!=g.byteLength||!ce(new Ne(l),new Ne(g)));case h:case p:case y:return ms(+l,+g);case d:return l.name==g.name&&l.message==g.message;case _:case R:return l==g+"";case b:var Se=it;case P:var Je=q&s;if(Se||(Se=Re),l.size!=g.size&&!Je)return!1;var _e=xe.get(l);if(_e)return _e==g;q|=i,xe.set(l,g);var mt=Hr(Se(l),Se(g),q,me,ce,xe);return xe.delete(l),mt;case K:if(zn)return zn.call(l)==zn.call(g)}return!1}function gi(l,g,x,q,me,ce){var xe=x&s,Se=Kn(l),Je=Se.length,_e=Kn(g),mt=_e.length;if(Je!=mt&&!xe)return!1;for(var xt=Je;xt--;){var st=Se[xt];if(!(xe?st in g:Ie.call(g,st)))return!1}var bt=ce.get(l);if(bt&&ce.get(g))return bt==g;var ht=!0;ce.set(l,g),ce.set(g,l);for(var On=xe;++xt<Je;){st=Se[xt];var gn=l[st],Wn=g[st];if(q)var Ja=xe?q(Wn,gn,st,g,l,ce):q(gn,Wn,st,l,g,ce);if(!(Ja===void 0?gn===Wn||me(gn,Wn,x,q,ce):Ja)){ht=!1;break}On||(On=st=="constructor")}if(ht&&!On){var Ss=l.constructor,Es=g.constructor;Ss!=Es&&"constructor"in l&&"constructor"in g&&!(typeof Ss=="function"&&Ss instanceof Ss&&typeof Es=="function"&&Es instanceof Es)&&(ht=!1)}return ce.delete(l),ce.delete(g),ht}function Kn(l){return Br(l,zr,pi)}function Pt(l,g){var x=l.__data__;return bi(g)?x[typeof g=="string"?"string":"hash"]:x.map}function dn(l,g){var x=Ve(l,g);return ui(x)?x:void 0}function fn(l){var g=Ie.call(l,Ae),x=l[Ae];try{l[Ae]=void 0;var q=!0}catch{}var me=et.call(l);return q&&(g?l[Ae]=x:delete l[Ae]),me}var pi=$e?function(l){return l==null?[]:(l=Object(l),ye($e(l),function(g){return ke.call(l,g)}))}:Si,Jt=Gn;(J&&Jt(new J(new ArrayBuffer(1)))!=O||pe&&Jt(new pe)!=b||de&&Jt(de.resolve())!=N||at&&Jt(new at)!=P||Nt&&Jt(new Nt)!=z)&&(Jt=function(l){var g=Gn(l),x=g==S?l.constructor:void 0,q=x?St(x):"";if(q)switch(q){case Hn:return O;case Dt:return b;case Mr:return N;case Fn:return P;case cr:return z}return g});function mi(l,g){return g=g??a,!!g&&(typeof l=="number"||ae.test(l))&&l>-1&&l%1==0&&l<g}function bi(l){var g=typeof l;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?l!=="__proto__":l===null}function vi(l){return!!we&&we in l}function yi(l){var g=l&&l.constructor,x=typeof g=="function"&&g.prototype||We;return l===x}function ps(l){return et.call(l)}function St(l){if(l!=null){try{return Me.call(l)}catch{}try{return l+""}catch{}}return""}function ms(l,g){return l===g||l!==l&&g!==g}var bs=fs(function(){return arguments}())?fs:function(l){return en(l)&&Ie.call(l,"callee")&&!ke.call(l,"callee")},br=Array.isArray;function Fr(l){return l!=null&&Ur(l.length)&&!vs(l)}var vr=kt||Ei;function Ci(l,g){return gs(l,g)}function vs(l){if(!ys(l))return!1;var g=Gn(l);return g==f||g==m||g==u||g==T}function Ur(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=a}function ys(l){var g=typeof l;return l!=null&&(g=="object"||g=="function")}function en(l){return l!=null&&typeof l=="object"}var Cs=ve?qe(ve):hi;function zr(l){return Fr(l)?pr(l):di(l)}function Si(){return[]}function Ei(){return!1}n.exports=Ci}(Wr,Wr.exports)),Wr.exports}var As={},Vo;function Db(){if(Vo)return As;Vo=1,Object.defineProperty(As,"__esModule",{value:!0});const n=jc(),e=Pc();var t;return function(r){function s(c={},u={},h=!1){typeof c!="object"&&(c={}),typeof u!="object"&&(u={});let p=n(u);h||(p=Object.keys(p).reduce((d,f)=>(p[f]!=null&&(d[f]=p[f]),d),{}));for(const d in c)c[d]!==void 0&&u[d]===void 0&&(p[d]=c[d]);return Object.keys(p).length>0?p:void 0}r.compose=s;function i(c={},u={}){typeof c!="object"&&(c={}),typeof u!="object"&&(u={});const h=Object.keys(c).concat(Object.keys(u)).reduce((p,d)=>(e(c[d],u[d])||(p[d]=u[d]===void 0?null:u[d]),p),{});return Object.keys(h).length>0?h:void 0}r.diff=i;function a(c={},u={}){c=c||{};const h=Object.keys(u).reduce((p,d)=>(u[d]!==c[d]&&c[d]!==void 0&&(p[d]=u[d]),p),{});return Object.keys(c).reduce((p,d)=>(c[d]!==u[d]&&u[d]===void 0&&(p[d]=null),p),h)}r.invert=a;function o(c,u,h=!1){if(typeof c!="object")return u;if(typeof u!="object")return;if(!h)return u;const p=Object.keys(u).reduce((d,f)=>(c[f]===void 0&&(d[f]=u[f]),d),{});return Object.keys(p).length>0?p:void 0}r.transform=o}(t||(t={})),As.default=t,As}var Ts={},Go;function Bc(){if(Go)return Ts;Go=1,Object.defineProperty(Ts,"__esModule",{value:!0});var n;return function(e){function t(r){return typeof r.delete=="number"?r.delete:typeof r.retain=="number"?r.retain:typeof r.retain=="object"&&r.retain!==null?1:typeof r.insert=="string"?r.insert.length:1}e.length=t}(n||(n={})),Ts.default=n,Ts}var Os={},Ko;function jb(){if(Ko)return Os;Ko=1,Object.defineProperty(Os,"__esModule",{value:!0});const n=Bc();class e{constructor(r){this.ops=r,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(r){r||(r=1/0);const s=this.ops[this.index];if(s){const i=this.offset,a=n.default.length(s);if(r>=a-i?(r=a-i,this.index+=1,this.offset=0):this.offset+=r,typeof s.delete=="number")return{delete:r};{const o={};return s.attributes&&(o.attributes=s.attributes),typeof s.retain=="number"?o.retain=r:typeof s.retain=="object"&&s.retain!==null?o.retain=s.retain:typeof s.insert=="string"?o.insert=s.insert.substr(i,r):o.insert=s.insert,o}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?n.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const r=this.ops[this.index];return r?typeof r.delete=="number"?"delete":typeof r.retain=="number"||typeof r.retain=="object"&&r.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const r=this.offset,s=this.index,i=this.next(),a=this.ops.slice(this.index);return this.offset=r,this.index=s,[i].concat(a)}}else return[]}}return Os.default=e,Os}var Wo;function Pb(){return Wo||(Wo=1,function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const t=kb(),r=jc(),s=Pc(),i=Db();e.AttributeMap=i.default;const a=Bc();e.Op=a.default;const o=jb();e.OpIterator=o.default;const c="\0",u=(p,d)=>{if(typeof p!="object"||p===null)throw new Error(`cannot retain a ${typeof p}`);if(typeof d!="object"||d===null)throw new Error(`cannot retain a ${typeof d}`);const f=Object.keys(p)[0];if(!f||f!==Object.keys(d)[0])throw new Error(`embed types not matched: ${f} != ${Object.keys(d)[0]}`);return[f,p[f],d[f]]};class h{constructor(d){Array.isArray(d)?this.ops=d:d!=null&&Array.isArray(d.ops)?this.ops=d.ops:this.ops=[]}static registerEmbed(d,f){this.handlers[d]=f}static unregisterEmbed(d){delete this.handlers[d]}static getHandler(d){const f=this.handlers[d];if(!f)throw new Error(`no handlers for embed type "${d}"`);return f}insert(d,f){const m={};return typeof d=="string"&&d.length===0?this:(m.insert=d,f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(m.attributes=f),this.push(m))}delete(d){return d<=0?this:this.push({delete:d})}retain(d,f){if(typeof d=="number"&&d<=0)return this;const m={retain:d};return f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(m.attributes=f),this.push(m)}push(d){let f=this.ops.length,m=this.ops[f-1];if(d=r(d),typeof m=="object"){if(typeof d.delete=="number"&&typeof m.delete=="number")return this.ops[f-1]={delete:m.delete+d.delete},this;if(typeof m.delete=="number"&&d.insert!=null&&(f-=1,m=this.ops[f-1],typeof m!="object"))return this.ops.unshift(d),this;if(s(d.attributes,m.attributes)){if(typeof d.insert=="string"&&typeof m.insert=="string")return this.ops[f-1]={insert:m.insert+d.insert},typeof d.attributes=="object"&&(this.ops[f-1].attributes=d.attributes),this;if(typeof d.retain=="number"&&typeof m.retain=="number")return this.ops[f-1]={retain:m.retain+d.retain},typeof d.attributes=="object"&&(this.ops[f-1].attributes=d.attributes),this}}return f===this.ops.length?this.ops.push(d):this.ops.splice(f,0,d),this}chop(){const d=this.ops[this.ops.length-1];return d&&typeof d.retain=="number"&&!d.attributes&&this.ops.pop(),this}filter(d){return this.ops.filter(d)}forEach(d){this.ops.forEach(d)}map(d){return this.ops.map(d)}partition(d){const f=[],m=[];return this.forEach(b=>{(d(b)?f:m).push(b)}),[f,m]}reduce(d,f){return this.ops.reduce(d,f)}changeLength(){return this.reduce((d,f)=>f.insert?d+a.default.length(f):f.delete?d-f.delete:d,0)}length(){return this.reduce((d,f)=>d+a.default.length(f),0)}slice(d=0,f=1/0){const m=[],b=new o.default(this.ops);let y=0;for(;y<f&&b.hasNext();){let E;y<d?E=b.next(d-y):(E=b.next(f-y),m.push(E)),y+=a.default.length(E)}return new h(m)}compose(d){const f=new o.default(this.ops),m=new o.default(d.ops),b=[],y=m.peek();if(y!=null&&typeof y.retain=="number"&&y.attributes==null){let S=y.retain;for(;f.peekType()==="insert"&&f.peekLength()<=S;)S-=f.peekLength(),b.push(f.next());y.retain-S>0&&m.next(y.retain-S)}const E=new h(b);for(;f.hasNext()||m.hasNext();)if(m.peekType()==="insert")E.push(m.next());else if(f.peekType()==="delete")E.push(f.next());else{const S=Math.min(f.peekLength(),m.peekLength()),N=f.next(S),T=m.next(S);if(T.retain){const _={};if(typeof N.retain=="number")_.retain=typeof T.retain=="number"?S:T.retain;else if(typeof T.retain=="number")N.retain==null?_.insert=N.insert:_.retain=N.retain;else{const R=N.retain==null?"insert":"retain",[K,U,z]=u(N[R],T.retain),v=h.getHandler(K);_[R]={[K]:v.compose(U,z,R==="retain")}}const P=i.default.compose(N.attributes,T.attributes,typeof N.retain=="number");if(P&&(_.attributes=P),E.push(_),!m.hasNext()&&s(E.ops[E.ops.length-1],_)){const R=new h(f.rest());return E.concat(R).chop()}}else typeof T.delete=="number"&&(typeof N.retain=="number"||typeof N.retain=="object"&&N.retain!==null)&&E.push(T)}return E.chop()}concat(d){const f=new h(this.ops.slice());return d.ops.length>0&&(f.push(d.ops[0]),f.ops=f.ops.concat(d.ops.slice(1))),f}diff(d,f){if(this.ops===d.ops)return new h;const m=[this,d].map(N=>N.map(T=>{if(T.insert!=null)return typeof T.insert=="string"?T.insert:c;const _=N===d?"on":"with";throw new Error("diff() called "+_+" non-document")}).join("")),b=new h,y=t(m[0],m[1],f,!0),E=new o.default(this.ops),S=new o.default(d.ops);return y.forEach(N=>{let T=N[1].length;for(;T>0;){let _=0;switch(N[0]){case t.INSERT:_=Math.min(S.peekLength(),T),b.push(S.next(_));break;case t.DELETE:_=Math.min(T,E.peekLength()),E.next(_),b.delete(_);break;case t.EQUAL:_=Math.min(E.peekLength(),S.peekLength(),T);const P=E.next(_),R=S.next(_);s(P.insert,R.insert)?b.retain(_,i.default.diff(P.attributes,R.attributes)):b.push(R).delete(_);break}T-=_}}),b.chop()}eachLine(d,f=`
`){const m=new o.default(this.ops);let b=new h,y=0;for(;m.hasNext();){if(m.peekType()!=="insert")return;const E=m.peek(),S=a.default.length(E)-m.peekLength(),N=typeof E.insert=="string"?E.insert.indexOf(f,S)-S:-1;if(N<0)b.push(m.next());else if(N>0)b.push(m.next(N));else{if(d(b,m.next(1).attributes||{},y)===!1)return;y+=1,b=new h}}b.length()>0&&d(b,{},y)}invert(d){const f=new h;return this.reduce((m,b)=>{if(b.insert)f.delete(a.default.length(b));else{if(typeof b.retain=="number"&&b.attributes==null)return f.retain(b.retain),m+b.retain;if(b.delete||typeof b.retain=="number"){const y=b.delete||b.retain;return d.slice(m,m+y).forEach(S=>{b.delete?f.push(S):b.retain&&b.attributes&&f.retain(a.default.length(S),i.default.invert(b.attributes,S.attributes))}),m+y}else if(typeof b.retain=="object"&&b.retain!==null){const y=d.slice(m,m+1),E=new o.default(y.ops).next(),[S,N,T]=u(b.retain,E.insert),_=h.getHandler(S);return f.retain({[S]:_.invert(N,T)},i.default.invert(b.attributes,E.attributes)),m+1}}return m},0),f.chop()}transform(d,f=!1){if(f=!!f,typeof d=="number")return this.transformPosition(d,f);const m=d,b=new o.default(this.ops),y=new o.default(m.ops),E=new h;for(;b.hasNext()||y.hasNext();)if(b.peekType()==="insert"&&(f||y.peekType()!=="insert"))E.retain(a.default.length(b.next()));else if(y.peekType()==="insert")E.push(y.next());else{const S=Math.min(b.peekLength(),y.peekLength()),N=b.next(S),T=y.next(S);if(N.delete)continue;if(T.delete)E.push(T);else{const _=N.retain,P=T.retain;let R=typeof P=="object"&&P!==null?P:S;if(typeof _=="object"&&_!==null&&typeof P=="object"&&P!==null){const K=Object.keys(_)[0];if(K===Object.keys(P)[0]){const U=h.getHandler(K);U&&(R={[K]:U.transform(_[K],P[K],f)})}}E.retain(R,i.default.transform(N.attributes,T.attributes,f))}}return E.chop()}transformPosition(d,f=!1){f=!!f;const m=new o.default(this.ops);let b=0;for(;m.hasNext()&&b<=d;){const y=m.peekLength(),E=m.peekType();if(m.next(),E==="delete"){d-=Math.min(y,d-b);continue}else E==="insert"&&(b<d||!f)&&(d+=y);b+=y}return d}}h.Op=a.default,h.OpIterator=o.default,h.AttributeMap=i.default,h.handlers={},e.default=h,n.exports=h,n.exports.default=h}(Ns,Ns.exports)),Ns.exports}var $t=Pb();const re=Pl($t);class Zt extends Tt{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}Zt.blotName="break";Zt.tagName="BR";let Wt=class extends Ks{};const Bb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function ai(n){return n.replace(/[&<>"']/g,e=>Bb[e])}const tn=class tn extends Ha{static compare(e,t){const r=tn.order.indexOf(e),s=tn.order.indexOf(t);return r>=0||s>=0?r-s:e===t?0:e<t?-1:1}formatAt(e,t,r,s){if(tn.compare(this.statics.blotName,r)<0&&this.scroll.query(r,ie.BLOT)){const i=this.isolate(e,t);s&&i.wrap(r,s)}else super.formatAt(e,t,r,s)}optimize(e){if(super.optimize(e),this.parent instanceof tn&&tn.compare(this.statics.blotName,this.parent.statics.blotName)>0){const t=this.parent.isolate(this.offset(),this.length());this.moveChildren(t),t.wrap(this)}}};X(tn,"allowedChildren",[tn,Zt,Tt,Wt]),X(tn,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);let cn=tn;const Xo=1;class ft extends rs{constructor(){super(...arguments);X(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=Hc(this)),this.cache.delta}deleteAt(t,r){super.deleteAt(t,r),this.cache={}}formatAt(t,r,s,i){r<=0||(this.scroll.query(s,ie.BLOCK)?t+r===this.length()&&this.format(s,i):super.formatAt(t,Math.min(r,this.length()-t-1),s,i),this.cache={})}insertAt(t,r,s){if(s!=null){super.insertAt(t,r,s),this.cache={};return}if(r.length===0)return;const i=r.split(`
`),a=i.shift();a.length>0&&(t<this.length()-1||this.children.tail==null?super.insertAt(Math.min(t,this.length()-1),a):this.children.tail.insertAt(this.children.tail.length(),a),this.cache={});let o=this;i.reduce((c,u)=>(o=o.split(c,!0),o.insertAt(0,u),u.length),t+a.length)}insertBefore(t,r){const{head:s}=this.children;super.insertBefore(t,r),s instanceof Zt&&s.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+Xo),this.cache.length}moveChildren(t,r){super.moveChildren(t,r),this.cache={}}optimize(t){super.optimize(t),this.cache={}}path(t){return super.path(t,!0)}removeChild(t){super.removeChild(t),this.cache={}}split(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r&&(t===0||t>=this.length()-Xo)){const i=this.clone();return t===0?(this.parent.insertBefore(i,this),this):(this.parent.insertBefore(i,this.next),i)}const s=super.split(t,r);return this.cache={},s}}ft.blotName="block";ft.tagName="P";ft.defaultChild=Zt;ft.allowedChildren=[Zt,cn,Tt,Wt];class Rt extends Tt{attach(){super.attach(),this.attributes=new si(this.domNode)}delta(){return new re().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,t){const r=this.scroll.query(e,ie.BLOCK_ATTRIBUTE);r!=null&&this.attributes.attribute(r,t)}formatAt(e,t,r,s){this.format(r,s)}insertAt(e,t,r){if(r!=null){super.insertAt(e,t,r);return}const s=t.split(`
`),i=s.pop(),a=s.map(c=>{const u=this.scroll.create(ft.blotName);return u.insertAt(0,c),u}),o=this.split(e);a.forEach(c=>{this.parent.insertBefore(c,o)}),i&&this.parent.insertBefore(this.scroll.create("text",i),o)}}Rt.scope=ie.BLOCK_BLOT;function Hc(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.descendants(vt).reduce((t,r)=>r.length()===0?t:t.insert(r.value(),Lt(r,{},e)),new re).insert(`
`,Lt(n))}function Lt(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return n==null||("formats"in n&&typeof n.formats=="function"&&(e={...e,...n.formats()},t&&delete e["code-token"]),n.parent==null||n.parent.statics.blotName==="scroll"||n.parent.statics.scope!==n.statics.scope)?e:Lt(n.parent,e,t)}const _t=class _t extends Tt{static value(){}constructor(e,t,r){super(e,t),this.selection=r,this.textNode=document.createTextNode(_t.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,t){if(this.savedLength!==0){super.format(e,t);return}let r=this,s=0;for(;r!=null&&r.statics.scope!==ie.BLOCK_BLOT;)s+=r.offset(r.parent),r=r.parent;r!=null&&(this.savedLength=_t.CONTENTS.length,r.optimize(),r.formatAt(s,_t.CONTENTS.length,e,t),this.savedLength=0)}index(e,t){return e===this.textNode?0:super.index(e,t)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const t=this.prev instanceof Wt?this.prev:null,r=t?t.length():0,s=this.next instanceof Wt?this.next:null,i=s?s.text:"",{textNode:a}=this,o=a.data.split(_t.CONTENTS).join("");a.data=_t.CONTENTS;let c;if(t)c=t,(o||s)&&(t.insertAt(t.length(),o+i),s&&s.remove());else if(s)c=s,s.insertAt(0,o);else{const u=document.createTextNode(o);c=this.scroll.create(u),this.parent.insertBefore(c,this)}if(this.remove(),e){const u=(d,f)=>t&&d===t.domNode?f:d===a?r+f-1:s&&d===s.domNode?r+o.length+f:null,h=u(e.start.node,e.start.offset),p=u(e.end.node,e.end.offset);if(h!==null&&p!==null)return{startNode:c.domNode,startOffset:h,endNode:c.domNode,endOffset:p}}return null}update(e,t){if(e.some(r=>r.type==="characterData"&&r.target===this.textNode)){const r=this.restore();r&&(t.range=r)}}optimize(e){super.optimize(e);let{parent:t}=this;for(;t;){if(t.domNode.tagName==="A"){this.savedLength=_t.CONTENTS.length,t.isolate(this.offset(t),this.length()).unwrap(),this.savedLength=0;break}t=t.parent}}value(){return""}};X(_t,"blotName","cursor"),X(_t,"className","ql-cursor"),X(_t,"tagName","span"),X(_t,"CONTENTS","\uFEFF");let Ir=_t;var qi={exports:{}},Zo;function Hb(){return Zo||(Zo=1,function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function s(c,u,h){this.fn=c,this.context=u,this.once=h||!1}function i(c,u,h,p,d){if(typeof h!="function")throw new TypeError("The listener must be a function");var f=new s(h,p||c,d),m=t?t+u:u;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],f]:c._events[m].push(f):(c._events[m]=f,c._eventsCount++),c}function a(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],h,p;if(this._eventsCount===0)return u;for(p in h=this._events)e.call(h,p)&&u.push(t?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},o.prototype.listeners=function(u){var h=t?t+u:u,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var d=0,f=p.length,m=new Array(f);d<f;d++)m[d]=p[d].fn;return m},o.prototype.listenerCount=function(u){var h=t?t+u:u,p=this._events[h];return p?p.fn?1:p.length:0},o.prototype.emit=function(u,h,p,d,f,m){var b=t?t+u:u;if(!this._events[b])return!1;var y=this._events[b],E=arguments.length,S,N;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),E){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,h),!0;case 3:return y.fn.call(y.context,h,p),!0;case 4:return y.fn.call(y.context,h,p,d),!0;case 5:return y.fn.call(y.context,h,p,d,f),!0;case 6:return y.fn.call(y.context,h,p,d,f,m),!0}for(N=1,S=new Array(E-1);N<E;N++)S[N-1]=arguments[N];y.fn.apply(y.context,S)}else{var T=y.length,_;for(N=0;N<T;N++)switch(y[N].once&&this.removeListener(u,y[N].fn,void 0,!0),E){case 1:y[N].fn.call(y[N].context);break;case 2:y[N].fn.call(y[N].context,h);break;case 3:y[N].fn.call(y[N].context,h,p);break;case 4:y[N].fn.call(y[N].context,h,p,d);break;default:if(!S)for(_=1,S=new Array(E-1);_<E;_++)S[_-1]=arguments[_];y[N].fn.apply(y[N].context,S)}}return!0},o.prototype.on=function(u,h,p){return i(this,u,h,p,!1)},o.prototype.once=function(u,h,p){return i(this,u,h,p,!0)},o.prototype.removeListener=function(u,h,p,d){var f=t?t+u:u;if(!this._events[f])return this;if(!h)return a(this,f),this;var m=this._events[f];if(m.fn)m.fn===h&&(!d||m.once)&&(!p||m.context===p)&&a(this,f);else{for(var b=0,y=[],E=m.length;b<E;b++)(m[b].fn!==h||d&&!m[b].once||p&&m[b].context!==p)&&y.push(m[b]);y.length?this._events[f]=y.length===1?y[0]:y:a(this,f)}return this},o.prototype.removeAllListeners=function(u){var h;return u?(h=t?t+u:u,this._events[h]&&a(this,h)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,n.exports=o}(qi)),qi.exports}var Fb=Hb();const Ub=Pl(Fb),ca=new WeakMap,ua=["error","warn","log","info"];let ha="warn";function Fc(n){if(ha&&ua.indexOf(n)<=ua.indexOf(ha)){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];console[n](...t)}}function An(n){return ua.reduce((e,t)=>(e[t]=Fc.bind(console,t,n),e),{})}An.level=n=>{ha=n};Fc.level=An.level;const Mi=An("quill:events"),zb=["selectionchange","mousedown","mouseup","click"];zb.forEach(n=>{document.addEventListener(n,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];Array.from(document.querySelectorAll(".ql-container")).forEach(s=>{const i=ca.get(s);i&&i.emitter&&i.emitter.handleDOM(...t)})})});class Q extends Ub{constructor(){super(),this.domListeners={},this.on("error",Mi.error)}emit(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Mi.log.call(Mi,...t),super.emit(...t)}handleDOM(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];(this.domListeners[e.type]||[]).forEach(i=>{let{node:a,handler:o}=i;(e.target===a||a.contains(e.target))&&o(e,...r)})}listenDOM(e,t,r){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:t,handler:r})}}X(Q,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),X(Q,"sources",{API:"api",SILENT:"silent",USER:"user"});const ki=An("quill:selection");class tr{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=t}}class Vb{constructor(e,t){this.emitter=t,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new tr(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,Q.sources.USER),1)}),this.emitter.on(Q.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const r=this.getNativeRange();r!=null&&r.start.node!==this.cursor.textNode&&this.emitter.once(Q.events.SCROLL_UPDATE,(s,i)=>{try{this.root.contains(r.start.node)&&this.root.contains(r.end.node)&&this.setNativeRange(r.start.node,r.start.offset,r.end.node,r.end.offset);const a=i.some(o=>o.type==="characterData"||o.type==="childList"||o.type==="attributes"&&o.target===this.root);this.update(a?Q.sources.SILENT:s)}catch{}})}),this.emitter.on(Q.events.SCROLL_OPTIMIZE,(r,s)=>{if(s.range){const{startNode:i,startOffset:a,endNode:o,endOffset:c}=s.range;this.setNativeRange(i,a,o,c),this.update(Q.sources.SILENT)}}),this.update(Q.sources.SILENT)}handleComposition(){this.emitter.on(Q.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(Q.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(Q.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,t){this.scroll.update();const r=this.getNativeRange();if(!(r==null||!r.native.collapsed||this.scroll.query(e,ie.BLOCK))){if(r.start.node!==this.cursor.textNode){const s=this.scroll.find(r.start.node,!1);if(s==null)return;if(s instanceof vt){const i=s.split(r.start.offset);s.parent.insertBefore(this.cursor,i)}else s.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=this.scroll.length();e=Math.min(e,r-1),t=Math.min(e+t,r-1)-e;let s,[i,a]=this.scroll.leaf(e);if(i==null)return null;if(t>0&&a===i.length()){const[h]=this.scroll.leaf(e+1);if(h){const[p]=this.scroll.line(e),[d]=this.scroll.line(e+1);p===d&&(i=h,a=0)}}[s,a]=i.position(a,!0);const o=document.createRange();if(t>0)return o.setStart(s,a),[i,a]=this.scroll.leaf(e+t),i==null?null:([s,a]=i.position(a,!0),o.setEnd(s,a),o.getBoundingClientRect());let c="left",u;if(s instanceof Text){if(!s.data.length)return null;a<s.data.length?(o.setStart(s,a),o.setEnd(s,a+1)):(o.setStart(s,a-1),o.setEnd(s,a),c="right"),u=o.getBoundingClientRect()}else{if(!(i.domNode instanceof Element))return null;u=i.domNode.getBoundingClientRect(),a>0&&(c="right")}return{bottom:u.top+u.height,height:u.height,left:u[c],right:u[c],top:u.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const t=e.getRangeAt(0);if(t==null)return null;const r=this.normalizeNative(t);return ki.info("getNativeRange",r),r}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const t=this.getNativeRange();return t==null?[null,null]:[this.normalizedToRange(t),t]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&Di(this.root,document.activeElement)}normalizedToRange(e){const t=[[e.start.node,e.start.offset]];e.native.collapsed||t.push([e.end.node,e.end.offset]);const r=t.map(a=>{const[o,c]=a,u=this.scroll.find(o,!0),h=u.offset(this.scroll);return c===0?h:u instanceof vt?h+u.index(o,c):h+u.length()}),s=Math.min(Math.max(...r),this.scroll.length()-1),i=Math.min(s,...r);return new tr(i,s-i)}normalizeNative(e){if(!Di(this.root,e.startContainer)||!e.collapsed&&!Di(this.root,e.endContainer))return null;const t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach(r=>{let{node:s,offset:i}=r;for(;!(s instanceof Text)&&s.childNodes.length>0;)if(s.childNodes.length>i)s=s.childNodes[i],i=0;else if(s.childNodes.length===i)s=s.lastChild,s instanceof Text?i=s.data.length:s.childNodes.length>0?i=s.childNodes.length:i=s.childNodes.length+1;else break;r.node=s,r.offset=i}),t}rangeToNative(e){const t=this.scroll.length(),r=(s,i)=>{s=Math.min(t-1,s);const[a,o]=this.scroll.leaf(s);return a?a.position(o,i):[null,-1]};return[...r(e.index,!1),...r(e.index+e.length,!0)]}setNativeRange(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(ki.info("setNativeRange",e,t,r,s),e!=null&&(this.root.parentNode==null||e.parentNode==null||r.parentNode==null))return;const a=document.getSelection();if(a!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:o}=this.getNativeRange()||{};if(o==null||i||e!==o.startContainer||t!==o.startOffset||r!==o.endContainer||s!==o.endOffset){e instanceof Element&&e.tagName==="BR"&&(t=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),r instanceof Element&&r.tagName==="BR"&&(s=Array.from(r.parentNode.childNodes).indexOf(r),r=r.parentNode);const c=document.createRange();c.setStart(e,t),c.setEnd(r,s),a.removeAllRanges(),a.addRange(c)}}else a.removeAllRanges(),this.root.blur()}setRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Q.sources.API;if(typeof t=="string"&&(r=t,t=!1),ki.info("setRange",e),e!=null){const s=this.rangeToNative(e);this.setNativeRange(...s,t)}else this.setNativeRange(null);this.update(r)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Q.sources.USER;const t=this.lastRange,[r,s]=this.getRange();if(this.lastRange=r,this.lastNative=s,this.lastRange!=null&&(this.savedRange=this.lastRange),!Ba(t,this.lastRange)){if(!this.composing&&s!=null&&s.native.collapsed&&s.start.node!==this.cursor.textNode){const a=this.cursor.restore();a&&this.setNativeRange(a.startNode,a.startOffset,a.endNode,a.endOffset)}const i=[Q.events.SELECTION_CHANGE,Nr(this.lastRange),Nr(t),e];this.emitter.emit(Q.events.EDITOR_CHANGE,...i),e!==Q.sources.SILENT&&this.emitter.emit(...i)}}}function Di(n,e){try{e.parentNode}catch{return!1}return n.contains(e)}const Gb=/^[ -~]*$/;class Kb{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let t=this.scroll.length();this.scroll.batchStart();const r=Yo(e),s=new re;return Xb(r.ops.slice()).reduce((a,o)=>{const c=$t.Op.length(o);let u=o.attributes||{},h=!1,p=!1;if(o.insert!=null){if(s.retain(c),typeof o.insert=="string"){const m=o.insert;p=!m.endsWith(`
`)&&(t<=a||!!this.scroll.descendant(Rt,a)[0]),this.scroll.insertAt(a,m);const[b,y]=this.scroll.line(a);let E=Mn({},Lt(b));if(b instanceof ft){const[S]=b.descendant(vt,y);S&&(E=Mn(E,Lt(S)))}u=$t.AttributeMap.diff(E,u)||{}}else if(typeof o.insert=="object"){const m=Object.keys(o.insert)[0];if(m==null)return a;const b=this.scroll.query(m,ie.INLINE)!=null;if(b)(t<=a||this.scroll.descendant(Rt,a)[0])&&(p=!0);else if(a>0){const[y,E]=this.scroll.descendant(vt,a-1);y instanceof Wt?y.value()[E]!==`
`&&(h=!0):y instanceof Tt&&y.statics.scope===ie.INLINE_BLOT&&(h=!0)}if(this.scroll.insertAt(a,m,o.insert[m]),b){const[y]=this.scroll.descendant(vt,a);if(y){const E=Mn({},Lt(y));u=$t.AttributeMap.diff(E,u)||{}}}}t+=c}else if(s.push(o),o.retain!==null&&typeof o.retain=="object"){const m=Object.keys(o.retain)[0];if(m==null)return a;this.scroll.updateEmbedAt(a,m,o.retain[m])}Object.keys(u).forEach(m=>{this.scroll.formatAt(a,c,m,u[m])});const d=h?1:0,f=p?1:0;return t+=d+f,s.retain(d),s.delete(f),a+c+d+f},0),s.reduce((a,o)=>typeof o.delete=="number"?(this.scroll.deleteAt(a,o.delete),a):a+$t.Op.length(o),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}deleteText(e,t){return this.scroll.deleteAt(e,t),this.update(new re().retain(e).delete(t))}formatLine(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach(i=>{this.scroll.lines(e,Math.max(t,1)).forEach(a=>{a.format(i,r[i])})}),this.scroll.optimize();const s=new re().retain(e).retain(t,Nr(r));return this.update(s)}formatText(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(r).forEach(i=>{this.scroll.formatAt(e,t,i,r[i])});const s=new re().retain(e).retain(t,Nr(r));return this.update(s)}getContents(e,t){return this.delta.slice(e,e+t)}getDelta(){return this.scroll.lines().reduce((e,t)=>e.concat(t.delta()),new re)}getFormat(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],s=[];t===0?this.scroll.path(e).forEach(o=>{const[c]=o;c instanceof ft?r.push(c):c instanceof vt&&s.push(c)}):(r=this.scroll.lines(e,t),s=this.scroll.descendants(vt,e,t));const[i,a]=[r,s].map(o=>{const c=o.shift();if(c==null)return{};let u=Lt(c);for(;Object.keys(u).length>0;){const h=o.shift();if(h==null)return u;u=Wb(Lt(h),u)}return u});return{...i,...a}}getHTML(e,t){const[r,s]=this.scroll.line(e);if(r){const i=r.length();return r.length()>=s+t&&!(s===0&&t===i)?ss(r,s,t,!0):ss(this.scroll,e,t,!0)}return""}getText(e,t){return this.getContents(e,t).filter(r=>typeof r.insert=="string").map(r=>r.insert).join("")}insertContents(e,t){const r=Yo(t),s=new re().retain(e).concat(r);return this.scroll.insertContents(e,r),this.update(s)}insertEmbed(e,t,r){return this.scroll.insertAt(e,t,r),this.update(new re().retain(e).insert({[t]:r}))}insertText(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t=t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,t),Object.keys(r).forEach(s=>{this.scroll.formatAt(e,t.length,s,r[s])}),this.update(new re().retain(e).insert(t,Nr(r)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if((e==null?void 0:e.statics.blotName)!==ft.blotName)return!1;const t=e;return t.children.length>1?!1:t.children.head instanceof Zt}removeFormat(e,t){const r=this.getText(e,t),[s,i]=this.scroll.line(e+t);let a=0,o=new re;s!=null&&(a=s.length()-i,o=s.delta().slice(i,i+a-1).insert(`
`));const u=this.getContents(e,t+a).diff(new re().insert(r).concat(o)),h=new re().retain(e).concat(u);return this.applyDelta(h)}update(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const s=this.delta;if(t.length===1&&t[0].type==="characterData"&&t[0].target.data.match(Gb)&&this.scroll.find(t[0].target)){const i=this.scroll.find(t[0].target),a=Lt(i),o=i.offset(this.scroll),c=t[0].oldValue.replace(Ir.CONTENTS,""),u=new re().insert(c),h=new re().insert(i.value()),p=r&&{oldRange:Qo(r.oldRange,-o),newRange:Qo(r.newRange,-o)};e=new re().retain(o).concat(u.diff(h,p)).reduce((f,m)=>m.insert?f.insert(m.insert,a):f.push(m),new re),this.delta=s.compose(e)}else this.delta=this.getDelta(),(!e||!Ba(s.compose(e),this.delta))&&(e=s.diff(this.delta,r));return e}}function xr(n,e,t){if(n.length===0){const[f]=ji(t.pop());return e<=0?`</li></${f}>`:`</li></${f}>${xr([],e-1,t)}`}const[{child:r,offset:s,length:i,indent:a,type:o},...c]=n,[u,h]=ji(o);if(a>e)return t.push(o),a===e+1?`<${u}><li${h}>${ss(r,s,i)}${xr(c,a,t)}`:`<${u}><li>${xr(n,e+1,t)}`;const p=t[t.length-1];if(a===e&&o===p)return`</li><li${h}>${ss(r,s,i)}${xr(c,a,t)}`;const[d]=ji(t.pop());return`</li></${d}>${xr(n,e-1,t)}`}function ss(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in n&&typeof n.html=="function")return n.html(e,t);if(n instanceof Wt)return ai(n.value().slice(e,e+t)).replaceAll(" ","&nbsp;");if(n instanceof Gt){if(n.statics.blotName==="list-container"){const u=[];return n.children.forEachAt(e,t,(h,p,d)=>{const f="formats"in h&&typeof h.formats=="function"?h.formats():{};u.push({child:h,offset:p,length:d,indent:f.indent||0,type:f.list})}),xr(u,-1,[])}const s=[];if(n.children.forEachAt(e,t,(u,h,p)=>{s.push(ss(u,h,p))}),r||n.statics.blotName==="list")return s.join("");const{outerHTML:i,innerHTML:a}=n.domNode,[o,c]=i.split(`>${a}<`);return o==="<table"?`<table style="border: 1px solid #000;">${s.join("")}<${c}`:`${o}>${s.join("")}<${c}`}return n.domNode instanceof Element?n.domNode.outerHTML:""}function Wb(n,e){return Object.keys(e).reduce((t,r)=>{if(n[r]==null)return t;const s=e[r];return s===n[r]?t[r]=s:Array.isArray(s)?s.indexOf(n[r])<0?t[r]=s.concat([n[r]]):t[r]=s:t[r]=[s,n[r]],t},{})}function ji(n){const e=n==="ordered"?"ol":"ul";switch(n){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function Yo(n){return n.reduce((e,t)=>{if(typeof t.insert=="string"){const r=t.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(r,t.attributes)}return e.push(t)},new re)}function Qo(n,e){let{index:t,length:r}=n;return new tr(t+e,r)}function Xb(n){const e=[];return n.forEach(t=>{typeof t.insert=="string"?t.insert.split(`
`).forEach((s,i)=>{i&&e.push({insert:`
`,attributes:t.attributes}),s&&e.push({insert:s,attributes:t.attributes})}):e.push(t)}),e}class Yt{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=t}}X(Yt,"DEFAULTS",{});const _s="\uFEFF";class Ua extends Tt{constructor(e,t){super(e,t),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(r=>{this.contentNode.appendChild(r)}),this.leftGuard=document.createTextNode(_s),this.rightGuard=document.createTextNode(_s),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,t){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,t)}restore(e){let t=null,r;const s=e.data.split(_s).join("");if(e===this.leftGuard)if(this.prev instanceof Wt){const i=this.prev.length();this.prev.insertAt(i,s),t={startNode:this.prev.domNode,startOffset:i+s.length}}else r=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(r),this),t={startNode:r,startOffset:s.length};else e===this.rightGuard&&(this.next instanceof Wt?(this.next.insertAt(0,s),t={startNode:this.next.domNode,startOffset:s.length}):(r=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(r),this.next),t={startNode:r,startOffset:s.length}));return e.data=_s,t}update(e,t){e.forEach(r=>{if(r.type==="characterData"&&(r.target===this.leftGuard||r.target===this.rightGuard)){const s=this.restore(r.target);s&&(t.range=s)}})}}class Zb{constructor(e,t){X(this,"isComposing",!1);this.scroll=e,this.emitter=t,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const t=e.target instanceof Node?this.scroll.find(e.target,!0):null;t&&!(t instanceof Ua)&&(this.emitter.emit(Q.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(Q.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(Q.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(Q.events.COMPOSITION_END,e),this.isComposing=!1}}const Qr=class Qr{constructor(e,t){X(this,"modules",{});this.quill=e,this.options=t}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const t=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}};X(Qr,"DEFAULTS",{modules:{}}),X(Qr,"themes",{default:Qr});let Rr=Qr;const Yb=n=>n.parentElement||n.getRootNode().host||null,Qb=n=>{const e=n.getBoundingClientRect(),t="offsetWidth"in n&&Math.abs(e.width)/n.offsetWidth||1,r="offsetHeight"in n&&Math.abs(e.height)/n.offsetHeight||1;return{top:e.top,right:e.left+n.clientWidth*t,bottom:e.top+n.clientHeight*r,left:e.left}},Ls=n=>{const e=parseInt(n,10);return Number.isNaN(e)?0:e},Jo=(n,e,t,r,s,i)=>n<t&&e>r?0:n<t?-(t-n+s):e>r?e-n>r-t?n+s-t:e-r+i:0,Jb=(n,e)=>{var i,a,o;const t=n.ownerDocument;let r=e,s=n;for(;s;){const c=s===t.body,u=c?{top:0,right:((i=window.visualViewport)==null?void 0:i.width)??t.documentElement.clientWidth,bottom:((a=window.visualViewport)==null?void 0:a.height)??t.documentElement.clientHeight,left:0}:Qb(s),h=getComputedStyle(s),p=Jo(r.left,r.right,u.left,u.right,Ls(h.scrollPaddingLeft),Ls(h.scrollPaddingRight)),d=Jo(r.top,r.bottom,u.top,u.bottom,Ls(h.scrollPaddingTop),Ls(h.scrollPaddingBottom));if(p||d)if(c)(o=t.defaultView)==null||o.scrollBy(p,d);else{const{scrollLeft:f,scrollTop:m}=s;d&&(s.scrollTop+=d),p&&(s.scrollLeft+=p);const b=s.scrollLeft-f,y=s.scrollTop-m;r={left:r.left-b,top:r.top-y,right:r.right-b,bottom:r.bottom-y}}s=c||h.position==="fixed"?null:Yb(s)}},e0=100,t0=["block","break","cursor","inline","scroll","text"],n0=(n,e,t)=>{const r=new Lr;return t0.forEach(s=>{const i=e.query(s);i&&r.register(i)}),n.forEach(s=>{let i=e.query(s);i||t.error(`Cannot register "${s}" specified in "formats" config. Are you sure it was registered?`);let a=0;for(;i;)if(r.register(i),i="blotName"in i?i.requiredContainer??null:null,a+=1,a>e0){t.error(`Cycle detected in registering blot requiredContainer: "${s}"`);break}}),r},Tr=An("quill"),Is=new Lr;Gt.uiClass="ql-ui";const Ft=class Ft{static debug(e){e===!0&&(e="log"),An.level(e)}static find(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return ca.get(e)||Is.find(e,t)}static import(e){return this.imports[e]==null&&Tr.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],t=!!(!(arguments.length<=1)&&arguments[1]),r="attrName"in e?e.attrName:e.blotName;typeof r=="string"?this.register(`formats/${r}`,e,t):Object.keys(e).forEach(s=>{this.register(s,e[s],t)})}else{const e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],r=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!r&&Tr.warn(`Overwriting ${e} with`,t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&t&&typeof t!="boolean"&&t.blotName!=="abstract"&&Is.register(t),typeof t.register=="function"&&t.register(Is)}}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=r0(e,t),this.container=this.options.container,this.container==null){Tr.error("Invalid Quill container",e);return}this.options.debug&&Ft.debug(this.options.debug);const r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",ca.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Q;const s=Fa.blotName,i=this.options.registry.query(s);if(!i||!("blotName"in i))throw new Error(`Cannot initialize Quill without "${s}" blot`);if(this.scroll=new i(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Kb(this.scroll),this.selection=new Vb(this.scroll,this.emitter),this.composition=new Zb(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Q.events.EDITOR_CHANGE,a=>{a===Q.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(Q.events.SCROLL_UPDATE,(a,o)=>{const c=this.selection.lastRange,[u]=this.selection.getRange(),h=c&&u?{oldRange:c,newRange:u}:void 0;Bt.call(this,()=>this.editor.update(null,o,h),a)}),this.emitter.on(Q.events.SCROLL_EMBED_UPDATE,(a,o)=>{const c=this.selection.lastRange,[u]=this.selection.getRange(),h=c&&u?{oldRange:c,newRange:u}:void 0;Bt.call(this,()=>{const p=new re().retain(a.offset(this)).retain({[a.statics.blotName]:o});return this.editor.update(p,[],h)},Ft.sources.USER)}),r){const a=this.clipboard.convert({html:`${r}<p><br></p>`,text:`
`});this.setContents(a)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const r=e;e=document.createElement("div"),e.classList.add(r)}return this.container.insertBefore(e,t),e}blur(){this.selection.setRange(null)}deleteText(e,t,r){return[e,t,,r]=pn(e,t,r),Bt.call(this,()=>this.editor.deleteText(e,t),r,e,-1*t)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const t=e();return this.allowReadOnlyEdits=!1,t}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Q.sources.API;return Bt.call(this,()=>{const s=this.getSelection(!0);let i=new re;if(s==null)return i;if(this.scroll.query(e,ie.BLOCK))i=this.editor.formatLine(s.index,s.length,{[e]:t});else{if(s.length===0)return this.selection.format(e,t),i;i=this.editor.formatText(s.index,s.length,{[e]:t})}return this.setSelection(s,Q.sources.SILENT),i},r)}formatLine(e,t,r,s,i){let a;return[e,t,a,i]=pn(e,t,r,s,i),Bt.call(this,()=>this.editor.formatLine(e,t,a),i,e,0)}formatText(e,t,r,s,i){let a;return[e,t,a,i]=pn(e,t,r,s,i),Bt.call(this,()=>this.editor.formatText(e,t,a),i,e,0)}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=null;if(typeof e=="number"?r=this.selection.getBounds(e,t):r=this.selection.getBounds(e.index,e.length),!r)return null;const s=this.container.getBoundingClientRect();return{bottom:r.bottom-s.top,height:r.height,left:r.left-s.left,right:r.right-s.left,top:r.top-s.top,width:r.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,t]=pn(e,t),this.editor.getContents(e,t)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t??this.getLength()-e),[e,t]=pn(e,t),this.editor.getHTML(e,t)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t??this.getLength()-e),[e,t]=pn(e,t),this.editor.getText(e,t)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,t,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Ft.sources.API;return Bt.call(this,()=>this.editor.insertEmbed(e,t,r),s,e)}insertText(e,t,r,s,i){let a;return[e,,a,i]=pn(e,0,r,s,i),Bt.call(this,()=>this.editor.insertText(e,t,a),i,e,t.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,t,r){return[e,t,,r]=pn(e,t,r),Bt.call(this,()=>this.editor.removeFormat(e,t),r,e)}scrollRectIntoView(e){Jb(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,t=e&&this.selection.getBounds(e.index,e.length);t&&this.scrollRectIntoView(t)}setContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Q.sources.API;return Bt.call(this,()=>{e=new re(e);const r=this.getLength(),s=this.editor.deleteText(0,r),i=this.editor.insertContents(0,e),a=this.editor.deleteText(this.getLength()-1,1);return s.compose(i).compose(a)},t)}setSelection(e,t,r){e==null?this.selection.setRange(null,t||Ft.sources.API):([e,t,,r]=pn(e,t,r),this.selection.setRange(new tr(Math.max(0,e),t),r),r!==Q.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Q.sources.API;const r=new re().insert(e);return this.setContents(r,t)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Q.sources.USER;const t=this.scroll.update(e);return this.selection.update(e),t}updateContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Q.sources.API;return Bt.call(this,()=>(e=new re(e),this.editor.applyDelta(e)),t,!0)}};X(Ft,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Is,theme:"default"}),X(Ft,"events",Q.events),X(Ft,"sources",Q.sources),X(Ft,"version","2.0.3"),X(Ft,"imports",{delta:re,parchment:Mb,"core/module":Yt,"core/theme":Rr});let k=Ft;function el(n){return typeof n=="string"?document.querySelector(n):n}function Pi(n){return Object.entries(n??{}).reduce((e,t)=>{let[r,s]=t;return{...e,[r]:s===!0?{}:s}},{})}function tl(n){return Object.fromEntries(Object.entries(n).filter(e=>e[1]!==void 0))}function r0(n,e){const t=el(n);if(!t)throw new Error("Invalid Quill container");const s=!e.theme||e.theme===k.DEFAULTS.theme?Rr:k.import(`themes/${e.theme}`);if(!s)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:i,...a}=k.DEFAULTS,{modules:o,...c}=s.DEFAULTS;let u=Pi(e.modules);u!=null&&u.toolbar&&u.toolbar.constructor!==Object&&(u={...u,toolbar:{container:u.toolbar}});const h=Mn({},Pi(i),Pi(o),u),p={...a,...tl(c),...tl(e)};let d=e.registry;return d?e.formats&&Tr.warn('Ignoring "formats" option because "registry" is specified'):d=e.formats?n0(e.formats,p.registry,Tr):p.registry,{...p,registry:d,container:t,theme:s,modules:Object.entries(h).reduce((f,m)=>{let[b,y]=m;if(!y)return f;const E=k.import(`modules/${b}`);return E==null?(Tr.error(`Cannot load ${b} module. Are you sure you registered it?`),f):{...f,[b]:Mn({},E.DEFAULTS||{},y)}},{}),bounds:el(p.bounds)}}function Bt(n,e,t,r){if(!this.isEnabled()&&e===Q.sources.USER&&!this.allowReadOnlyEdits)return new re;let s=t==null?null:this.getSelection();const i=this.editor.delta,a=n();if(s!=null&&(t===!0&&(t=s.index),r==null?s=nl(s,a,e):r!==0&&(s=nl(s,t,r,e)),this.setSelection(s,Q.sources.SILENT)),a.length()>0){const o=[Q.events.TEXT_CHANGE,a,i,e];this.emitter.emit(Q.events.EDITOR_CHANGE,...o),e!==Q.sources.SILENT&&this.emitter.emit(...o)}return a}function pn(n,e,t,r,s){let i={};return typeof n.index=="number"&&typeof n.length=="number"?typeof e!="number"?(s=r,r=t,t=e,e=n.length,n=n.index):(e=n.length,n=n.index):typeof e!="number"&&(s=r,r=t,t=e,e=0),typeof t=="object"?(i=t,s=r):typeof t=="string"&&(r!=null?i[t]=r:s=t),s=s||Q.sources.API,[n,e,i,s]}function nl(n,e,t,r){const s=typeof t=="number"?t:0;if(n==null)return null;let i,a;return e&&typeof e.transformPosition=="function"?[i,a]=[n.index,n.index+n.length].map(o=>e.transformPosition(o,r!==Q.sources.USER)):[i,a]=[n.index,n.index+n.length].map(o=>o<e||o===e&&r===Q.sources.USER?o:s>=0?o+s:Math.max(e,o+s)),new tr(i,a-i)}class ar extends ii{}function rl(n){return n instanceof ft||n instanceof Rt}function sl(n){return typeof n.updateContent=="function"}class wr extends Fa{constructor(e,t,r){let{emitter:s}=r;super(e,t),this.emitter=s,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",i=>this.handleDragStart(i))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(Q.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(Q.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,t){this.emitter.emit(Q.events.SCROLL_EMBED_UPDATE,e,t)}deleteAt(e,t){const[r,s]=this.line(e),[i]=this.line(e+t);if(super.deleteAt(e,t),i!=null&&r!==i&&s>0){if(r instanceof Rt||i instanceof Rt){this.optimize();return}const a=i.children.head instanceof Zt?null:i.children.head;r.moveChildren(i,a),r.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,t,r,s){super.formatAt(e,t,r,s),this.optimize()}insertAt(e,t,r){if(e>=this.length())if(r==null||this.scroll.query(t,ie.BLOCK)==null){const s=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(s),r==null&&t.endsWith(`
`)?s.insertAt(0,t.slice(0,-1),r):s.insertAt(0,t,r)}else{const s=this.scroll.create(t,r);this.appendChild(s)}else super.insertAt(e,t,r);this.optimize()}insertBefore(e,t){if(e.statics.scope===ie.INLINE_BLOT){const r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(e),super.insertBefore(r,t)}else super.insertBefore(e,t)}insertContents(e,t){const r=this.deltaToRenderBlocks(t.concat(new re().insert(`
`))),s=r.pop();if(s==null)return;this.batchStart();const i=r.shift();if(i){const c=i.type==="block"&&(i.delta.length()===0||!this.descendant(Rt,e)[0]&&e<this.length()),u=i.type==="block"?i.delta:new re().insert({[i.key]:i.value});Bi(this,e,u);const h=i.type==="block"?1:0,p=e+u.length()+h;c&&this.insertAt(p-1,`
`);const d=Lt(this.line(e)[0]),f=$t.AttributeMap.diff(d,i.attributes)||{};Object.keys(f).forEach(m=>{this.formatAt(p-1,1,m,f[m])}),e=p}let[a,o]=this.children.find(e);if(r.length&&(a&&(a=a.split(o),o=0),r.forEach(c=>{if(c.type==="block"){const u=this.createBlock(c.attributes,a||void 0);Bi(u,0,c.delta)}else{const u=this.create(c.key,c.value);this.insertBefore(u,a||void 0),Object.keys(c.attributes).forEach(h=>{u.format(h,c.attributes[h])})}})),s.type==="block"&&s.delta.length()){const c=a?a.offset(a.scroll)+o:this.length();Bi(this,c,s.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const t=this.path(e).pop();if(!t)return[null,-1];const[r,s]=t;return r instanceof vt?[r,s]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(rl,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const r=(s,i,a)=>{let o=[],c=a;return s.children.forEachAt(i,a,(u,h,p)=>{rl(u)?o.push(u):u instanceof ii&&(o=o.concat(r(u,h,c))),c-=p}),o};return r(this,e,t)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,t),e.length>0&&this.emitter.emit(Q.events.SCROLL_OPTIMIZE,e,t))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let t=Q.sources.USER;typeof e=="string"&&(t=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(r=>{let{target:s}=r;const i=this.find(s,!0);return i&&!sl(i)}),e.length>0&&this.emitter.emit(Q.events.SCROLL_BEFORE_UPDATE,t,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(Q.events.SCROLL_UPDATE,t,e)}updateEmbedAt(e,t,r){const[s]=this.descendant(i=>i instanceof Rt,e);s&&s.statics.blotName===t&&sl(s)&&s.updateContent(r)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const t=[];let r=new re;return e.forEach(s=>{const i=s==null?void 0:s.insert;if(i)if(typeof i=="string"){const a=i.split(`
`);a.slice(0,-1).forEach(c=>{r.insert(c,s.attributes),t.push({type:"block",delta:r,attributes:s.attributes??{}}),r=new re});const o=a[a.length-1];o&&r.insert(o,s.attributes)}else{const a=Object.keys(i)[0];if(!a)return;this.query(a,ie.INLINE)?r.push(s):(r.length()&&t.push({type:"block",delta:r,attributes:{}}),r=new re,t.push({type:"blockEmbed",key:a,value:i[a],attributes:s.attributes??{}}))}}),r.length()&&t.push({type:"block",delta:r,attributes:{}}),t}createBlock(e,t){let r;const s={};Object.entries(e).forEach(o=>{let[c,u]=o;this.query(c,ie.BLOCK&ie.BLOT)!=null?r=c:s[c]=u});const i=this.create(r||this.statics.defaultChild.blotName,r?e[r]:void 0);this.insertBefore(i,t||void 0);const a=i.length();return Object.entries(s).forEach(o=>{let[c,u]=o;i.formatAt(0,a,c,u)}),i}}X(wr,"blotName","scroll"),X(wr,"className","ql-editor"),X(wr,"tagName","DIV"),X(wr,"defaultChild",ft),X(wr,"allowedChildren",[ft,Rt,ar]);function Bi(n,e,t){t.reduce((r,s)=>{const i=$t.Op.length(s);let a=s.attributes||{};if(s.insert!=null){if(typeof s.insert=="string"){const o=s.insert;n.insertAt(r,o);const[c]=n.descendant(vt,r),u=Lt(c);a=$t.AttributeMap.diff(u,a)||{}}else if(typeof s.insert=="object"){const o=Object.keys(s.insert)[0];if(o==null)return r;if(n.insertAt(r,o,s.insert[o]),n.scroll.query(o,ie.INLINE)!=null){const[u]=n.descendant(vt,r),h=Lt(u);a=$t.AttributeMap.diff(h,a)||{}}}}return Object.keys(a).forEach(o=>{n.formatAt(r,i,o,a[o])}),r+i},e)}const za={scope:ie.BLOCK,whitelist:["right","center","justify"]},s0=new ln("align","align",za),Uc=new Xt("align","ql-align",za),zc=new Bn("align","text-align",za);class Vc extends Bn{value(e){let t=super.value(e);return t.startsWith("rgb(")?(t=t.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${t.split(",").map(s=>`00${parseInt(s,10).toString(16)}`.slice(-2)).join("")}`):t}}const i0=new Xt("color","ql-color",{scope:ie.INLINE}),Va=new Vc("color","color",{scope:ie.INLINE}),a0=new Xt("background","ql-bg",{scope:ie.INLINE}),Ga=new Vc("background","background-color",{scope:ie.INLINE});class or extends ar{static create(e){const t=super.create(e);return t.setAttribute("spellcheck","false"),t}code(e,t){return this.children.map(r=>r.length()<=1?"":r.domNode.innerText).join(`
`).slice(e,e+t)}html(e,t){return`<pre>
${ai(this.code(e,t))}
</pre>`}}class yt extends ft{static register(){k.register(or)}}X(yt,"TAB","  ");class Ka extends cn{}Ka.blotName="code";Ka.tagName="CODE";yt.blotName="code-block";yt.className="ql-code-block";yt.tagName="DIV";or.blotName="code-block-container";or.className="ql-code-block-container";or.tagName="DIV";or.allowedChildren=[yt];yt.allowedChildren=[Wt,Zt,Ir];yt.requiredContainer=or;const Wa={scope:ie.BLOCK,whitelist:["rtl"]},Gc=new ln("direction","dir",Wa),Kc=new Xt("direction","ql-direction",Wa),Wc=new Bn("direction","direction",Wa),Xc={scope:ie.INLINE,whitelist:["serif","monospace"]},Zc=new Xt("font","ql-font",Xc);class o0 extends Bn{value(e){return super.value(e).replace(/["']/g,"")}}const Yc=new o0("font","font-family",Xc),Qc=new Xt("size","ql-size",{scope:ie.INLINE,whitelist:["small","large","huge"]}),Jc=new Bn("size","font-size",{scope:ie.INLINE,whitelist:["10px","18px","32px"]}),l0=An("quill:keyboard"),c0=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class oi extends Yt{static match(e,t){return["altKey","ctrlKey","metaKey","shiftKey"].some(r=>!!t[r]!==e[r]&&t[r]!==null)?!1:t.key===e.key||t.key===e.which}constructor(e,t){super(e,t),this.bindings={},Object.keys(this.options.bindings).forEach(r=>{this.options.bindings[r]&&this.addBinding(this.options.bindings[r])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=h0(e);if(s==null){l0.warn("Attempted to add invalid keyboard binding",s);return}typeof t=="function"&&(t={handler:t}),typeof r=="function"&&(r={handler:r}),(Array.isArray(s.key)?s.key:[s.key]).forEach(a=>{const o={...s,key:a,...t,...r};this.bindings[o.key]=this.bindings[o.key]||[],this.bindings[o.key].push(o)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const s=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(E=>oi.match(e,E));if(s.length===0)return;const i=k.find(e.target,!0);if(i&&i.scroll!==this.quill.scroll)return;const a=this.quill.getSelection();if(a==null||!this.quill.hasFocus())return;const[o,c]=this.quill.getLine(a.index),[u,h]=this.quill.getLeaf(a.index),[p,d]=a.length===0?[u,h]:this.quill.getLeaf(a.index+a.length),f=u instanceof Ks?u.value().slice(0,h):"",m=p instanceof Ks?p.value().slice(d):"",b={collapsed:a.length===0,empty:a.length===0&&o.length()<=1,format:this.quill.getFormat(a),line:o,offset:c,prefix:f,suffix:m,event:e};s.some(E=>{if(E.collapsed!=null&&E.collapsed!==b.collapsed||E.empty!=null&&E.empty!==b.empty||E.offset!=null&&E.offset!==b.offset)return!1;if(Array.isArray(E.format)){if(E.format.every(S=>b.format[S]==null))return!1}else if(typeof E.format=="object"&&!Object.keys(E.format).every(S=>E.format[S]===!0?b.format[S]!=null:E.format[S]===!1?b.format[S]==null:Ba(E.format[S],b.format[S])))return!1;return E.prefix!=null&&!E.prefix.test(b.prefix)||E.suffix!=null&&!E.suffix.test(b.suffix)?!1:E.handler.call(this,a,b,E)!==!0})&&e.preventDefault()})}handleBackspace(e,t){const r=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let s={};const[i]=this.quill.getLine(e.index);let a=new re().retain(e.index-r).delete(r);if(t.offset===0){const[o]=this.quill.getLine(e.index-1);if(o&&!(o.statics.blotName==="block"&&o.length()<=1)){const u=i.formats(),h=this.quill.getFormat(e.index-1,1);if(s=$t.AttributeMap.diff(u,h)||{},Object.keys(s).length>0){const p=new re().retain(e.index+i.length()-2).retain(1,s);a=a.compose(p)}}}this.quill.updateContents(a,k.sources.USER),this.quill.focus()}handleDelete(e,t){const r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(e.index>=this.quill.getLength()-r)return;let s={};const[i]=this.quill.getLine(e.index);let a=new re().retain(e.index).delete(r);if(t.offset>=i.length()-1){const[o]=this.quill.getLine(e.index+1);if(o){const c=i.formats(),u=this.quill.getFormat(e.index,1);s=$t.AttributeMap.diff(c,u)||{},Object.keys(s).length>0&&(a=a.retain(o.length()-1).retain(1,s))}}this.quill.updateContents(a,k.sources.USER),this.quill.focus()}handleDeleteRange(e){Xa({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,t){const r=Object.keys(t.format).reduce((i,a)=>(this.quill.scroll.query(a,ie.BLOCK)&&!Array.isArray(t.format[a])&&(i[a]=t.format[a]),i),{}),s=new re().retain(e.index).delete(e.length).insert(`
`,r);this.quill.updateContents(s,k.sources.USER),this.quill.setSelection(e.index+1,k.sources.SILENT),this.quill.focus()}}const u0={bindings:{bold:Hi("bold"),italic:Hi("italic"),underline:Hi("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(n,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",k.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(n,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",k.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(n,e){e.format.indent!=null?this.quill.format("indent","-1",k.sources.USER):e.format.list!=null&&this.quill.format("list",!1,k.sources.USER)}},"indent code-block":il(!0),"outdent code-block":il(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(n){this.quill.deleteText(n.index-1,1,k.sources.USER)}},tab:{key:"Tab",handler(n,e){if(e.format.table)return!0;this.quill.history.cutoff();const t=new re().retain(n.index).delete(n.length).insert("	");return this.quill.updateContents(t,k.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index+1,k.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,k.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(n,e){const t={list:!1};e.format.indent&&(t.indent=!1),this.quill.formatLine(n.index,n.length,t,k.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(n){const[e,t]=this.quill.getLine(n.index),r={...e.formats(),list:"checked"},s=new re().retain(n.index).insert(`
`,r).retain(e.length()-t-1).retain(1,{list:"unchecked"});this.quill.updateContents(s,k.sources.USER),this.quill.setSelection(n.index+1,k.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(n,e){const[t,r]=this.quill.getLine(n.index),s=new re().retain(n.index).insert(`
`,e.format).retain(t.length()-r-1).retain(1,{header:null});this.quill.updateContents(s,k.sources.USER),this.quill.setSelection(n.index+1,k.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(n){const e=this.quill.getModule("table");if(e){const[t,r,s,i]=e.getTable(n),a=d0(t,r,s,i);if(a==null)return;let o=t.offset();if(a<0){const c=new re().retain(o).insert(`
`);this.quill.updateContents(c,k.sources.USER),this.quill.setSelection(n.index+1,n.length,k.sources.SILENT)}else if(a>0){o+=t.length();const c=new re().retain(o).insert(`
`);this.quill.updateContents(c,k.sources.USER),this.quill.setSelection(o,k.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(n,e){const{event:t,line:r}=e,s=r.offset(this.quill.scroll);t.shiftKey?this.quill.setSelection(s-1,k.sources.USER):this.quill.setSelection(s+r.length(),k.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(n,e){if(this.quill.scroll.query("list")==null)return!0;const{length:t}=e.prefix,[r,s]=this.quill.getLine(n.index);if(s>t)return!0;let i;switch(e.prefix.trim()){case"[]":case"[ ]":i="unchecked";break;case"[x]":i="checked";break;case"-":case"*":i="bullet";break;default:i="ordered"}this.quill.insertText(n.index," ",k.sources.USER),this.quill.history.cutoff();const a=new re().retain(n.index-s).delete(t+1).retain(r.length()-2-s).retain(1,{list:i});return this.quill.updateContents(a,k.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index-t,k.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(n){const[e,t]=this.quill.getLine(n.index);let r=2,s=e;for(;s!=null&&s.length()<=1&&s.formats()["code-block"];)if(s=s.prev,r-=1,r<=0){const i=new re().retain(n.index+e.length()-t-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(i,k.sources.USER),this.quill.setSelection(n.index-1,k.sources.SILENT),!1}return!0}},"embed left":Rs("ArrowLeft",!1),"embed left shift":Rs("ArrowLeft",!0),"embed right":Rs("ArrowRight",!1),"embed right shift":Rs("ArrowRight",!0),"table down":al(!1),"table up":al(!0)}};oi.DEFAULTS=u0;function il(n){return{key:"Tab",shiftKey:!n,format:{"code-block":!0},handler(e,t){let{event:r}=t;const s=this.quill.scroll.query("code-block"),{TAB:i}=s;if(e.length===0&&!r.shiftKey){this.quill.insertText(e.index,i,k.sources.USER),this.quill.setSelection(e.index+i.length,k.sources.SILENT);return}const a=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:o,length:c}=e;a.forEach((u,h)=>{n?(u.insertAt(0,i),h===0?o+=i.length:c+=i.length):u.domNode.textContent.startsWith(i)&&(u.deleteAt(0,i.length),h===0?o-=i.length:c-=i.length)}),this.quill.update(k.sources.USER),this.quill.setSelection(o,c,k.sources.SILENT)}}}function Rs(n,e){return{key:n,shiftKey:e,altKey:null,[n==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:s}=r;n==="ArrowRight"&&(s+=r.length+1);const[i]=this.quill.getLeaf(s);return i instanceof Tt?(n==="ArrowLeft"?e?this.quill.setSelection(r.index-1,r.length+1,k.sources.USER):this.quill.setSelection(r.index-1,k.sources.USER):e?this.quill.setSelection(r.index,r.length+1,k.sources.USER):this.quill.setSelection(r.index+r.length+1,k.sources.USER),!1):!0}}}function Hi(n){return{key:n[0],shortKey:!0,handler(e,t){this.quill.format(n,!t.format[n],k.sources.USER)}}}function al(n){return{key:n?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,t){const r=n?"prev":"next",s=t.line,i=s.parent[r];if(i!=null){if(i.statics.blotName==="table-row"){let a=i.children.head,o=s;for(;o.prev!=null;)o=o.prev,a=a.next;const c=a.offset(this.quill.scroll)+Math.min(t.offset,a.length()-1);this.quill.setSelection(c,0,k.sources.USER)}}else{const a=s.table()[r];a!=null&&(n?this.quill.setSelection(a.offset(this.quill.scroll)+a.length()-1,0,k.sources.USER):this.quill.setSelection(a.offset(this.quill.scroll),0,k.sources.USER))}return!1}}}function h0(n){if(typeof n=="string"||typeof n=="number")n={key:n};else if(typeof n=="object")n=Nr(n);else return null;return n.shortKey&&(n[c0]=n.shortKey,delete n.shortKey),n}function Xa(n){let{quill:e,range:t}=n;const r=e.getLines(t);let s={};if(r.length>1){const i=r[0].formats(),a=r[r.length-1].formats();s=$t.AttributeMap.diff(a,i)||{}}e.deleteText(t,k.sources.USER),Object.keys(s).length>0&&e.formatLine(t.index,1,s,k.sources.USER),e.setSelection(t.index,k.sources.SILENT)}function d0(n,e,t,r){return e.prev==null&&e.next==null?t.prev==null&&t.next==null?r===0?-1:1:t.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const f0=/font-weight:\s*normal/,g0=["P","OL","UL"],ol=n=>n&&g0.includes(n.tagName),p0=n=>{Array.from(n.querySelectorAll("br")).filter(e=>ol(e.previousElementSibling)&&ol(e.nextElementSibling)).forEach(e=>{var t;(t=e.parentNode)==null||t.removeChild(e)})},m0=n=>{Array.from(n.querySelectorAll('b[style*="font-weight"]')).filter(e=>{var t;return(t=e.getAttribute("style"))==null?void 0:t.match(f0)}).forEach(e=>{var r;const t=n.createDocumentFragment();t.append(...e.childNodes),(r=e.parentNode)==null||r.replaceChild(t,e)})};function b0(n){n.querySelector('[id^="docs-internal-guid-"]')&&(m0(n),p0(n))}const v0=/\bmso-list:[^;]*ignore/i,y0=/\bmso-list:[^;]*\bl(\d+)/i,C0=/\bmso-list:[^;]*\blevel(\d+)/i,S0=(n,e)=>{const t=n.getAttribute("style"),r=t==null?void 0:t.match(y0);if(!r)return null;const s=Number(r[1]),i=t==null?void 0:t.match(C0),a=i?Number(i[1]):1,o=new RegExp(`@list l${s}:level${a}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),c=e.match(o),u=c&&c[1]==="bullet"?"bullet":"ordered";return{id:s,indent:a,type:u,element:n}},E0=n=>{var a,o;const e=Array.from(n.querySelectorAll("[style*=mso-list]")),t=[],r=[];e.forEach(c=>{(c.getAttribute("style")||"").match(v0)?t.push(c):r.push(c)}),t.forEach(c=>{var u;return(u=c.parentNode)==null?void 0:u.removeChild(c)});const s=n.documentElement.innerHTML,i=r.map(c=>S0(c,s)).filter(c=>c);for(;i.length;){const c=[];let u=i.shift();for(;u;)c.push(u),u=i.length&&((a=i[0])==null?void 0:a.element)===u.element.nextElementSibling&&i[0].id===u.id?i.shift():null;const h=document.createElement("ul");c.forEach(f=>{const m=document.createElement("li");m.setAttribute("data-list",f.type),f.indent>1&&m.setAttribute("class",`ql-indent-${f.indent-1}`),m.innerHTML=f.element.innerHTML,h.appendChild(m)});const p=(o=c[0])==null?void 0:o.element,{parentNode:d}=p??{};p&&(d==null||d.replaceChild(h,p)),c.slice(1).forEach(f=>{let{element:m}=f;d==null||d.removeChild(m)})}};function x0(n){n.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&E0(n)}const w0=[x0,b0],N0=n=>{n.documentElement&&w0.forEach(e=>{e(n)})},A0=An("quill:clipboard"),T0=[[Node.TEXT_NODE,P0],[Node.TEXT_NODE,cl],["br",R0],[Node.ELEMENT_NODE,cl],[Node.ELEMENT_NODE,I0],[Node.ELEMENT_NODE,L0],[Node.ELEMENT_NODE,D0],["li",M0],["ol, ul",k0],["pre",$0],["tr",j0],["b",Fi("bold")],["i",Fi("italic")],["strike",Fi("strike")],["style",q0]],O0=[s0,Gc].reduce((n,e)=>(n[e.keyName]=e,n),{}),ll=[zc,Ga,Va,Wc,Yc,Jc].reduce((n,e)=>(n[e.keyName]=e,n),{});class eu extends Yt{constructor(e,t){super(e,t),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],T0.concat(this.options.matchers??[]).forEach(r=>{let[s,i]=r;this.addMatcher(s,i)})}addMatcher(e,t){this.matchers.push([e,t])}convert(e){let{html:t,text:r}=e,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s[yt.blotName])return new re().insert(r||"",{[yt.blotName]:s[yt.blotName]});if(!t)return new re().insert(r||"",s);const i=this.convertHTML(t);return cs(i,`
`)&&(i.ops[i.ops.length-1].attributes==null||s.table)?i.compose(new re().retain(i.length()-1).delete(1)):i}normalizeHTML(e){N0(e)}convertHTML(e){const t=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(t);const r=t.body,s=new WeakMap,[i,a]=this.prepareMatching(r,s);return Za(this.quill.scroll,r,i,a,s)}dangerouslyPasteHTML(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k.sources.API;if(typeof e=="string"){const s=this.convert({html:e,text:""});this.quill.setContents(s,t),this.quill.setSelection(0,k.sources.SILENT)}else{const s=this.convert({html:t,text:""});this.quill.updateContents(new re().retain(e).concat(s),r),this.quill.setSelection(e+s.length(),k.sources.SILENT)}}onCaptureCopy(e){var a,o;let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[r]=this.quill.selection.getRange();if(r==null)return;const{html:s,text:i}=this.onCopy(r,t);(a=e.clipboardData)==null||a.setData("text/plain",i),(o=e.clipboardData)==null||o.setData("text/html",s),t&&Xa({range:r,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(t=>t[0]!=="#").join(`
`)}onCapturePaste(e){var a,o,c,u,h;if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const t=this.quill.getSelection(!0);if(t==null)return;const r=(a=e.clipboardData)==null?void 0:a.getData("text/html");let s=(o=e.clipboardData)==null?void 0:o.getData("text/plain");if(!r&&!s){const p=(c=e.clipboardData)==null?void 0:c.getData("text/uri-list");p&&(s=this.normalizeURIList(p))}const i=Array.from(((u=e.clipboardData)==null?void 0:u.files)||[]);if(!r&&i.length>0){this.quill.uploader.upload(t,i);return}if(r&&i.length>0){const p=new DOMParser().parseFromString(r,"text/html");if(p.body.childElementCount===1&&((h=p.body.firstElementChild)==null?void 0:h.tagName)==="IMG"){this.quill.uploader.upload(t,i);return}}this.onPaste(t,{html:r,text:s})}onCopy(e){const t=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:t}}onPaste(e,t){let{text:r,html:s}=t;const i=this.quill.getFormat(e.index),a=this.convert({text:r,html:s},i);A0.log("onPaste",a,{text:r,html:s});const o=new re().retain(e.index).delete(e.length).concat(a);this.quill.updateContents(o,k.sources.USER),this.quill.setSelection(o.length()-e.length,k.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,t){const r=[],s=[];return this.matchers.forEach(i=>{const[a,o]=i;switch(a){case Node.TEXT_NODE:s.push(o);break;case Node.ELEMENT_NODE:r.push(o);break;default:Array.from(e.querySelectorAll(a)).forEach(c=>{if(t.has(c)){const u=t.get(c);u==null||u.push(o)}else t.set(c,[o])});break}}),[r,s]}}X(eu,"DEFAULTS",{matchers:[]});function lr(n,e,t,r){return r.query(e)?n.reduce((s,i)=>{if(!i.insert)return s;if(i.attributes&&i.attributes[e])return s.push(i);const a=t?{[e]:t}:{};return s.insert(i.insert,{...a,...i.attributes})},new re):n}function cs(n,e){let t="";for(let r=n.ops.length-1;r>=0&&t.length<e.length;--r){const s=n.ops[r];if(typeof s.insert!="string")break;t=s.insert+t}return t.slice(-1*e.length)===e}function In(n,e){if(!(n instanceof Element))return!1;const t=e.query(n);return t&&t.prototype instanceof Tt?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(n.tagName.toLowerCase())}function _0(n,e){return n.previousElementSibling&&n.nextElementSibling&&!In(n.previousElementSibling,e)&&!In(n.nextElementSibling,e)}const $s=new WeakMap;function tu(n){return n==null?!1:($s.has(n)||(n.tagName==="PRE"?$s.set(n,!0):$s.set(n,tu(n.parentNode))),$s.get(n))}function Za(n,e,t,r,s){return e.nodeType===e.TEXT_NODE?r.reduce((i,a)=>a(e,i,n),new re):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((i,a)=>{let o=Za(n,a,t,r,s);return a.nodeType===e.ELEMENT_NODE&&(o=t.reduce((c,u)=>u(a,c,n),o),o=(s.get(a)||[]).reduce((c,u)=>u(a,c,n),o)),i.concat(o)},new re):new re}function Fi(n){return(e,t,r)=>lr(t,n,!0,r)}function L0(n,e,t){const r=ln.keys(n),s=Xt.keys(n),i=Bn.keys(n),a={};return r.concat(s).concat(i).forEach(o=>{let c=t.query(o,ie.ATTRIBUTE);c!=null&&(a[c.attrName]=c.value(n),a[c.attrName])||(c=O0[o],c!=null&&(c.attrName===o||c.keyName===o)&&(a[c.attrName]=c.value(n)||void 0),c=ll[o],c!=null&&(c.attrName===o||c.keyName===o)&&(c=ll[o],a[c.attrName]=c.value(n)||void 0))}),Object.entries(a).reduce((o,c)=>{let[u,h]=c;return lr(o,u,h,t)},e)}function I0(n,e,t){const r=t.query(n);if(r==null)return e;if(r.prototype instanceof Tt){const s={},i=r.value(n);if(i!=null)return s[r.blotName]=i,new re().insert(s,r.formats(n,t))}else if(r.prototype instanceof rs&&!cs(e,`
`)&&e.insert(`
`),"blotName"in r&&"formats"in r&&typeof r.formats=="function")return lr(e,r.blotName,r.formats(n,t),t);return e}function R0(n,e){return cs(e,`
`)||e.insert(`
`),e}function $0(n,e,t){const r=t.query("code-block"),s=r&&"formats"in r&&typeof r.formats=="function"?r.formats(n,t):!0;return lr(e,"code-block",s,t)}function q0(){return new re}function M0(n,e,t){const r=t.query(n);if(r==null||r.blotName!=="list"||!cs(e,`
`))return e;let s=-1,i=n.parentNode;for(;i!=null;)["OL","UL"].includes(i.tagName)&&(s+=1),i=i.parentNode;return s<=0?e:e.reduce((a,o)=>o.insert?o.attributes&&typeof o.attributes.indent=="number"?a.push(o):a.insert(o.insert,{indent:s,...o.attributes||{}}):a,new re)}function k0(n,e,t){const r=n;let s=r.tagName==="OL"?"ordered":"bullet";const i=r.getAttribute("data-checked");return i&&(s=i==="true"?"checked":"unchecked"),lr(e,"list",s,t)}function cl(n,e,t){if(!cs(e,`
`)){if(In(n,t)&&(n.childNodes.length>0||n instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&n.nextSibling){let r=n.nextSibling;for(;r!=null;){if(In(r,t))return e.insert(`
`);const s=t.query(r);if(s&&s.prototype instanceof Rt)return e.insert(`
`);r=r.firstChild}}}return e}function D0(n,e,t){var i;const r={},s=n.style||{};return s.fontStyle==="italic"&&(r.italic=!0),s.textDecoration==="underline"&&(r.underline=!0),s.textDecoration==="line-through"&&(r.strike=!0),((i=s.fontWeight)!=null&&i.startsWith("bold")||parseInt(s.fontWeight,10)>=700)&&(r.bold=!0),e=Object.entries(r).reduce((a,o)=>{let[c,u]=o;return lr(a,c,u,t)},e),parseFloat(s.textIndent||0)>0?new re().insert("	").concat(e):e}function j0(n,e,t){var s,i;const r=((s=n.parentElement)==null?void 0:s.tagName)==="TABLE"?n.parentElement:(i=n.parentElement)==null?void 0:i.parentElement;if(r!=null){const o=Array.from(r.querySelectorAll("tr")).indexOf(n)+1;return lr(e,"table",o,t)}return e}function P0(n,e,t){var s;let r=n.data;if(((s=n.parentElement)==null?void 0:s.tagName)==="O:P")return e.insert(r.trim());if(!tu(n)){if(r.trim().length===0&&r.includes(`
`)&&!_0(n,t))return e;r=r.replace(/[^\S\u00a0]/g," "),r=r.replace(/ {2,}/g," "),(n.previousSibling==null&&n.parentElement!=null&&In(n.parentElement,t)||n.previousSibling instanceof Element&&In(n.previousSibling,t))&&(r=r.replace(/^ /,"")),(n.nextSibling==null&&n.parentElement!=null&&In(n.parentElement,t)||n.nextSibling instanceof Element&&In(n.nextSibling,t))&&(r=r.replace(/ $/,"")),r=r.replaceAll("Â "," ")}return e.insert(r)}class nu extends Yt{constructor(t,r){super(t,r);X(this,"lastRecorded",0);X(this,"ignoreChange",!1);X(this,"stack",{undo:[],redo:[]});X(this,"currentRange",null);this.quill.on(k.events.EDITOR_CHANGE,(s,i,a,o)=>{s===k.events.SELECTION_CHANGE?i&&o!==k.sources.SILENT&&(this.currentRange=i):s===k.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||o===k.sources.USER?this.record(i,a):this.transform(i)),this.currentRange=da(this.currentRange,i))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",s=>{s.inputType==="historyUndo"?(this.undo(),s.preventDefault()):s.inputType==="historyRedo"&&(this.redo(),s.preventDefault())})}change(t,r){if(this.stack[t].length===0)return;const s=this.stack[t].pop();if(!s)return;const i=this.quill.getContents(),a=s.delta.invert(i);this.stack[r].push({delta:a,range:da(s.range,a)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(s.delta,k.sources.USER),this.ignoreChange=!1,this.restoreSelection(s)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(t,r){if(t.ops.length===0)return;this.stack.redo=[];let s=t.invert(r),i=this.currentRange;const a=Date.now();if(this.lastRecorded+this.options.delay>a&&this.stack.undo.length>0){const o=this.stack.undo.pop();o&&(s=s.compose(o.delta),i=o.range)}else this.lastRecorded=a;s.length()!==0&&(this.stack.undo.push({delta:s,range:i}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(t){ul(this.stack.undo,t),ul(this.stack.redo,t)}undo(){this.change("undo","redo")}restoreSelection(t){if(t.range)this.quill.setSelection(t.range,k.sources.USER);else{const r=H0(this.quill.scroll,t.delta);this.quill.setSelection(r,k.sources.USER)}}}X(nu,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function ul(n,e){let t=e;for(let r=n.length-1;r>=0;r-=1){const s=n[r];n[r]={delta:t.transform(s.delta,!0),range:s.range&&da(s.range,t)},t=s.delta.transform(t),n[r].delta.length()===0&&n.splice(r,1)}}function B0(n,e){const t=e.ops[e.ops.length-1];return t==null?!1:t.insert!=null?typeof t.insert=="string"&&t.insert.endsWith(`
`):t.attributes!=null?Object.keys(t.attributes).some(r=>n.query(r,ie.BLOCK)!=null):!1}function H0(n,e){const t=e.reduce((s,i)=>s+(i.delete||0),0);let r=e.length()-t;return B0(n,e)&&(r-=1),r}function da(n,e){if(!n)return n;const t=e.transformPosition(n.index),r=e.transformPosition(n.index+n.length);return{index:t,length:r-t}}class ru extends Yt{constructor(e,t){super(e,t),e.root.addEventListener("drop",r=>{var a;r.preventDefault();let s=null;if(document.caretRangeFromPoint)s=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){const o=document.caretPositionFromPoint(r.clientX,r.clientY);s=document.createRange(),s.setStart(o.offsetNode,o.offset),s.setEnd(o.offsetNode,o.offset)}const i=s&&e.selection.normalizeNative(s);if(i){const o=e.selection.normalizedToRange(i);(a=r.dataTransfer)!=null&&a.files&&this.upload(o,r.dataTransfer.files)}})}upload(e,t){const r=[];Array.from(t).forEach(s=>{var i;s&&((i=this.options.mimetypes)!=null&&i.includes(s.type))&&r.push(s)}),r.length>0&&this.options.handler.call(this,e,r)}}ru.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(n,e){if(!this.quill.scroll.query("image"))return;const t=e.map(r=>new Promise(s=>{const i=new FileReader;i.onload=()=>{s(i.result)},i.readAsDataURL(r)}));Promise.all(t).then(r=>{const s=r.reduce((i,a)=>i.insert({image:a}),new re().retain(n.index).delete(n.length));this.quill.updateContents(s,Q.sources.USER),this.quill.setSelection(n.index+r.length,Q.sources.SILENT)})}};const F0=["insertText","insertReplacementText"];class U0 extends Yt{constructor(e,t){super(e,t),e.root.addEventListener("beforeinput",r=>{this.handleBeforeInput(r)}),/Android/i.test(navigator.userAgent)||e.on(k.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){Xa({range:e,quill:this.quill})}replaceText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(t){const r=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new re().retain(e.index).insert(t,r),k.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+t.length,0,k.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!F0.includes(e.inputType))return;const t=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!t||t.collapsed===!0)return;const r=z0(e);if(r==null)return;const s=this.quill.selection.normalizeNative(t),i=s?this.quill.selection.normalizedToRange(s):null;i&&this.replaceText(i,r)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function z0(n){var e;return typeof n.data=="string"?n.data:(e=n.dataTransfer)!=null&&e.types.includes("text/plain")?n.dataTransfer.getData("text/plain"):null}const V0=/Mac/i.test(navigator.platform),G0=100,K0=n=>!!(n.key==="ArrowLeft"||n.key==="ArrowRight"||n.key==="ArrowUp"||n.key==="ArrowDown"||n.key==="Home"||V0&&n.key==="a"&&n.ctrlKey===!0);class W0 extends Yt{constructor(t,r){super(t,r);X(this,"isListening",!1);X(this,"selectionChangeDeadline",0);this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(t,r){let{line:s,event:i}=r;if(!(s instanceof Gt)||!s.uiNode)return!0;const a=getComputedStyle(s.domNode).direction==="rtl";return a&&i.key!=="ArrowRight"||!a&&i.key!=="ArrowLeft"?!0:(this.quill.setSelection(t.index-1,t.length+(i.shiftKey?1:0),k.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",t=>{!t.defaultPrevented&&K0(t)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+G0,this.isListening)return;this.isListening=!0;const t=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",t,{once:!0})}handleSelectionChange(){const t=document.getSelection();if(!t)return;const r=t.getRangeAt(0);if(r.collapsed!==!0||r.startOffset!==0)return;const s=this.quill.scroll.find(r.startContainer);if(!(s instanceof Gt)||!s.uiNode)return;const i=document.createRange();i.setStartAfter(s.uiNode),i.setEndAfter(s.uiNode),t.removeAllRanges(),t.addRange(i)}}k.register({"blots/block":ft,"blots/block/embed":Rt,"blots/break":Zt,"blots/container":ar,"blots/cursor":Ir,"blots/embed":Ua,"blots/inline":cn,"blots/scroll":wr,"blots/text":Wt,"modules/clipboard":eu,"modules/history":nu,"modules/keyboard":oi,"modules/uploader":ru,"modules/input":U0,"modules/uiNode":W0});class X0 extends Xt{add(e,t){let r=0;if(t==="+1"||t==="-1"){const s=this.value(e)||0;r=t==="+1"?s+1:s-1}else typeof t=="number"&&(r=t);return r===0?(this.remove(e),!0):super.add(e,r.toString())}canAdd(e,t){return super.canAdd(e,t)||super.canAdd(e,parseInt(t,10))}value(e){return parseInt(super.value(e),10)||void 0}}const Z0=new X0("indent","ql-indent",{scope:ie.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class fa extends ft{}X(fa,"blotName","blockquote"),X(fa,"tagName","blockquote");class ga extends ft{static formats(e){return this.tagName.indexOf(e.tagName)+1}}X(ga,"blotName","header"),X(ga,"tagName",["H1","H2","H3","H4","H5","H6"]);class us extends ar{}us.blotName="list-container";us.tagName="OL";class hs extends ft{static create(e){const t=super.create();return t.setAttribute("data-list",e),t}static formats(e){return e.getAttribute("data-list")||void 0}static register(){k.register(us)}constructor(e,t){super(e,t);const r=t.ownerDocument.createElement("span"),s=i=>{if(!e.isEnabled())return;const a=this.statics.formats(t,e);a==="checked"?(this.format("list","unchecked"),i.preventDefault()):a==="unchecked"&&(this.format("list","checked"),i.preventDefault())};r.addEventListener("mousedown",s),r.addEventListener("touchstart",s),this.attachUI(r)}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-list",t):super.format(e,t)}}hs.blotName="list";hs.tagName="LI";us.allowedChildren=[hs];hs.requiredContainer=us;class is extends cn{static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}X(is,"blotName","bold"),X(is,"tagName",["STRONG","B"]);class pa extends is{}X(pa,"blotName","italic"),X(pa,"tagName",["EM","I"]);class Rn extends cn{static create(e){const t=super.create(e);return t.setAttribute("href",this.sanitize(e)),t.setAttribute("rel","noopener noreferrer"),t.setAttribute("target","_blank"),t}static formats(e){return e.getAttribute("href")}static sanitize(e){return su(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,t){e!==this.statics.blotName||!t?super.format(e,t):this.domNode.setAttribute("href",this.constructor.sanitize(t))}}X(Rn,"blotName","link"),X(Rn,"tagName","A"),X(Rn,"SANITIZED_URL","about:blank"),X(Rn,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function su(n,e){const t=document.createElement("a");t.href=n;const r=t.href.slice(0,t.href.indexOf(":"));return e.indexOf(r)>-1}class ma extends cn{static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}X(ma,"blotName","script"),X(ma,"tagName",["SUB","SUP"]);class ba extends is{}X(ba,"blotName","strike"),X(ba,"tagName",["S","STRIKE"]);class va extends cn{}X(va,"blotName","underline"),X(va,"tagName","U");class js extends Ua{static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const t=super.create(e);return typeof e=="string"&&(window.katex.render(e,t,{throwOnError:!1,errorColor:"#f00"}),t.setAttribute("data-value",e)),t}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}X(js,"blotName","formula"),X(js,"className","ql-formula"),X(js,"tagName","SPAN");const hl=["alt","height","width"];class ya extends Tt{static create(e){const t=super.create(e);return typeof e=="string"&&t.setAttribute("src",this.sanitize(e)),t}static formats(e){return hl.reduce((t,r)=>(e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return su(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,t){hl.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}}X(ya,"blotName","image"),X(ya,"tagName","IMG");const dl=["height","width"];class Ps extends Rt{static create(e){const t=super.create(e);return t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen","true"),t.setAttribute("src",this.sanitize(e)),t}static formats(e){return dl.reduce((t,r)=>(e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t),{})}static sanitize(e){return Rn.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,t){dl.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}X(Ps,"blotName","video"),X(Ps,"className","ql-video"),X(Ps,"tagName","IFRAME");const Xr=new Xt("code-token","hljs",{scope:ie.INLINE});class Cn extends cn{static formats(e,t){for(;e!=null&&e!==t.domNode;){if(e.classList&&e.classList.contains(yt.className))return super.formats(e,t);e=e.parentNode}}constructor(e,t,r){super(e,t,r),Xr.add(this.domNode,r)}format(e,t){e!==Cn.blotName?super.format(e,t):t?Xr.add(this.domNode,t):(Xr.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Xr.value(this.domNode)||this.unwrap()}}Cn.blotName="code-token";Cn.className="ql-token";class It extends yt{static create(e){const t=super.create(e);return typeof e=="string"&&t.setAttribute("data-language",e),t}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-language",t):super.format(e,t)}replaceWith(e,t){return this.formatAt(0,this.length(),Cn.blotName,!1),super.replaceWith(e,t)}}class Yr extends or{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,t){e===It.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(e,t)}))}formatAt(e,t,r,s){r===It.blotName&&(this.forceNext=!0),super.formatAt(e,t,r,s)}highlight(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const s=`${Array.from(this.domNode.childNodes).filter(a=>a!==this.uiNode).map(a=>a.textContent).join(`
`)}
`,i=It.formats(this.children.head.domNode);if(t||this.forceNext||this.cachedText!==s){if(s.trim().length>0||this.cachedText==null){const a=this.children.reduce((c,u)=>c.concat(Hc(u,!1)),new re),o=e(s,i);a.diff(o).reduce((c,u)=>{let{retain:h,attributes:p}=u;return h?(p&&Object.keys(p).forEach(d=>{[It.blotName,Cn.blotName].includes(d)&&this.formatAt(c,h,d,p[d])}),c+h):c},0)}this.cachedText=s,this.forceNext=!1}}html(e,t){const[r]=this.children.find(e);return`<pre data-language="${r?It.formats(r.domNode):"plain"}">
${ai(this.code(e,t))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const t=It.formats(this.children.head.domNode);t!==this.uiNode.value&&(this.uiNode.value=t)}}}Yr.allowedChildren=[It];It.requiredContainer=Yr;It.allowedChildren=[Cn,Ir,Wt,Zt];const Y0=(n,e,t)=>{if(typeof n.versionString=="string"){const r=n.versionString.split(".")[0];if(parseInt(r,10)>=11)return n.highlight(t,{language:e}).value}return n.highlight(e,t).value};class iu extends Yt{static register(){k.register(Cn,!0),k.register(It,!0),k.register(Yr,!0)}constructor(e,t){if(super(e,t),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((r,s)=>{let{key:i}=s;return r[i]=!0,r},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(k.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof Yr))return;const t=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(r=>{let{key:s,label:i}=r;const a=t.ownerDocument.createElement("option");a.textContent=i,a.setAttribute("value",s),t.appendChild(a)}),t.addEventListener("change",()=>{e.format(It.blotName,t.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(t),e.children.head&&(t.value=It.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(k.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(k.sources.USER);const r=this.quill.getSelection();(e==null?this.quill.scroll.descendants(Yr):[e]).forEach(i=>{i.highlight(this.highlightBlot,t)}),this.quill.update(k.sources.SILENT),r!=null&&this.quill.setSelection(r,k.sources.SILENT)}highlightBlot(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(t=this.languages[t]?t:"plain",t==="plain")return ai(e).split(`
`).reduce((s,i,a)=>(a!==0&&s.insert(`
`,{[yt.blotName]:t}),s.insert(i)),new re);const r=this.quill.root.ownerDocument.createElement("div");return r.classList.add(yt.className),r.innerHTML=Y0(this.options.hljs,t,e),Za(this.quill.scroll,r,[(s,i)=>{const a=Xr.value(s);return a?i.compose(new re().retain(i.length(),{[Cn.blotName]:a})):i}],[(s,i)=>s.data.split(`
`).reduce((a,o,c)=>(c!==0&&a.insert(`
`,{[yt.blotName]:t}),a.insert(o)),i)],new WeakMap)}}iu.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};const Jr=class Jr extends ft{static create(e){const t=super.create();return e?t.setAttribute("data-row",e):t.setAttribute("data-row",Ya()),t}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,t){e===Jr.blotName&&t?this.domNode.setAttribute("data-row",t):super.format(e,t)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}};X(Jr,"blotName","table"),X(Jr,"tagName","TD");let zt=Jr;class Sn extends ar{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),t=this.children.tail.formats(),r=this.next.children.head.formats(),s=this.next.children.tail.formats();return e.table===t.table&&e.table===r.table&&e.table===s.table}return!1}optimize(e){super.optimize(e),this.children.forEach(t=>{if(t.next==null)return;const r=t.formats(),s=t.next.formats();if(r.table!==s.table){const i=this.splitAfter(t);i&&i.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}X(Sn,"blotName","table-row"),X(Sn,"tagName","TR");class an extends ar{}X(an,"blotName","table-body"),X(an,"tagName","TBODY");class $r extends ar{balanceCells(){const e=this.descendants(Sn),t=e.reduce((r,s)=>Math.max(s.children.length,r),0);e.forEach(r=>{new Array(t-r.children.length).fill(0).forEach(()=>{let s;r.children.head!=null&&(s=zt.formats(r.children.head.domNode));const i=this.scroll.create(zt.blotName,s);r.appendChild(i),i.optimize()})})}cells(e){return this.rows().map(t=>t.children.at(e))}deleteColumn(e){const[t]=this.descendant(an);t==null||t.children.head==null||t.children.forEach(r=>{const s=r.children.at(e);s!=null&&s.remove()})}insertColumn(e){const[t]=this.descendant(an);t==null||t.children.head==null||t.children.forEach(r=>{const s=r.children.at(e),i=zt.formats(r.children.head.domNode),a=this.scroll.create(zt.blotName,i);r.insertBefore(a,s)})}insertRow(e){const[t]=this.descendant(an);if(t==null||t.children.head==null)return;const r=Ya(),s=this.scroll.create(Sn.blotName);t.children.head.children.forEach(()=>{const a=this.scroll.create(zt.blotName,r);s.appendChild(a)});const i=t.children.at(e);t.insertBefore(s,i)}rows(){const e=this.children.head;return e==null?[]:e.children.map(t=>t)}}X($r,"blotName","table-container"),X($r,"tagName","TABLE");$r.allowedChildren=[an];an.requiredContainer=$r;an.allowedChildren=[Sn];Sn.requiredContainer=an;Sn.allowedChildren=[zt];zt.requiredContainer=Sn;function Ya(){return`row-${Math.random().toString(36).slice(2,6)}`}class Q0 extends Yt{static register(){k.register(zt),k.register(Sn),k.register(an),k.register($r)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants($r).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,t]=this.getTable();t!=null&&(e.deleteColumn(t.cellOffset()),this.quill.update(k.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(k.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const t=e.offset();e.remove(),this.quill.update(k.sources.USER),this.quill.setSelection(t,k.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[t,r]=this.quill.getLine(e.index);if(t==null||t.statics.blotName!==zt.blotName)return[null,null,null,-1];const s=t.parent;return[s.parent.parent,s,t,r]}insertColumn(e){const t=this.quill.getSelection();if(!t)return;const[r,s,i]=this.getTable(t);if(i==null)return;const a=i.cellOffset();r.insertColumn(a+e),this.quill.update(k.sources.USER);let o=s.rowOffset();e===0&&(o+=1),this.quill.setSelection(t.index+o,t.length,k.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const t=this.quill.getSelection();if(!t)return;const[r,s,i]=this.getTable(t);if(i==null)return;const a=s.rowOffset();r.insertRow(a+e),this.quill.update(k.sources.USER),e>0?this.quill.setSelection(t,k.sources.SILENT):this.quill.setSelection(t.index+s.children.length,t.length,k.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,t){const r=this.quill.getSelection();if(r==null)return;const s=new Array(e).fill(0).reduce(i=>{const a=new Array(t).fill(`
`).join("");return i.insert(a,{table:Ya()})},new re().retain(r.index));this.quill.updateContents(s,k.sources.USER),this.quill.setSelection(r.index,k.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(k.events.SCROLL_OPTIMIZE,e=>{e.some(t=>["TD","TR","TBODY","TABLE"].includes(t.target.tagName)?(this.quill.once(k.events.TEXT_CHANGE,(r,s,i)=>{i===k.sources.USER&&this.balanceTables()}),!0):!1)})}}const fl=An("quill:toolbar");class Qa extends Yt{constructor(e,t){var r,s;if(super(e,t),Array.isArray(this.options.container)){const i=document.createElement("div");i.setAttribute("role","toolbar"),J0(i,this.options.container),(s=(r=e.container)==null?void 0:r.parentNode)==null||s.insertBefore(i,e.container),this.container=i}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){fl.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(i=>{var o;const a=(o=this.options.handlers)==null?void 0:o[i];a&&this.addHandler(i,a)}),Array.from(this.container.querySelectorAll("button, select")).forEach(i=>{this.attach(i)}),this.quill.on(k.events.EDITOR_CHANGE,()=>{const[i]=this.quill.selection.getRange();this.update(i)})}addHandler(e,t){this.handlers[e]=t}attach(e){let t=Array.from(e.classList).find(s=>s.indexOf("ql-")===0);if(!t)return;if(t=t.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[t]==null&&this.quill.scroll.query(t)==null){fl.warn("ignoring attaching to nonexistent format",t,e);return}const r=e.tagName==="SELECT"?"change":"click";e.addEventListener(r,s=>{let i;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const o=e.options[e.selectedIndex];o.hasAttribute("selected")?i=!1:i=o.value||!1}else e.classList.contains("ql-active")?i=!1:i=e.value||!e.hasAttribute("value"),s.preventDefault();this.quill.focus();const[a]=this.quill.selection.getRange();if(this.handlers[t]!=null)this.handlers[t].call(this,i);else if(this.quill.scroll.query(t).prototype instanceof Tt){if(i=prompt(`Enter ${t}`),!i)return;this.quill.updateContents(new re().retain(a.index).delete(a.length).insert({[t]:i}),k.sources.USER)}else this.quill.format(t,i,k.sources.USER);this.update(a)}),this.controls.push([t,e])}update(e){const t=e==null?{}:this.quill.getFormat(e);this.controls.forEach(r=>{const[s,i]=r;if(i.tagName==="SELECT"){let a=null;if(e==null)a=null;else if(t[s]==null)a=i.querySelector("option[selected]");else if(!Array.isArray(t[s])){let o=t[s];typeof o=="string"&&(o=o.replace(/"/g,'\\"')),a=i.querySelector(`option[value="${o}"]`)}a==null?(i.value="",i.selectedIndex=-1):a.selected=!0}else if(e==null)i.classList.remove("ql-active"),i.setAttribute("aria-pressed","false");else if(i.hasAttribute("value")){const a=t[s],o=a===i.getAttribute("value")||a!=null&&a.toString()===i.getAttribute("value")||a==null&&!i.getAttribute("value");i.classList.toggle("ql-active",o),i.setAttribute("aria-pressed",o.toString())}else{const a=t[s]!=null;i.classList.toggle("ql-active",a),i.setAttribute("aria-pressed",a.toString())}})}}Qa.DEFAULTS={};function gl(n,e,t){const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add(`ql-${e}`),r.setAttribute("aria-pressed","false"),t!=null?(r.value=t,r.setAttribute("aria-label",`${e}: ${t}`)):r.setAttribute("aria-label",e),n.appendChild(r)}function J0(n,e){Array.isArray(e[0])||(e=[e]),e.forEach(t=>{const r=document.createElement("span");r.classList.add("ql-formats"),t.forEach(s=>{if(typeof s=="string")gl(r,s);else{const i=Object.keys(s)[0],a=s[i];Array.isArray(a)?ev(r,i,a):gl(r,i,a)}}),n.appendChild(r)})}function ev(n,e,t){const r=document.createElement("select");r.classList.add(`ql-${e}`),t.forEach(s=>{const i=document.createElement("option");s!==!1?i.setAttribute("value",String(s)):i.setAttribute("selected","selected"),r.appendChild(i)}),n.appendChild(r)}Qa.DEFAULTS={container:null,handlers:{clean(){const n=this.quill.getSelection();if(n!=null)if(n.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(t=>{this.quill.scroll.query(t,ie.INLINE)!=null&&this.quill.format(t,!1,k.sources.USER)})}else this.quill.removeFormat(n.index,n.length,k.sources.USER)},direction(n){const{align:e}=this.quill.getFormat();n==="rtl"&&e==null?this.quill.format("align","right",k.sources.USER):!n&&e==="right"&&this.quill.format("align",!1,k.sources.USER),this.quill.format("direction",n,k.sources.USER)},indent(n){const e=this.quill.getSelection(),t=this.quill.getFormat(e),r=parseInt(t.indent||0,10);if(n==="+1"||n==="-1"){let s=n==="+1"?1:-1;t.direction==="rtl"&&(s*=-1),this.quill.format("indent",r+s,k.sources.USER)}},link(n){n===!0&&(n=prompt("Enter link URL:")),this.quill.format("link",n,k.sources.USER)},list(n){const e=this.quill.getSelection(),t=this.quill.getFormat(e);n==="check"?t.list==="checked"||t.list==="unchecked"?this.quill.format("list",!1,k.sources.USER):this.quill.format("list","unchecked",k.sources.USER):this.quill.format("list",n,k.sources.USER)}}};const tv='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',nv='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',rv='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',sv='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',iv='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',av='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',ov='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',lv='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',pl='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',cv='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',uv='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',hv='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',dv='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',fv='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',gv='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',pv='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',mv='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',bv='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',vv='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',yv='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',Cv='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',Sv='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',Ev='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',xv='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',wv='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',Nv='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',Av='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',Tv='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',Ov='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',_v='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',Lv='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',Iv='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',Rv='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',as={align:{"":tv,center:nv,right:rv,justify:sv},background:iv,blockquote:av,bold:ov,clean:lv,code:pl,"code-block":pl,color:cv,direction:{"":uv,rtl:hv},formula:dv,header:{1:fv,2:gv,3:pv,4:mv,5:bv,6:vv},italic:yv,image:Cv,indent:{"+1":Sv,"-1":Ev},link:xv,list:{bullet:wv,check:Nv,ordered:Av},script:{sub:Tv,super:Ov},strike:_v,table:Lv,underline:Iv,video:Rv},$v='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let ml=0;function bl(n,e){n.setAttribute(e,`${n.getAttribute(e)!=="true"}`)}class li{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",t=>{switch(t.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),t.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),bl(this.label,"aria-expanded"),bl(this.options,"aria-hidden")}buildItem(e){const t=document.createElement("span");t.tabIndex="0",t.setAttribute("role","button"),t.classList.add("ql-picker-item");const r=e.getAttribute("value");return r&&t.setAttribute("data-value",r),e.textContent&&t.setAttribute("data-label",e.textContent),t.addEventListener("click",()=>{this.selectItem(t,!0)}),t.addEventListener("keydown",s=>{switch(s.key){case"Enter":this.selectItem(t,!0),s.preventDefault();break;case"Escape":this.escape(),s.preventDefault();break}}),t}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=$v,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${ml}`,ml+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(t=>{const r=this.buildItem(t);e.appendChild(r),t.selected===!0&&this.selectItem(r)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=this.container.querySelector(".ql-selected");e!==r&&(r!=null&&r.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const r=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(r)}else this.selectItem(null);const t=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",t)}}class au extends li{constructor(e,t){super(e),this.label.innerHTML=t,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(r=>{r.classList.add("ql-primary")})}buildItem(e){const t=super.buildItem(e);return t.style.backgroundColor=e.getAttribute("value")||"",t}selectItem(e,t){super.selectItem(e,t);const r=this.label.querySelector(".ql-color-label"),s=e&&e.getAttribute("data-value")||"";r&&(r.tagName==="line"?r.style.stroke=s:r.style.fill=s)}}class ou extends li{constructor(e,t){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(r=>{r.innerHTML=t[r.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,t){super.selectItem(e,t);const r=e||this.defaultItem;if(r!=null){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}}}const qv=n=>{const{overflowY:e}=getComputedStyle(n,null);return e!=="visible"&&e!=="clip"};class lu{constructor(e,t){this.quill=e,this.boundsContainer=t||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,qv(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const t=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${t}px`,this.root.style.top=`${r}px`,this.root.classList.remove("ql-flip");const s=this.boundsContainer.getBoundingClientRect(),i=this.root.getBoundingClientRect();let a=0;if(i.right>s.right&&(a=s.right-i.right,this.root.style.left=`${t+a}px`),i.left<s.left&&(a=s.left-i.left,this.root.style.left=`${t+a}px`),i.bottom>s.bottom){const o=i.bottom-i.top,c=e.bottom-e.top+o;this.root.style.top=`${r-c}px`,this.root.classList.add("ql-flip")}return a}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const Mv=[!1,"center","right","justify"],kv=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Dv=[!1,"serif","monospace"],jv=["1","2","3",!1],Pv=["small",!1,"large","huge"];class ds extends Rr{constructor(e,t){super(e,t);const r=s=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",r);return}this.tooltip!=null&&!this.tooltip.root.contains(s.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(i=>{i.container.contains(s.target)||i.close()})};e.emitter.listenDOM("click",document.body,r)}addModule(e){const t=super.addModule(e);return e==="toolbar"&&this.extendToolbar(t),t}buildButtons(e,t){Array.from(e).forEach(r=>{(r.getAttribute("class")||"").split(/\s+/).forEach(i=>{if(i.startsWith("ql-")&&(i=i.slice(3),t[i]!=null))if(i==="direction")r.innerHTML=t[i][""]+t[i].rtl;else if(typeof t[i]=="string")r.innerHTML=t[i];else{const a=r.value||"";a!=null&&t[i][a]&&(r.innerHTML=t[i][a])}})})}buildPickers(e,t){this.pickers=Array.from(e).map(s=>{if(s.classList.contains("ql-align")&&(s.querySelector("option")==null&&Gr(s,Mv),typeof t.align=="object"))return new ou(s,t.align);if(s.classList.contains("ql-background")||s.classList.contains("ql-color")){const i=s.classList.contains("ql-background")?"background":"color";return s.querySelector("option")==null&&Gr(s,kv,i==="background"?"#ffffff":"#000000"),new au(s,t[i])}return s.querySelector("option")==null&&(s.classList.contains("ql-font")?Gr(s,Dv):s.classList.contains("ql-header")?Gr(s,jv):s.classList.contains("ql-size")&&Gr(s,Pv)),new li(s)});const r=()=>{this.pickers.forEach(s=>{s.update()})};this.quill.on(Q.events.EDITOR_CHANGE,r)}}ds.DEFAULTS=Mn({},Rr.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let n=this.container.querySelector("input.ql-image[type=file]");n==null&&(n=document.createElement("input"),n.setAttribute("type","file"),n.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),n.classList.add("ql-image"),n.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,n.files),n.value=""}),this.container.appendChild(n)),n.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class cu extends lu{constructor(e,t){super(e,t),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;t!=null?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const r=this.quill.getBounds(this.quill.selection.savedRange);r!=null&&this.position(r),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:t}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,Q.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,Q.sources.USER)),this.quill.root.scrollTop=t;break}case"video":e=Bv(e);case"formula":{if(!e)break;const t=this.quill.getSelection(!0);if(t!=null){const r=t.index+t.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),e,Q.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(r+1," ",Q.sources.USER),this.quill.setSelection(r+2,Q.sources.USER)}break}}this.textbox.value="",this.hide()}}function Bv(n){let e=n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=n.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:n}function Gr(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(r=>{const s=document.createElement("option");r===t?s.setAttribute("selected","selected"):s.setAttribute("value",String(r)),n.appendChild(s)})}const Hv=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class uu extends cu{constructor(e,t){super(e,t),this.quill.on(Q.events.EDITOR_CHANGE,(r,s,i,a)=>{if(r===Q.events.SELECTION_CHANGE)if(s!=null&&s.length>0&&a===Q.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const o=this.quill.getLines(s.index,s.length);if(o.length===1){const c=this.quill.getBounds(s);c!=null&&this.position(c)}else{const c=o[o.length-1],u=this.quill.getIndex(c),h=Math.min(c.length()-1,s.index+s.length-u),p=this.quill.getBounds(new tr(u,h));p!=null&&this.position(p)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(Q.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const t=this.quill.getBounds(e);t!=null&&this.position(t)}},1)})}cancel(){this.show()}position(e){const t=super.position(e),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",t!==0&&(r.style.marginLeft=`${-1*t-r.offsetWidth/2}px`),t}}X(uu,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));class hu extends ds{constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=Hv),super(e,t),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new uu(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),as),this.buildPickers(e.container.querySelectorAll("select"),as))}}hu.DEFAULTS=Mn({},ds.DEFAULTS,{modules:{toolbar:{handlers:{link(n){n?this.quill.theme.tooltip.edit():this.quill.format("link",!1,k.sources.USER)}}}}});const Fv=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class du extends cu{constructor(){super(...arguments);X(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",t=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),t.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",t=>{if(this.linkRange!=null){const r=this.linkRange;this.restoreFocus(),this.quill.formatText(r,"link",!1,Q.sources.USER),delete this.linkRange}t.preventDefault(),this.hide()}),this.quill.on(Q.events.SELECTION_CHANGE,(t,r,s)=>{if(t!=null){if(t.length===0&&s===Q.sources.USER){const[i,a]=this.quill.scroll.descendant(Rn,t.index);if(i!=null){this.linkRange=new tr(t.index-a,i.length());const o=Rn.formats(i.domNode);this.preview.textContent=o,this.preview.setAttribute("href",o),this.show();const c=this.quill.getBounds(this.linkRange);c!=null&&this.position(c);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}X(du,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class fu extends ds{constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=Fv),super(e,t),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),as),this.buildPickers(e.container.querySelectorAll("select"),as),this.tooltip=new du(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(t,r)=>{e.handlers.link.call(e,!r.format.link)}))}}fu.DEFAULTS=Mn({},ds.DEFAULTS,{modules:{toolbar:{handlers:{link(n){if(n){const e=this.quill.getSelection();if(e==null||e.length===0)return;let t=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(t)&&t.indexOf("mailto:")!==0&&(t=`mailto:${t}`);const{tooltip:r}=this.quill.theme;r.edit("link",t)}else this.quill.format("link",!1,k.sources.USER)}}}}});k.register({"attributors/attribute/direction":Gc,"attributors/class/align":Uc,"attributors/class/background":a0,"attributors/class/color":i0,"attributors/class/direction":Kc,"attributors/class/font":Zc,"attributors/class/size":Qc,"attributors/style/align":zc,"attributors/style/background":Ga,"attributors/style/color":Va,"attributors/style/direction":Wc,"attributors/style/font":Yc,"attributors/style/size":Jc},!0);k.register({"formats/align":Uc,"formats/direction":Kc,"formats/indent":Z0,"formats/background":Ga,"formats/color":Va,"formats/font":Zc,"formats/size":Qc,"formats/blockquote":fa,"formats/code-block":yt,"formats/header":ga,"formats/list":hs,"formats/bold":is,"formats/code":Ka,"formats/italic":pa,"formats/link":Rn,"formats/script":ma,"formats/strike":ba,"formats/underline":va,"formats/formula":js,"formats/image":ya,"formats/video":Ps,"modules/syntax":iu,"modules/table":Q0,"modules/toolbar":Qa,"themes/bubble":hu,"themes/snow":fu,"ui/icons":as,"ui/picker":li,"ui/icon-picker":ou,"ui/color-picker":au,"ui/tooltip":lu},!0);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};function gu({defaultValue:n,onChange:e,placeholder:t,theme:r="snow"}){const s=C.useRef(null),i=C.useRef(n),a=C.useRef(e);return C.useLayoutEffect(()=>{a.current=e}),C.useEffect(()=>{const o=s.current;if(!o)return;const c=o.appendChild(o.ownerDocument.createElement("div")),u=new k(c,{placeholder:t,theme:r});return i.current&&u.setContents(u.clipboard.convert({html:i.current})),u.on(k.events.TEXT_CHANGE,()=>{var h;(h=a.current)==null||h.call(a,u.getSemanticHTML())}),()=>{o.innerHTML=""}},[]),L("div",{ref:s})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};function pu(){const n=Dn();return jn({mutationFn:async e=>En("pro_custom-machines/save",e,void 0,"POST"),mutationKey:["saveModules"],onSuccess:({data:e})=>{n.setQueryData(["customApps"],t=>t&&wn(t,r=>{const s=r.data.find(i=>i.id===e.custom_app_id);s&&(s.customMachines||(s.customMachines=[]),s.customMachines.push(e))}))}})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};function mu(n){const e=Dn();return jn({mutationFn:async t=>En(`pro_custom-machines/${t.id}/update`,t,void 0,"POST"),mutationKey:["updateModules"],onSuccess:(t,r)=>{e.invalidateQueries({queryKey:Bu.createKey(n,r.slug)}),e.setQueryData(["customApps"],s=>s&&wn(s,i=>{const a=i.data.find(o=>o.id===r.custom_app_id);if(a){a.customMachines||(a.customMachines=[]);const o=a.customMachines.findIndex(c=>c.id===r.id);o!==-1&&Object.assign(a.customMachines[o],r)}}))}})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};const{Text:Ui}=Kt,{TextArea:Uv}=Fl;function zv({helperText:n,invalidMessage:e,label:t,onRender:r,status:s,wrapperClassName:i,...a}){const o=C.useId(),{token:c}=Bl.useToken();return C.useEffect(()=>{r==null||r()},[]),fe("div",{className:i,children:[t&&fe("label",{className:"d-b mb-1 font-medium",css:Xs({color:c.colorText},"",""),htmlFor:o,children:[t," ",a.required&&L(Ui,{type:"danger",children:"*"})]}),L(Uv,{"data-testid":"inputComponent",id:o,status:s,...a}),s==="error"&&e&&L(Ui,{type:"danger",children:e}),!e&&n&&L(Ui,{type:"secondary",children:n})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};function bu({data:n,handleConfigChange:e}){return fe(os,{children:[L(Mt,{label:B("label"),onChange:t=>e("label",t.target.value),value:n==null?void 0:n.label,wrapperClassName:"mb-3"}),L(Us,{label:B("Field type"),onChange:t=>e("type",t),options:[{label:B("Text"),value:"text"},{label:B("Number"),value:"number"},{label:B("Email"),value:"email"}],value:n==null?void 0:n.type,wrapperClassName:"mb-3"}),L(Mt,{label:B("Default value"),onChange:t=>e("default",t.target.value),value:n==null?void 0:n.default,wrapperClassName:"mb-3"}),L("div",{className:"mb-3",children:L(Ku,{checked:n==null?void 0:n.required,onChange:t=>e("required",t.target.checked),children:B("Make this field Required")})})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};function Vv({data:n,setCustomAction:e}){const[t,r]=C.useState({open:!1}),s=()=>{r({open:!1})},i=(p,d,f,m)=>{if(m===void 0)return;const b=p[f][m].value;e(y=>{y.config.body||(y.config.body=[]),y.config.body[f]||(y.config.body[f]={}),y.config.body[f].key=b})},a=p=>{e(d=>{d.config.body&&d.config.body.splice(p,1)})},o=(p,d)=>{e(f=>{t.index!==void 0&&(f.config.body||(f.config.body=[]),f.config.body[t.index]||(f.config.body[t.index]={}),f.config.body[t.index][p]=d)})},c=p=>{r({index:p,open:!0})},u=C.useCallback(p=>L(ze,{css:ph({mb:3,mnw:"24px*"}),icon:L(Na,{}),onClick:()=>c(p),size:"small"}),[]),h=C.useMemo(()=>n==null?void 0:n.map(p=>[{name:"key",value:p.key||""}]),[n]);return fe("div",{children:[L(_a,{addItemButtonLabel:B("Add"),additionalActions:u,fieldsMetaData:Aa,label:B("Body"),onChange:i,onDelete:a,value:h,wrapperClassName:"mb-3"}),t.index!==void 0&&L(Ta,{extra:L(ze,{onClick:s,children:B("Close")}),onClose:s,open:t.open,width:600,children:L(bu,{data:n==null?void 0:n[t.index],handleConfigChange:o})})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};function Gv({data:n,setCustomAction:e}){var p,d;const[t,r]=C.useState({open:!1}),s=()=>{r({open:!1})},i=(f,m,b,y)=>{if(y===void 0)return;const E=f[b][y].value;e(S=>{S.config.headers||(S.config.headers=[]),S.config.headers[b]||(S.config.headers[b]={}),S.config.headers[b].key=E})},a=f=>{e(m=>{m.config.headers&&m.config.headers.splice(f,1)})},o=(f,m)=>{e(b=>{t.index!==void 0&&(b.config.headers||(b.config.headers=[]),b.config.headers[t.index]||(b.config.headers[t.index]={}),b.config.headers[t.index][f]=m)})},c=f=>{r({index:f,open:!0})},u=C.useCallback(f=>L(ze,{icon:L(Na,{}),onClick:()=>c(f),size:"small"}),[]),h=C.useMemo(()=>n==null?void 0:n.map(f=>[{name:"key",value:f.key||""}]),[n]);return fe("div",{children:[L(_a,{addItemButtonLabel:B("Add"),additionalActions:u,fieldsMetaData:Aa,label:B("Headers"),onChange:i,onDelete:a,value:h,wrapperClassName:"mb-3"}),t.index!==void 0&&fe(Ta,{extra:L(ze,{onClick:s,children:B("Close")}),onClose:s,open:t.open,width:600,children:[L(Mt,{label:B("Label"),onChange:f=>o("label",f.target.value),value:(p=n==null?void 0:n[t.index])==null?void 0:p.label,wrapperClassName:"mb-3"}),L(Mt,{label:B("Default value"),onChange:f=>o("default",f.target.value),value:(d=n==null?void 0:n[t.index])==null?void 0:d.default,wrapperClassName:"mb-3"})]})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};function Kv({data:n,setCustomAction:e}){const[t,r]=C.useState({open:!1}),s=()=>{r({open:!1})},i=(p,d,f,m)=>{if(m===void 0)return;const b=p[f][m].value;e(y=>{y.config.query_params||(y.config.query_params=[]),y.config.query_params[f]||(y.config.query_params[f]={}),y.config.query_params[f].key=b})},a=p=>{e(d=>{d.config.query_params&&d.config.query_params.splice(p,1)})},o=(p,d)=>{e(f=>{t.index!==void 0&&(f.config.query_params||(f.config.query_params=[]),f.config.query_params[t.index]||(f.config.query_params[t.index]={}),f.config.query_params[t.index][p]=d)})},c=p=>{r({index:p,open:!0})},u=C.useCallback(p=>L(ze,{icon:L(Na,{}),onClick:()=>c(p),size:"small"}),[]),h=C.useMemo(()=>n==null?void 0:n.map(p=>[{name:"key",value:p.key||""}]),[n]);return fe("div",{children:[L(_a,{addItemButtonLabel:B("Add"),additionalActions:u,fieldsMetaData:Aa,label:B("QueryParams"),onChange:i,onDelete:a,value:h,wrapperClassName:"mb-3"}),t.index!==void 0&&L(Ta,{extra:L(ze,{onClick:s,children:B("Close")}),onClose:s,open:t.open,width:600,children:L(bu,{data:n==null?void 0:n[t.index],handleConfigChange:o})})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};const{Text:vl}=Kt;function vu({appId:n,appSlug:e,closeModal:t,module:r}){var N,T,_,P;const[s,i]=Ys(r||Hu),a=pu(),o=mu(e),{connections:c,isConnectionFetching:u}=gh(e,void 0,!!e),[h,p]=C.useState(),{messageApi:d}=C.useContext(xn),f=C.useMemo(()=>Array.isArray(c)?c.map(R=>({label:R.connection_name,value:R.id})):[],[c]),m=(R,K)=>{i(U=>{U[R]=K})},b=(R,K)=>{i(U=>{U.config[R]=K})},y=R=>{const K=R.config.method==="GET",U=R.config.is_body_json_enable,z=R.config.content_type==="application/json";return K&&delete R.config.body,(K||!z||!U)&&(delete R.config.body_json,delete R.config.is_body_json_enable),R},E=async()=>{const R=y(s);if(r){const U=o.mutateAsync({app_type:"action",custom_app_id:n,id:r.id,slug:r.slug,...R});return i(R),U}const K=a.mutateAsync({app_type:"action",custom_app_id:n,...R});return i(R),K};async function S(R){R.preventDefault(),p(void 0),await E(),t(),d==null||d.success(`Action ${r?"updated":"saved"} successfully`)}return C.useEffect(()=>{if(a.isError){const{data:R}=a.error;p(R)}else if(o.isError){const{data:R}=o.error;p(R)}},[a.isError,o.isError]),fe("form",{onSubmit:S,children:[L(Mt,{"data-testid":"action-name",helperText:B('Action name should be unique and descriptive. For example, "Create Lead".'),invalidMessage:(N=h==null?void 0:h.name)==null?void 0:N[0],label:B("Name"),onChange:R=>m("name",R.target.value),required:!0,status:(h==null?void 0:h.name)&&"error",value:s.name,wrapperClassName:"mb-3"}),fe("div",{className:"mb-3",children:[L(vl,{style:{display:"block",fontWeight:500,marginBottom:5},children:B("Description")}),L(gu,{defaultValue:s.config.description,onChange:R=>b("description",R),theme:"snow"}),(h==null?void 0:h["config.description"])&&L(vl,{type:"danger",children:(T=h==null?void 0:h["config.description"])==null?void 0:T[0]})]}),L("div",{className:"mb-3",children:L("label",{children:fe(vn,{children:[L(Fs,{checked:s.config.is_auth_enabled,onChange:R=>b("is_auth_enabled",R),size:"small"}),B("Enable Authentication")]})})}),s.config.is_auth_enabled&&L("div",{className:"mb-3",children:L(fh,{allowClear:!0,appName:B("Custom App"),appSlug:e,connectionOptionsProp:f,connectionsTypes:Fu,customConnection:!0,helpingText:B("You can set a default connection for this action. which will be used to authenticate the request. you can also select other connections during flow setup."),label:B("Default Connection"),loading:u,onConnectionChange:R=>m("connection_id",R),value:s.connection_id})}),L(Mt,{addonBefore:L(Us,{onChange:R=>b("method",R),options:Uu,required:!0,style:{width:100},value:s.config.method}),"data-testid":"action-url",invalidMessage:(_=h==null?void 0:h["config.url"])==null?void 0:_[0],label:B("Request URL"),onChange:R=>b("url",R.target.value),required:!0,status:(h==null?void 0:h["config.url"])&&"error",type:"url",value:s.config.url,wrapperClassName:"mb-3"}),L(mn,{conditions:s.config.method!=="GET",children:L(Us,{label:B("Content Type"),onChange:R=>b("content_type",R),options:zu,value:s.config.content_type,wrapperClassName:"mb-3"})}),L(Gv,{data:s.config.headers,setCustomAction:i}),L(Kv,{data:s.config.query_params,setCustomAction:i}),L(mn,{conditions:s.config.method!=="GET",children:L(Vv,{data:s.config.body,setCustomAction:i})}),fe(mn,{conditions:[s.config.method!=="GET",s.config.content_type==="application/json"],children:[L("div",{className:"mb-1",children:fe(vn,{children:[L(Fs,{checked:s.config.is_body_json_enable,onChange:R=>b("is_body_json_enable",R),size:"small"}),B("Custom Request Body (Raw JSON)")]})}),L(mn,{conditions:s.config.is_body_json_enable,children:L(zv,{invalidMessage:(P=h==null?void 0:h["config.body_json"])==null?void 0:P[0],onChange:R=>b("body_json",R.target.value),placeholder:`// example
{
      "name": {
            "first_name": "{{ body_field_key_1 }}",
            "last_name": "{{ body_field_key_2 }}"
      },
      "age": "{{ body_field_key_3 }}",
      "request_from": "Custom App"
}`,rows:8,status:(h==null?void 0:h["config.body_json"])&&"error",value:s.config.body_json,wrapperClassName:"mb-3"})})]}),L(mn,{conditions:!$n.IS_PRO,children:L(Hl,{message:B("This is a pro feature, upgrade to Pro to enable this feature."),showIcon:!0,type:"warning"})}),fe(on,{className:"mt-3",gap:8,justify:"end",children:[L(ze,{onClick:t,children:B("Cancel")}),L(mn,{conditions:$n.IS_PRO,children:L(ze,{"data-testid":"modules-form-submit",htmlType:"submit",loading:a.isPending||o.isPending,type:"primary",children:r?B("Update"):B("Save")})}),L(Zs,{className:"mr-0"})]})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};const Wv={config:{description:B("")},name:""},Xv=[{label:B("Webhook"),value:"webhook"},{label:B("WP action hook"),value:"wp_hook"}];globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};const{Text:yl}=Kt;function yu({appId:n,closeModal:e,module:t}){var m,b,y,E,S;const[r,s]=Ys(t||Wv),i=pu(),a=mu(t==null?void 0:t.slug),[o,c]=C.useState(),{messageApi:u}=C.useContext(xn),h=(N,T)=>{s(_=>{_[N]=T})},p=(N,T)=>{s(_=>{Array.isArray(_.config)&&(_.config={}),_.config[N]=T})},d=async()=>t?a.mutateAsync({app_type:"trigger",custom_app_id:n,id:t.id,slug:t.slug,...r}):i.mutateAsync({app_type:"trigger",custom_app_id:n,...r});async function f(N){N.preventDefault(),c(void 0),await d(),e(),u==null||u.success(`Trigger ${t?"updated":"saved"} successfully`)}return C.useEffect(()=>{if(i.isError){const{data:N}=i.error;c(N)}else if(a.isError){const{data:N}=a.error;c(N)}},[i.error,i.isError,a.error,a.isError]),fe("form",{onSubmit:f,children:[L(Mt,{"data-testid":"trigger-name",helperText:B('Trigger name should be unique and descriptive. For example, "New Order Received".'),invalidMessage:(m=o==null?void 0:o.name)==null?void 0:m[0],label:B("Name"),onChange:N=>h("name",N.target.value),required:!0,status:(o==null?void 0:o.name)&&"error",value:r.name,wrapperClassName:"mb-3"}),fe("div",{className:"mb-3",children:[L(yl,{style:{display:"block",fontWeight:500,marginBottom:5},children:B("Description")}),L(gu,{defaultValue:r.config.description,onChange:N=>p("description",N),theme:"snow"}),(o==null?void 0:o["config.description"])&&L(yl,{type:"danger",children:(b=o==null?void 0:o["config.description"])==null?void 0:b[0]})]}),L(Us,{"data-testid":"trigger-type",invalidMessage:(y=o==null?void 0:o.trigger_type)==null?void 0:y[0],label:B("Trigger Type"),onChange:N=>h("trigger_type",N),options:Xv,required:!0,status:(o==null?void 0:o.trigger_type)&&"error",value:r.trigger_type,wrapperClassName:"mb-3"}),r.trigger_type==="wp_hook"&&L(Mt,{"data-testid":"hook-name",helperText:B('Enter the name of the WordPress action hook that will trigger this module. For example, "woocommerce_new_order".'),invalidMessage:(E=o==null?void 0:o["config.hook_name"])==null?void 0:E[0],label:B("WP Action Hook Name"),onChange:N=>p("hook_name",N.target.value),placeholder:B("add_action hook name"),required:!0,status:(o==null?void 0:o["config.hook_name"])&&"error",value:(S=r.config)==null?void 0:S.hook_name,wrapperClassName:"mb-3"}),L(mn,{conditions:!$n.IS_PRO,children:L(Hl,{message:B("This is a Pro feature, upgrade to Pro to enable this feature."),showIcon:!0,type:"warning"})}),fe(on,{className:"mt-3",gap:8,justify:"end",children:[L(ze,{onClick:e,children:B("Cancel")}),L(mn,{conditions:$n.IS_PRO,children:L(ze,{"data-testid":"modules-form-submit",htmlType:"submit",loading:i.isPending||a.isPending,type:"primary",children:t?B("Update"):B("Save")})}),L(Zs,{className:"mr-0"})]})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};function Zv({appId:n,appSlug:e}){const{addModuleCustomAppId:t,setAddModuleCustomAppId:r}=$a(),[s,i]=C.useState("action"),a=!!(t&&t===n),o=h=>{i(h.target.value)},c=()=>{r(n)},u=()=>{r(void 0)};return fe(os,{children:[L(ze,{"data-testid":"add-modules",icon:L(Ml,{}),onClick:c,type:"primary",children:B("Add Module")}),fe(Qs,{destroyOnClose:!0,footer:null,maskClosable:!1,onCancel:u,open:a,title:fe("div",{className:"flex items-center gap-1",children:[L(Kt.Text,{className:"text-base",children:B("Create a Module")}),L(Zs,{})]}),width:600,children:[fe("div",{className:"mb-3",children:[fe(Ni.Group,{onChange:o,style:{marginBottom:5},value:s,children:[L(Ni,{"data-testid":"action-module",value:"action",children:B("Action")}),L(Ni,{"data-testid":"trigger-module",value:"trigger",children:B("Trigger")})]}),L("br",{}),L(Kt.Text,{type:"secondary",children:B("Select the type of module you want to create. A trigger is an event that starts a workflow, and an action is a step that performs a task.")})]}),s==="trigger"&&L(yu,{appId:n,closeModal:u}),s==="action"&&L(vu,{appId:n,appSlug:e,closeModal:u})]})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};function Yv({appId:n,appSlug:e,module:t}){const[r,s]=C.useState(!1),i=()=>{s(!0)},a=()=>{s(!1)};return fe(os,{children:[L(ze,{"data-testid":"edit-modules",icon:L(Dl,{}),onClick:i,type:"text"}),r&&fe(Qs,{footer:null,maskClosable:!1,onCancel:a,open:!0,title:B("Edit Module"),width:600,children:[t.app_type==="trigger"&&L(yu,{appId:n,closeModal:a,module:t}),t.app_type==="action"&&L(vu,{appId:n,appSlug:e,closeModal:a,module:t})]})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};function Qv({customApp:n,handleDelete:e,handleStatusChange:t}){var s;const{token:r}=Bl.useToken();return fe("div",{style:{paddingBlock:16,paddingInline:"41px 16px"},children:[(s=n.customMachines)==null?void 0:s.map(i=>fe(on,{justify:"space-between",style:{borderBottom:`1px solid ${r.colorBorder}`,paddingBlock:3},children:[fe(vn,{size:4,children:[L(Gl,{bordered:!1,color:i.app_type==="action"?"blue":"volcano",style:{textTransform:"capitalize"},children:i.app_type}),i.name]}),fe(vn,{children:[L(Fs,{checked:i.status,"data-testid":"change-modules-status",onChange:t(i.id),size:"small"}),L(Yv,{appId:n.id,appSlug:n.slug,module:i}),L(Vl,{cancelText:B("No"),description:B("Are you sure to delete this module?"),okText:B("Yes"),onConfirm:e(i.id),placement:"right",title:B("Delete the module"),children:L(ze,{"data-testid":"delete-modules",icon:L(jl,{}),type:"text"})})]})]},i.id)),(!n.customMachines||!n.customMachines.length)&&L(zl,{description:B("No module")}),L(on,{className:"mt-2",justify:!n.customMachines||!n.customMachines.length?"center":"flex-start",children:L(Zv,{appId:n.id,appSlug:n.slug})})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};function Jv({children:n,color:e,logo:t}){return fe(vn,{children:[L(Oa,{css:Xs({"& img":{objectFit:"contain !important"}},"",""),size:34,src:t,style:{background:e,padding:6}}),n]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};function e1(){var m;const{customApps:n,isCustomAppLoading:e,isCustomAppPending:t}=zd(),{deleteCustomApps:r}=Vd(),{deleteModules:s}=Gd(),{updateCustomAppsStatus:i}=Kd(),{updateModuleStatus:a}=Wd(),{messageApi:o}=C.useContext(xn),{activeKey:c,setActiveKey:u}=$a();if(t)return L(dh,{className:"block"});if(!e&&!(n!=null&&n.length))return L(zl,{description:B("No Custom App Found!")});const h=b=>async()=>{await r(b),o==null||o.success(B("Custom App deleted successfully"))},p=b=>async()=>{await s(b),o==null||o.success(B("Module deleted successfully"))},d=b=>async y=>{await i({customAppId:b,status:y}),o==null||o.success(B("Status updated successfully"))},f=b=>async y=>{await a({moduleId:b,status:y}),o==null||o.success(B("Status updated successfully"))};return L(Du,{activeKey:c,defaultActiveKey:(n==null?void 0:n.length)===1?(m=n==null?void 0:n[0])==null?void 0:m.id:void 0,items:n==null?void 0:n.map(b=>({children:L(Qv,{customApp:b,handleDelete:p,handleStatusChange:f}),className:"customAppCollapse",extra:L(Qd,{customApp:b,handleDelete:h,handleStatusChange:d}),key:b.id,label:L(Jv,{color:b.color,logo:b.logo,children:fe(on,{vertical:!0,children:[b.name,L(Kt.Text,{ellipsis:!0,style:{fontSize:12,width:300},type:"secondary",children:b.description})]})})})),onChange:u})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};const{Title:t1}=Kt;function D1(){return fe("div",{className:"p-6",children:[fe(on,{align:"center",className:"mb-8",gap:10,children:[L(t1,{className:"m-0",level:3,children:B("Custom Apps")}),L(Ud,{})]}),L(e1,{})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,e){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,e),e)}};export{D1 as default};
