import{au as f,r as p,N as g,g as C,q as x,w as y,a as r,j as a,_ as i,S as T,F as _,y as u,B as v,n as d}from"./main-red-poems-invite.js";import{u as A}from"./useconne-36.js";import{G as j}from"./_applist-952.js";import{L as h,h as b,d as D}from"./index-863.js";import{u as w}from"./utilscss-272.js";import{T as N}from"./index-384.js";import{D as m,P as M}from"./index-924.js";import{S}from"./skeleton-352.js";import{A as I}from"./index-554.js";import"./mutative-12.js";import"./lodash-840.js";import"./extendso-287.js";import"./index-630.js";import"./searchou-927.js";import"./usebreak-848.js";import"./paginati-257.js";import"./col-740.js";import"./index-836.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function F(){const e=f(),{messageApi:t}=p.useContext(g),{isPending:l,mutateAsync:n}=C({mutationFn:async c=>x(`connections/${c}/delete`),mutationKey:["delete_connection"],onError:c=>{t==null||t.warning(c.data)},onSuccess:({data:c})=>{e.setQueryData(["connections","all","all"],s=>s&&{...s,data:s.data.filter(({id:o})=>o!==c)})}});return{deleteConnection:n,isConnectionDeleting:l}}const L="_avatar_6vzbc_1",$={avatar:L};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const q=()=>({avatar:e=>w({bdr:`1px solid ${y(e,-100)}*`,bg:`${e}*`,h:"40px*",p:"6px*",w:"40px*"})});globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const{Text:E,Title:B}=N;function ae(){const{connections:e,isConnectionLoading:t}=A(),{deleteConnection:l}=F(),{messageApi:n}=p.useContext(g),c=async s=>{await l(s),n==null||n.success("Connection deleted successfully")};return r("div",{className:"p-6",children:[a(B,{level:3,children:i("Connections")}),a(m,{className:"mt-3"}),a(h,{dataSource:e,itemLayout:"horizontal",loading:t,renderItem:s=>{const o=j(s.app_slug);return a(h.Item,{actions:[a(_,{children:r("div",{className:"space-x-2",children:[r(E,{className:"inline-flex flex-col text-right",type:"secondary",children:[a("span",{children:b(s.created_at,new Date)}),a("small",{children:D(`${u.DATE_FORMAT} | ${u.TIME_FORMAT}`,s.created_at)})]}),a("div",{className:"inline-flex w-60 justify-end space-x-2",children:a(M,{cancelText:i("No"),description:i("Are you sure to delete this connection?"),icon:a(d,{color:"red"}),okText:i("Yes"),onConfirm:()=>c(s.id),title:i("Delete the connection"),children:a(v,{icon:a(d,{}),children:i("Delete")})},"delete")})]})})],children:a(S,{active:!0,avatar:!0,loading:t,title:!1,children:a(h.Item.Meta,{avatar:a(I,{className:$.avatar,css:q().avatar(o==null?void 0:o.color),src:o==null?void 0:o.logoUrl}),description:r(T,{className:"text-xs",split:a(m,{type:"vertical"}),children:[a("span",{children:o==null?void 0:o.name}),s.account_name&&a("span",{children:s.account_name})]}),title:s.connection_name})})})}})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};export{ae as default};
